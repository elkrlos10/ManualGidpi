//var _0x2d89=['#efecto\x20li','#causa\x20li','querySelectorAll','#efectoIndirecto\x20li','#imgEfecto3\x20img','#imgCausa3\x20img','length','style','width','#imgEfecto','setAttribute','src','img/lineaU','.png','#imgCausa','img/sinLinea.png','#efectoIndirecto\x20li:nth-child(','#causaIndirecta\x20li:nth-child(',')\x20div','img/lineaD','efecto','.bloque\x20div\x20span','innerHTML','img','indirecto','causa','#modal','display','block','none','.contenidoModal','top','-25%','CausasTotales','EfectosTotales','MediosIndTotales','CausasIndTotales','EfectosIndTotales','IdProyecto','AbrirProyecto','success','DatosProyecto','Etapa','show','ConsultarArbolFinal','ArbolFinal','ProblemaCentral','value','En\x20el\x20panel\x20de\x20la\x20izquierda\x20podras\x20crear\x20los\x20medios\x20y\x20fines.','each','createElement','div','textarea','Efecto','<span></span><h6\x20class=\x27borrarElemento\x27\x20onclick=\x27borrarElemento(this)\x27>\x20Borrar</h6>','class','bloque','txtBloque2','maxlength','140','appendChild','li:last-child\x20div:last-child','#imgEfecto3','EfectoIndirecta','push','span','txtBloque3','li:nth-child(',')\x20div:last-child','Causas','Causa','#imgCausa3','CausaIndirecta','<h6\x20class=\x27borrarElemento\x27\x20onclick=\x27borrarElemento2(this)\x27>\x20Borrar</h6>','bloque2','ConsultarArbolObjetivosFinal','ObjetivoCentral','#txtProblema','Consejo.','Fines','fin','FinesIndTotales','FinesIndirectos','MediosIndirectos','mostrarPanel','30px','Ocultar','cambioElemento','#elemento','#asignarIndirecta','<option\x20value=\x22vacio\x22>Seleccionar...</option>','efectoIndirecto','#indirecta','#txtIndirecta','Asiga\x20tu\x20efecto\x20indirecto\x20a\x20un\x20efecto\x20según\x20su\x20posición.','causaIndirecta','Asiga\x20tu\x20causa\x20indirecta\x20a\x20una\x20causa\x20según\x20su\x20posición.','crear','vacio','Recuerda.','Debes\x20seleccionar\x20un\x20fin\x20o\x20un\x20medio.','Debes\x20seleccionar\x20un\x20fin\x20o\x20un\x20medio\x20primero.','font-size:10px;','Ya\x20tienes\x205\x20fines.','#causaIndirecta','Ya\x20tienes\x203\x20fines\x20indirectos.','log','Ya\x20tienes\x203\x20medios\x20indirectos.','#efecto\x20li:nth-child(',')\x20textarea','Ups!\x20tienes\x20algún\x20fin\x20vacio','#causa\x20li:nth-child(','indirecto\x20div','indirecto\x20div:nth-child(','Ups!\x20tienes\x20algún\x20fin\x20indirecto\x20vacio','Ups!\x20tienes\x20algún\x20medio\x20indirecto\x20vacia','Medios','#guardar','#tipArbolObjetivos','.borrarElemento','#arbolContenedor','toDataURL','data:application/octet-stream','imagen','GuardarDatosArbol','Registro\x20Exitoso','25%','#TabObjetivos','ocultarArbol','AgregarMedio','medios1','splice','#ArbolObjetivos','#audioAyudaCuatro','#audioAyudaSeis','css','.notify','medios','Especificos','ConsultarDatosObjetivos','DatosObjetivos','IdObjetivoEsp','ObjetivoEsp','#verbo','#campoObjetivoGeneral','-10%','#tituloObjetivoGeneral','18%','#audioAyudaCinco','mostrarResultados','mediosIndirectos','Medio','medio','prueba','HerramientaResultado','ProductoResultado','audio-player','guardarObjetivos','val',':visible','ObjetivosFinales1','toString','medioIndirectos','Resultado','Herramienta','Producto','Resultado1','MedidaResultado','#238276','url','atras','/Menu','GuardarObjetivosEspecificos','ObjetivosEspe','controller','ArbolObjetivosController','$scope','$rootScope','$location','ArbolObjetivoService','$cookies','MenuService','$routeParams','#agregar_btn','#botonQuitar','hide','#resultados','attr','disabled','#VistaObjetivos','#vistaResultados','Arbol','proyecto','ObjArbol','datos','Objetivos','ObjetivosFinales','PauseAudio','getElementById','pause','audio-player1','audio-player2','CerrarAudio','mozRequestAnimationFrame','webkitRequestAnimationFrame','msRequestAnimationFrame','querySelector','#panel','#efecto','#causa','#efectoIndirecto'];(function(_0x52faae,_0x5d541a){var _0x2d2bfb=function(_0x4c3732){while(--_0x4c3732){_0x52faae['push'](_0x52faae['shift']());}};_0x2d2bfb(++_0x5d541a);}(_0x2d89,0x181));var _0x1628=function(_0xd89a00,_0xa1dab6){_0xd89a00=_0xd89a00-0x0;var _0x20be95=_0x2d89[_0xd89a00];return _0x20be95;};ManualApp[_0x1628('0x0')](_0x1628('0x1'),[_0x1628('0x2'),_0x1628('0x3'),_0x1628('0x4'),_0x1628('0x5'),_0x1628('0x6'),'$cookieStore',_0x1628('0x7'),_0x1628('0x8'),'$sce',function(_0x1509e0,_0x116e3e,_0x20c4c8,_0x502995,_0x4e308d,_0x3821fe,_0x4ef98d,_0x2c3a5c,_0x1c77f3){VideoDemo=0x1;$(_0x1628('0x9'))['hide']();$(_0x1628('0xa'))[_0x1628('0xb')]();$(_0x1628('0xc'))[_0x1628('0xd')](_0x1628('0xe'),_0x1628('0xe'));$(_0x1628('0xf'))[_0x1628('0xb')]();$(_0x1628('0x10'))[_0x1628('0xb')]();_0x1509e0[_0x1628('0x11')]={'IdProyecto':_0x116e3e[_0x1628('0x12')]['datos']['id'],'IdMatriz':'','ProblemaGeneral':'','DetalleMat':[{'Problema':'','EjeX':'','EjeY':'','Criterio':''}]};_0x1509e0[_0x1628('0x13')]={'IdProyecto':_0x116e3e[_0x1628('0x12')][_0x1628('0x14')]['id'],'ObjetivoCentral':'','Medios':[{'Medio':'','MediosIndirectos':[{'indirecta':''}]}],'Fines':[{'fin':'','FinesIndirectos':[{'indirecto':''}]}]};_0x1509e0[_0x1628('0x15')]={'IdProyecto':_0x116e3e['proyecto']['datos']['id'],'ObjetivoCentral':'','Medios':[{'Medio':'','MediosIndirectos':[{'indirecta':''}]}],'Fines':[{'fin':'','FinesIndirectos':[{'indirecto':''}]}]};_0x1509e0['DatosProyecto']={'id':'','Tema':'','IdUsuario':'','Etapa':''};_0x1509e0[_0x1628('0x16')]={'IdProyecto':_0x116e3e[_0x1628('0x12')][_0x1628('0x14')]['id'],'ObjetivoCentral':'','Objetivos':{'IdObjetivoGeneral':'','ObjetivoEsp':'','Resultado1':'','MedidaResultado':'','HerramientaResultado':'','ProductoResultado':''}};_0x1509e0[_0x1628('0x17')]=function(){setTimeout(function(){var _0x2ade3f=document[_0x1628('0x18')]('audio-player');_0x2ade3f[_0x1628('0x19')]();},0x3e8);setTimeout(function(){var _0x547d62=document['getElementById'](_0x1628('0x1a'));_0x547d62[_0x1628('0x19')]();},0x3e8);setTimeout(function(){var _0x4a0296=document['getElementById'](_0x1628('0x1b'));_0x4a0296[_0x1628('0x19')]();},0x3e8);};_0x1509e0[_0x1628('0x1c')]=function(){setTimeout(function(){var _0x4a221a=document[_0x1628('0x18')]('audio-player');_0x4a221a[_0x1628('0x19')]();},0x3e8);setTimeout(function(){var _0x5b9453=document[_0x1628('0x18')](_0x1628('0x1a'));_0x5b9453[_0x1628('0x19')]();},0x3e8);setTimeout(function(){var _0x2dce56=document['getElementById']('audio-player2');_0x2dce56[_0x1628('0x19')]();},0x3e8);};var _0x140ddf=window['requestAnimationFrame']||window[_0x1628('0x1d')]||window[_0x1628('0x1e')]||window[_0x1628('0x1f')];var _0x4e503d=document[_0x1628('0x20')](_0x1628('0x21'));var _0x422e7e=document[_0x1628('0x20')]('#mostrarPanel\x20h6');var _0x1df6ca=document[_0x1628('0x20')]('#alerta');var _0x10997d=!![],_0x220200,_0x2682e9,_0xc14403,_0x28bfa9,_0x39d316,_0x32dadf,_0x1ae9ee,_0x8d976d,_0x176689,_0x229cb1,_0x56348d,_0x939458;var _0x13d45a;_0x39d316=document[_0x1628('0x20')](_0x1628('0x22'));_0x32dadf=document[_0x1628('0x20')](_0x1628('0x23'));efectoIndirectoUl=document['querySelector'](_0x1628('0x24'));causaIndirectaUl=document[_0x1628('0x20')]('#causaIndirecta');function _0x36bce6(){efectos=document['querySelectorAll'](_0x1628('0x25'));causas=document['querySelectorAll'](_0x1628('0x26'));efectosIndirectos=document[_0x1628('0x27')](_0x1628('0x28'));causasIndirectas=document[_0x1628('0x27')]('#causaIndirecta\x20li');_0x13d45a=document['querySelectorAll'](_0x1628('0x29'));_0x56348d=document[_0x1628('0x27')](_0x1628('0x2a'));if(efectosIndirectos[_0x1628('0x2b')]==0x1){_0x13d45a[0x0][_0x1628('0x2c')][_0x1628('0x2d')]=0x32+'%';}else{for(var _0xc9050e=0x0;_0xc9050e<_0x13d45a[_0x1628('0x2b')];_0xc9050e++){_0x13d45a[_0xc9050e][_0x1628('0x2c')][_0x1628('0x2d')]=0x64/efectos['length']+'%';}}if(causasIndirectas[_0x1628('0x2b')]==0x1){_0x56348d[0x0][_0x1628('0x2c')][_0x1628('0x2d')]=0x32+'%';}else{for(var _0xc9050e=0x0;_0xc9050e<_0x56348d[_0x1628('0x2b')];_0xc9050e++){_0x56348d[_0xc9050e][_0x1628('0x2c')][_0x1628('0x2d')]=0x64/causas[_0x1628('0x2b')]+'%';}}for(var _0xc9050e=0x0;_0xc9050e<efectos['length'];_0xc9050e++){efectos[_0xc9050e][_0x1628('0x2c')]['width']=0x64/efectos[_0x1628('0x2b')]+'%';}for(var _0xc9050e=0x0;_0xc9050e<causas[_0x1628('0x2b')];_0xc9050e++){causas[_0xc9050e][_0x1628('0x2c')][_0x1628('0x2d')]=0x64/causas[_0x1628('0x2b')]+'%';}if(efectosIndirectos[_0x1628('0x2b')]==0x1){efectosIndirectos[0x0]['style'][_0x1628('0x2d')]=0x32+'%';}else{for(var _0xc9050e=0x0;_0xc9050e<efectosIndirectos['length'];_0xc9050e++){efectosIndirectos[_0xc9050e][_0x1628('0x2c')][_0x1628('0x2d')]=0x64/efectos[_0x1628('0x2b')]+'%';}}if(causasIndirectas[_0x1628('0x2b')]==0x1){causasIndirectas[0x0][_0x1628('0x2c')][_0x1628('0x2d')]=0x32+'%';}else{for(var _0xc9050e=0x0;_0xc9050e<causasIndirectas['length'];_0xc9050e++){causasIndirectas[_0xc9050e][_0x1628('0x2c')][_0x1628('0x2d')]=0x64/causas['length']+'%';}}if(efectos[_0x1628('0x2b')]!=0x0){document[_0x1628('0x20')](_0x1628('0x2e'))[_0x1628('0x2f')](_0x1628('0x30'),_0x1628('0x31')+efectos[_0x1628('0x2b')]+_0x1628('0x32'));}else{}if(causas[_0x1628('0x2b')]!=0x0){document[_0x1628('0x20')](_0x1628('0x33'))['setAttribute'](_0x1628('0x30'),'img/lineaD'+causas['length']+'.png');}else{document[_0x1628('0x20')](_0x1628('0x33'))[_0x1628('0x2f')](_0x1628('0x30'),_0x1628('0x34'));}var _0xca6255=document[_0x1628('0x27')]('#imgEfecto3\x20img');if(_0xca6255[_0x1628('0x2b')]!=0x0){for(var _0xc9050e=0x0;_0xc9050e<_0xca6255['length'];_0xc9050e++){var _0x27bac9=document[_0x1628('0x27')](_0x1628('0x35')+(_0xc9050e+0x1)+')\x20div');if(_0x27bac9['length']!=0x0){_0xca6255[_0xc9050e][_0x1628('0x2f')]('src',_0x1628('0x31')+_0x27bac9[_0x1628('0x2b')]+_0x1628('0x32'));}else{_0xca6255[_0xc9050e][_0x1628('0x2f')](_0x1628('0x30'),'img/sinLinea.png');}}}var _0x4331aa=document[_0x1628('0x27')](_0x1628('0x2a'));if(_0x4331aa[_0x1628('0x2b')]!=0x0){for(var _0xc9050e=0x0;_0xc9050e<_0x4331aa[_0x1628('0x2b')];_0xc9050e++){var _0x27bac9=document[_0x1628('0x27')](_0x1628('0x36')+(_0xc9050e+0x1)+_0x1628('0x37'));if(_0x27bac9[_0x1628('0x2b')]!=0x0){_0x4331aa[_0xc9050e][_0x1628('0x2f')](_0x1628('0x30'),_0x1628('0x38')+_0x27bac9['length']+_0x1628('0x32'));}else{_0x4331aa[_0xc9050e]['setAttribute'](_0x1628('0x30'),_0x1628('0x34'));}}}for(var _0xc9050e=0x0;_0xc9050e<efectos[_0x1628('0x2b')];_0xc9050e++){efectos[_0xc9050e][_0x1628('0x2f')]('id',_0x1628('0x39')+(_0xc9050e+0x1));efectos[_0xc9050e][_0x1628('0x20')](_0x1628('0x3a'))[_0x1628('0x3b')]=_0xc9050e+0x1+'.';_0x13d45a[_0xc9050e][_0x1628('0x2f')]('id','efecto'+(_0xc9050e+0x1)+_0x1628('0x3c'));efectosIndirectos[_0xc9050e]['setAttribute']('id',_0x1628('0x39')+(_0xc9050e+0x1)+_0x1628('0x3d'));}for(var _0xc9050e=0x0;_0xc9050e<causas[_0x1628('0x2b')];_0xc9050e++){causas[_0xc9050e][_0x1628('0x2f')]('id',_0x1628('0x3e')+(_0xc9050e+0x1));causas[_0xc9050e][_0x1628('0x20')](_0x1628('0x3a'))[_0x1628('0x3b')]=_0xc9050e+0x1+'.';_0x56348d[_0xc9050e][_0x1628('0x2f')]('id',_0x1628('0x3e')+(_0xc9050e+0x1)+_0x1628('0x3c'));causasIndirectas[_0xc9050e]['setAttribute']('id','causa'+(_0xc9050e+0x1)+_0x1628('0x3d'));}_0x140ddf(_0x36bce6);}_0x140ddf(_0x36bce6);function _0x6e767a(_0x89bd0b){document[_0x1628('0x20')](_0x1628('0x3f'))[_0x1628('0x2c')]['display']='block';document[_0x1628('0x20')](_0x89bd0b)[_0x1628('0x2c')][_0x1628('0x40')]=_0x1628('0x41');}function _0x32b2ed(){document[_0x1628('0x20')](_0x1628('0x3f'))[_0x1628('0x2c')][_0x1628('0x40')]=_0x1628('0x42');var _0x216f8e=document[_0x1628('0x27')](_0x1628('0x43'));for(var _0x2b7755=0x0;_0x2b7755<_0x216f8e[_0x1628('0x2b')];_0x2b7755++){_0x216f8e[_0x2b7755][_0x1628('0x2c')]['display']=_0x1628('0x42');}}function _0x37799c(_0x1d35ff,_0x4d853a,_0x117e90){_0x1df6ca[_0x1628('0x2c')]['top']='5%';_0x1df6ca[_0x1628('0x20')]('h3')[_0x1628('0x3b')]=_0x1d35ff;_0x1df6ca[_0x1628('0x20')]('p')['innerHTML']=_0x4d853a;setTimeout(function(){_0x1df6ca[_0x1628('0x2c')][_0x1628('0x44')]=_0x1628('0x45');},_0x117e90*0x3e8);}var _0x4423c6=0x0;var _0x432903=0x0;_0x1509e0[_0x1628('0x46')]=[];_0x1509e0[_0x1628('0x47')]=[];_0x1509e0[_0x1628('0x48')]=[];_0x1509e0['FinesIndTotales']=[];_0x1509e0[_0x1628('0x49')]=[];_0x1509e0[_0x1628('0x4a')]=[];_0x1509e0[_0x1628('0x4b')]=_0x116e3e[_0x1628('0x12')][_0x1628('0x14')]['id'];_0x4ef98d[_0x1628('0x4c')](_0x1509e0[_0x1628('0x4b')],function(_0x575f48){if(_0x575f48[_0x1628('0x4d')]){_0x1509e0[_0x1628('0x4e')]=_0x575f48[_0x1628('0x12')];_0x116e3e[_0x1628('0x12')][_0x1628('0x14')][_0x1628('0x4f')]=_0x1509e0['DatosProyecto'][_0x1628('0x4f')];waitingDialog[_0x1628('0x50')]();if(_0x116e3e['proyecto']!=undefined){if(_0x1509e0[_0x1628('0x4e')]['Etapa']<0x4){_0x502995[_0x1628('0x51')](_0x116e3e['proyecto'][_0x1628('0x14')]['id'],function(_0x175c13){if(_0x175c13[_0x1628('0x4d')]){var _0x5d9ea9=_0x175c13[_0x1628('0x52')][_0x1628('0x53')];document[_0x1628('0x20')]('#txtProblema')[_0x1628('0x54')]=_0x5d9ea9;_0x37799c('Consejo.',_0x1628('0x55'),0x5);$[_0x1628('0x56')](_0x175c13[_0x1628('0x52')]['Efectos'],function(_0x3580b1,_0x5ec5bd){_0x176689=document['createElement'](_0x1628('0x3c'));elemento=document[_0x1628('0x57')]('li');elemento2=document[_0x1628('0x57')]('li');bloque=document[_0x1628('0x57')]('div');borrar=document[_0x1628('0x57')](_0x1628('0x58'));txtArea=document[_0x1628('0x57')](_0x1628('0x59'));txtArea['value']=_0x5ec5bd[_0x1628('0x5a')];borrar['innerHTML']=_0x1628('0x5b');bloque[_0x1628('0x2f')](_0x1628('0x5c'),_0x1628('0x5d'));txtArea[_0x1628('0x2f')](_0x1628('0x5c'),_0x1628('0x5e'));txtArea[_0x1628('0x2f')](_0x1628('0x5f'),_0x1628('0x60'));_0x39d316[_0x1628('0x61')](elemento)[_0x1628('0x61')](bloque)[_0x1628('0x61')](borrar);_0x39d316[_0x1628('0x20')](_0x1628('0x62'))[_0x1628('0x61')](txtArea);document[_0x1628('0x20')](_0x1628('0x63'))[_0x1628('0x61')](_0x176689);document['querySelector']('#efectoIndirecto')[_0x1628('0x61')](elemento2);$[_0x1628('0x56')](_0x5ec5bd[_0x1628('0x64')],function(_0x2588f4,_0x20604f){_0x1509e0[_0x1628('0x4a')][_0x1628('0x65')]({'id':_0x3580b1,'EfectoIndirecta':_0x5ec5bd[_0x1628('0x64')][_0x2588f4]});});});var _0xdaabce=0x0;$[_0x1628('0x56')](_0x1509e0[_0x1628('0x4a')],function(_0xded9a5,_0xfc9ea6){_0xdaabce=_0xfc9ea6['id']+0x1;bloque=document[_0x1628('0x57')](_0x1628('0x58'));borrar=document['createElement'](_0x1628('0x66'));txtArea=document[_0x1628('0x57')]('textarea');txtArea[_0x1628('0x54')]=_0xfc9ea6['EfectoIndirecta'];borrar[_0x1628('0x3b')]='<h6\x20class=\x27borrarElemento\x27\x20onclick=\x27borrarElemento2(this)\x27>\x20Borrar</h6>';bloque['setAttribute']('class','bloque2');txtArea[_0x1628('0x2f')](_0x1628('0x5c'),_0x1628('0x67'));txtArea[_0x1628('0x2f')](_0x1628('0x5f'),_0x1628('0x60'));efectoIndirectoUl['querySelector']('li:nth-child('+_0xdaabce+')')[_0x1628('0x61')](bloque)[_0x1628('0x61')](txtArea);efectoIndirectoUl[_0x1628('0x20')](_0x1628('0x68')+_0xdaabce+_0x1628('0x69'))[_0x1628('0x61')](borrar);});$[_0x1628('0x56')](_0x175c13[_0x1628('0x52')][_0x1628('0x6a')],function(_0x50e645,_0x1d1586){_0x176689=document[_0x1628('0x57')](_0x1628('0x3c'));elemento=document[_0x1628('0x57')]('li');elemento2=document[_0x1628('0x57')]('li');bloque=document[_0x1628('0x57')](_0x1628('0x58'));borrar=document[_0x1628('0x57')]('div');txtArea=document[_0x1628('0x57')]('textarea');txtArea[_0x1628('0x54')]=_0x1d1586[_0x1628('0x6b')];borrar['innerHTML']=_0x1628('0x5b');bloque[_0x1628('0x2f')]('class','bloque');txtArea[_0x1628('0x2f')](_0x1628('0x5c'),_0x1628('0x5e'));txtArea[_0x1628('0x2f')](_0x1628('0x5f'),_0x1628('0x60'));_0x32dadf[_0x1628('0x61')](elemento)['appendChild'](bloque)[_0x1628('0x61')](borrar);_0x32dadf[_0x1628('0x20')](_0x1628('0x62'))[_0x1628('0x61')](txtArea);document[_0x1628('0x20')](_0x1628('0x6c'))[_0x1628('0x61')](_0x176689);document[_0x1628('0x20')]('#causaIndirecta')[_0x1628('0x61')](elemento2);$[_0x1628('0x56')](_0x1d1586[_0x1628('0x6d')],function(_0x3f9eac,_0x8cfe45){_0x1509e0['CausasIndTotales'][_0x1628('0x65')]({'id':_0x50e645,'CausaIndirecta':_0x1d1586[_0x1628('0x6d')][_0x3f9eac]});});});var _0x52a2cb=0x0;$[_0x1628('0x56')](_0x1509e0[_0x1628('0x49')],function(_0x81ac39,_0x55dbe7){_0x52a2cb=_0x55dbe7['id']+0x1;bloque=document[_0x1628('0x57')](_0x1628('0x58'));borrar=document['createElement'](_0x1628('0x66'));txtArea=document[_0x1628('0x57')](_0x1628('0x59'));txtArea[_0x1628('0x54')]=_0x55dbe7[_0x1628('0x6d')];borrar[_0x1628('0x3b')]=_0x1628('0x6e');bloque[_0x1628('0x2f')](_0x1628('0x5c'),_0x1628('0x6f'));txtArea[_0x1628('0x2f')](_0x1628('0x5c'),_0x1628('0x67'));txtArea['setAttribute'](_0x1628('0x5f'),'140');causaIndirectaUl[_0x1628('0x20')]('li:nth-child('+_0x52a2cb+')')[_0x1628('0x61')](bloque)[_0x1628('0x61')](txtArea);causaIndirectaUl[_0x1628('0x20')]('li:nth-child('+_0x52a2cb+_0x1628('0x69'))['appendChild'](borrar);});}waitingDialog[_0x1628('0xb')]();$('#TabObjetivos')['attr'](_0x1628('0xe'),_0x1628('0xe'));});}else{_0x502995[_0x1628('0x70')](_0x116e3e[_0x1628('0x12')][_0x1628('0x14')]['id'],function(_0x39bc40){if(_0x39bc40[_0x1628('0x4d')]){var _0x9c6cf5=_0x39bc40[_0x1628('0x52')][_0x1628('0x71')];document[_0x1628('0x20')](_0x1628('0x72'))[_0x1628('0x54')]=_0x9c6cf5;_0x37799c(_0x1628('0x73'),_0x1628('0x55'),0x5);$['each'](_0x39bc40[_0x1628('0x52')][_0x1628('0x74')],function(_0x3cbaf8,_0x5df526){_0x176689=document[_0x1628('0x57')](_0x1628('0x3c'));elemento=document[_0x1628('0x57')]('li');elemento2=document[_0x1628('0x57')]('li');bloque=document[_0x1628('0x57')](_0x1628('0x58'));borrar=document[_0x1628('0x57')]('div');txtArea=document[_0x1628('0x57')](_0x1628('0x59'));txtArea['value']=_0x5df526[_0x1628('0x75')];borrar[_0x1628('0x3b')]=_0x1628('0x5b');bloque[_0x1628('0x2f')](_0x1628('0x5c'),_0x1628('0x5d'));txtArea['setAttribute'](_0x1628('0x5c'),_0x1628('0x5e'));txtArea[_0x1628('0x2f')](_0x1628('0x5f'),'140');_0x39d316[_0x1628('0x61')](elemento)[_0x1628('0x61')](bloque)['appendChild'](borrar);_0x39d316[_0x1628('0x20')](_0x1628('0x62'))[_0x1628('0x61')](txtArea);document[_0x1628('0x20')](_0x1628('0x63'))['appendChild'](_0x176689);document[_0x1628('0x20')](_0x1628('0x24'))[_0x1628('0x61')](elemento2);$['each'](_0x5df526['FinesIndirectos'],function(_0x3c53e1,_0x4bdff2){_0x1509e0[_0x1628('0x76')][_0x1628('0x65')]({'id':_0x3cbaf8,'FinesIndirectos':_0x5df526[_0x1628('0x77')][_0x3c53e1]});});});var _0xdf6581=0x0;$[_0x1628('0x56')](_0x1509e0[_0x1628('0x76')],function(_0x49b189,_0x4175bd){_0xdf6581=_0x4175bd['id']+0x1;bloque=document['createElement'](_0x1628('0x58'));borrar=document[_0x1628('0x57')](_0x1628('0x66'));txtArea=document[_0x1628('0x57')](_0x1628('0x59'));txtArea[_0x1628('0x54')]=_0x4175bd[_0x1628('0x77')];borrar[_0x1628('0x3b')]=_0x1628('0x6e');bloque[_0x1628('0x2f')](_0x1628('0x5c'),_0x1628('0x6f'));txtArea[_0x1628('0x2f')](_0x1628('0x5c'),_0x1628('0x67'));txtArea[_0x1628('0x2f')](_0x1628('0x5f'),_0x1628('0x60'));efectoIndirectoUl['querySelector'](_0x1628('0x68')+_0xdf6581+')')[_0x1628('0x61')](bloque)['appendChild'](txtArea);efectoIndirectoUl[_0x1628('0x20')](_0x1628('0x68')+_0xdf6581+_0x1628('0x69'))[_0x1628('0x61')](borrar);});$[_0x1628('0x56')](_0x39bc40[_0x1628('0x52')]['Medios'],function(_0x3a684f,_0x21adbf){_0x176689=document[_0x1628('0x57')]('img');elemento=document[_0x1628('0x57')]('li');elemento2=document[_0x1628('0x57')]('li');bloque=document['createElement'](_0x1628('0x58'));borrar=document[_0x1628('0x57')](_0x1628('0x58'));txtArea=document[_0x1628('0x57')](_0x1628('0x59'));txtArea['value']=_0x21adbf['Medio'];borrar[_0x1628('0x3b')]='<span></span><h6\x20class=\x27borrarElemento\x27\x20onclick=\x27borrarElemento(this)\x27>\x20Borrar</h6>';bloque[_0x1628('0x2f')](_0x1628('0x5c'),'bloque');txtArea[_0x1628('0x2f')](_0x1628('0x5c'),_0x1628('0x5e'));txtArea[_0x1628('0x2f')](_0x1628('0x5f'),_0x1628('0x60'));_0x32dadf['appendChild'](elemento)[_0x1628('0x61')](bloque)[_0x1628('0x61')](borrar);_0x32dadf[_0x1628('0x20')](_0x1628('0x62'))[_0x1628('0x61')](txtArea);document[_0x1628('0x20')](_0x1628('0x6c'))[_0x1628('0x61')](_0x176689);document['querySelector']('#causaIndirecta')[_0x1628('0x61')](elemento2);$['each'](_0x21adbf[_0x1628('0x78')],function(_0x801e09,_0x3937fa){_0x1509e0[_0x1628('0x48')]['push']({'id':_0x3a684f,'MediosIndirectos':_0x21adbf[_0x1628('0x78')][_0x801e09]});});});var _0x16c2a6=0x0;$[_0x1628('0x56')](_0x1509e0[_0x1628('0x48')],function(_0x1c2023,_0x18f0d0){_0x16c2a6=_0x18f0d0['id']+0x1;bloque=document[_0x1628('0x57')](_0x1628('0x58'));borrar=document[_0x1628('0x57')](_0x1628('0x66'));txtArea=document[_0x1628('0x57')](_0x1628('0x59'));txtArea['value']=_0x18f0d0[_0x1628('0x78')];borrar[_0x1628('0x3b')]='<h6\x20class=\x27borrarElemento\x27\x20onclick=\x27borrarElemento2(this)\x27>\x20Borrar</h6>';bloque[_0x1628('0x2f')](_0x1628('0x5c'),_0x1628('0x6f'));txtArea[_0x1628('0x2f')](_0x1628('0x5c'),_0x1628('0x67'));txtArea[_0x1628('0x2f')](_0x1628('0x5f'),'140');causaIndirectaUl[_0x1628('0x20')](_0x1628('0x68')+_0x16c2a6+')')[_0x1628('0x61')](bloque)[_0x1628('0x61')](txtArea);causaIndirectaUl[_0x1628('0x20')](_0x1628('0x68')+_0x16c2a6+_0x1628('0x69'))[_0x1628('0x61')](borrar);});}$('#botonSiguienteArbol')[_0x1628('0x50')]();waitingDialog['hide']();});}}}});_0x1509e0[_0x1628('0x79')]=function(){if(_0x10997d){_0x4e503d[_0x1628('0x2c')]['top']='-100%';_0x422e7e[_0x1628('0x3b')]='Mostrar';_0x10997d=![];}else{_0x4e503d[_0x1628('0x2c')][_0x1628('0x44')]=_0x1628('0x7a');_0x422e7e[_0x1628('0x3b')]=_0x1628('0x7b');_0x10997d=!![];}};_0x1509e0[_0x1628('0x7c')]=function(){_0xc14403=document[_0x1628('0x20')](_0x1628('0x7d'))[_0x1628('0x54')];document[_0x1628('0x20')](_0x1628('0x7e'))['innerHTML']=_0x1628('0x7f');if(_0xc14403==_0x1628('0x80')){document['querySelector'](_0x1628('0x81'))[_0x1628('0x2c')]['display']=_0x1628('0x41');document[_0x1628('0x20')](_0x1628('0x82'))['innerHTML']=_0x1628('0x39');for(var _0x455f2c=0x0;_0x455f2c<efectos[_0x1628('0x2b')];_0x455f2c++){var _0x54c5c5=document['createElement']('option');_0x54c5c5[_0x1628('0x3b')]=_0x455f2c+0x1;_0x54c5c5[_0x1628('0x2f')](_0x1628('0x54'),_0x455f2c+0x1);document[_0x1628('0x20')](_0x1628('0x7e'))[_0x1628('0x61')](_0x54c5c5);_0x37799c(_0x1628('0x73'),_0x1628('0x83'),0x3);}}else if(_0xc14403==_0x1628('0x84')){document[_0x1628('0x20')](_0x1628('0x81'))[_0x1628('0x2c')][_0x1628('0x40')]='block';document[_0x1628('0x20')](_0x1628('0x82'))[_0x1628('0x3b')]='causa';for(var _0x455f2c=0x0;_0x455f2c<causas[_0x1628('0x2b')];_0x455f2c++){var _0x54c5c5=document['createElement']('option');_0x54c5c5[_0x1628('0x3b')]=_0x455f2c+0x1;_0x54c5c5[_0x1628('0x2f')]('value',_0x455f2c+0x1);document[_0x1628('0x20')](_0x1628('0x7e'))[_0x1628('0x61')](_0x54c5c5);_0x37799c(_0x1628('0x73'),_0x1628('0x85'),0x3);}}else{document[_0x1628('0x20')](_0x1628('0x81'))['style'][_0x1628('0x40')]='none';}};_0x1509e0[_0x1628('0x86')]=function(){_0x1ae9ee=document[_0x1628('0x20')](_0x1628('0x7e'))[_0x1628('0x54')];var _0x5c2df2,_0x4b4c6c,_0x309b19;if(_0xc14403===_0x1628('0x87')||_0xc14403===undefined){_0x37799c(_0x1628('0x88'),_0x1628('0x89'),0x3);}if(_0x1ae9ee==_0x1628('0x87')&&_0xc14403==_0x1628('0x80')||_0xc14403=='causaIndirecta'){_0x37799c('Recuerda.',_0x1628('0x8a'),0x3);}if(_0xc14403==_0x1628('0x39')&&efectos[_0x1628('0x2b')]<0x5){_0x176689=document[_0x1628('0x57')](_0x1628('0x3c'));_0x5c2df2=document[_0x1628('0x57')]('li');_0x309b19=document[_0x1628('0x57')]('li');bloque=document['createElement'](_0x1628('0x58'));borrar=document[_0x1628('0x57')](_0x1628('0x58'));_0x4b4c6c=document[_0x1628('0x57')](_0x1628('0x59'));_0x4b4c6c[_0x1628('0x54')]='';borrar[_0x1628('0x3b')]='<span></span><h6\x20class=\x27borrarElemento\x27\x20onclick=\x27borrarElemento(this)\x27>\x20Borrar</h6>';bloque[_0x1628('0x2f')](_0x1628('0x5c'),_0x1628('0x5d'));_0x4b4c6c[_0x1628('0x2f')](_0x1628('0x5c'),_0x1628('0x5e'));_0x4b4c6c[_0x1628('0x2f')](_0x1628('0x5f'),_0x1628('0x60'));_0x4b4c6c[_0x1628('0x2f')]('style',_0x1628('0x8b'));_0x39d316['appendChild'](_0x5c2df2)[_0x1628('0x61')](bloque)[_0x1628('0x61')](borrar);_0x39d316[_0x1628('0x20')]('li:last-child\x20div:last-child')[_0x1628('0x61')](_0x4b4c6c);document[_0x1628('0x20')](_0x1628('0x63'))[_0x1628('0x61')](_0x176689);document['querySelector']('#efectoIndirecto')[_0x1628('0x61')](_0x309b19);}else if(_0xc14403==_0x1628('0x39')&&efectos[_0x1628('0x2b')]>=0x5){_0x37799c(_0x1628('0x88'),_0x1628('0x8c'),0x2);}if(_0xc14403=='causa'&&causas[_0x1628('0x2b')]<0x5){_0x176689=document['createElement'](_0x1628('0x3c'));_0x5c2df2=document['createElement']('li');_0x309b19=document[_0x1628('0x57')]('li');bloque=document[_0x1628('0x57')](_0x1628('0x58'));borrar=document[_0x1628('0x57')](_0x1628('0x58'));_0x4b4c6c=document['createElement'](_0x1628('0x59'));borrar[_0x1628('0x3b')]=_0x1628('0x5b');bloque[_0x1628('0x2f')]('class','bloque');_0x4b4c6c[_0x1628('0x2f')](_0x1628('0x5c'),_0x1628('0x5e'));_0x4b4c6c[_0x1628('0x2f')](_0x1628('0x5f'),_0x1628('0x60'));_0x4b4c6c[_0x1628('0x2f')](_0x1628('0x2c'),_0x1628('0x8b'));_0x32dadf[_0x1628('0x61')](_0x5c2df2)[_0x1628('0x61')](bloque)['appendChild'](borrar);_0x32dadf[_0x1628('0x20')](_0x1628('0x62'))['appendChild'](_0x4b4c6c);document[_0x1628('0x20')](_0x1628('0x6c'))[_0x1628('0x61')](_0x176689);document[_0x1628('0x20')](_0x1628('0x8d'))[_0x1628('0x61')](_0x309b19);}else if(_0xc14403=='causa'&&causas[_0x1628('0x2b')]>=0x5){_0x37799c(_0x1628('0x88'),'Ya\x20tienes\x205\x20medios.',0x2);}if(_0x1ae9ee!=_0x1628('0x87')){if(_0xc14403==_0x1628('0x80')&&document[_0x1628('0x27')](_0x1628('0x35')+_0x1ae9ee+_0x1628('0x37'))[_0x1628('0x2b')]<0x3){bloque=document[_0x1628('0x57')](_0x1628('0x58'));borrar=document[_0x1628('0x57')](_0x1628('0x66'));_0x4b4c6c=document[_0x1628('0x57')](_0x1628('0x59'));borrar[_0x1628('0x3b')]=_0x1628('0x6e');bloque['setAttribute'](_0x1628('0x5c'),'bloque2');_0x4b4c6c[_0x1628('0x2f')](_0x1628('0x5c'),_0x1628('0x67'));_0x4b4c6c[_0x1628('0x2f')](_0x1628('0x5f'),'140');efectoIndirectoUl['querySelector'](_0x1628('0x68')+_0x1ae9ee+')')[_0x1628('0x61')](bloque)[_0x1628('0x61')](_0x4b4c6c);efectoIndirectoUl[_0x1628('0x20')]('li:nth-child('+_0x1ae9ee+_0x1628('0x69'))[_0x1628('0x61')](borrar);}else if(document[_0x1628('0x27')](_0x1628('0x35')+_0x1ae9ee+')\x20div')['length']>=0x3){_0x37799c(_0x1628('0x88'),_0x1628('0x8e'),0x2);}if(_0xc14403=='causaIndirecta'&&document[_0x1628('0x27')]('#causaIndirecta\x20li:nth-child('+_0x1ae9ee+')\x20div')[_0x1628('0x2b')]<0x3){console[_0x1628('0x8f')](_0x1ae9ee);bloque=document[_0x1628('0x57')](_0x1628('0x58'));borrar=document['createElement'](_0x1628('0x66'));_0x4b4c6c=document['createElement'](_0x1628('0x59'));borrar[_0x1628('0x3b')]='<h6\x20class=\x27borrarElemento\x27\x20onclick=\x27borrarElemento2(this)\x27>\x20Borrar</h6>';bloque[_0x1628('0x2f')]('class',_0x1628('0x6f'));_0x4b4c6c['setAttribute']('class',_0x1628('0x67'));_0x4b4c6c[_0x1628('0x2f')](_0x1628('0x5f'),_0x1628('0x60'));causaIndirectaUl[_0x1628('0x20')]('li:nth-child('+_0x1ae9ee+')')[_0x1628('0x61')](bloque)[_0x1628('0x61')](_0x4b4c6c);causaIndirectaUl[_0x1628('0x20')]('li:nth-child('+_0x1ae9ee+_0x1628('0x69'))[_0x1628('0x61')](borrar);}else if(document[_0x1628('0x27')](_0x1628('0x36')+_0x1ae9ee+')\x20div')['length']>=0x3){_0x37799c(_0x1628('0x88'),_0x1628('0x90'),0x2);}}};_0x1509e0['guardar']=function(){var _0x4a51eb=document[_0x1628('0x20')](_0x1628('0x72'))[_0x1628('0x54')];var _0x4be582=[];var _0x4a25a1=[];var _0x4285d1=[];var _0x1e04e4=[];for(var _0x3cca18=0x0;_0x3cca18<efectos[_0x1628('0x2b')];_0x3cca18++){var _0xd22f7e=document[_0x1628('0x20')](_0x1628('0x91')+(_0x3cca18+0x1)+_0x1628('0x92'))[_0x1628('0x54')];if(_0xd22f7e!=''){_0x4be582[_0x3cca18]=document[_0x1628('0x20')](_0x1628('0x91')+(_0x3cca18+0x1)+_0x1628('0x92'))['value'];}else{alertify['success'](_0x1628('0x93'));return;}}for(var _0x3cca18=0x0;_0x3cca18<causas[_0x1628('0x2b')];_0x3cca18++){var _0x459042=_0x4a25a1[_0x3cca18]=document['querySelector'](_0x1628('0x94')+(_0x3cca18+0x1)+_0x1628('0x92'))['value'];if(_0x459042!=''){_0x4a25a1[_0x3cca18]=document[_0x1628('0x20')](_0x1628('0x94')+(_0x3cca18+0x1)+_0x1628('0x92'))['value'];}else{alertify[_0x1628('0x4d')]('Ups!\x20tienes\x20algún\x20medio\x20vacio');return;}}for(var _0x3cca18=0x0;_0x3cca18<efectos['length'];_0x3cca18++){var _0x28e531=[];for(var _0x1d6fd5=0x0;_0x1d6fd5<document['querySelectorAll'](_0x1628('0x22')+(_0x3cca18+0x1)+_0x1628('0x95'))['length'];_0x1d6fd5++){var _0x1191db=_0x28e531[_0x1d6fd5]=document[_0x1628('0x20')]('#efecto'+(_0x3cca18+0x1)+_0x1628('0x96')+(_0x1d6fd5+0x1)+_0x1628('0x92'))[_0x1628('0x54')];if(_0x1191db!=''){_0x28e531[_0x1d6fd5]=document[_0x1628('0x20')](_0x1628('0x22')+(_0x3cca18+0x1)+_0x1628('0x96')+(_0x1d6fd5+0x1)+_0x1628('0x92'))[_0x1628('0x54')];}else{alertify['success'](_0x1628('0x97'));return;}}_0x4285d1[_0x1628('0x65')](_0x28e531);}for(var _0x3cca18=0x0;_0x3cca18<causas[_0x1628('0x2b')];_0x3cca18++){var _0x28e531=[];for(var _0x1d6fd5=0x0;_0x1d6fd5<document[_0x1628('0x27')](_0x1628('0x23')+(_0x3cca18+0x1)+_0x1628('0x95'))['length'];_0x1d6fd5++){var _0x39ae0a=_0x28e531[_0x1d6fd5]=document[_0x1628('0x20')](_0x1628('0x23')+(_0x3cca18+0x1)+'indirecto\x20div:nth-child('+(_0x1d6fd5+0x1)+')\x20textarea')[_0x1628('0x54')];if(_0x39ae0a!=''){_0x28e531[_0x1d6fd5]=document[_0x1628('0x20')](_0x1628('0x23')+(_0x3cca18+0x1)+_0x1628('0x96')+(_0x1d6fd5+0x1)+_0x1628('0x92'))[_0x1628('0x54')];}else{alertify[_0x1628('0x4d')](_0x1628('0x98'));return;}}_0x1e04e4[_0x1628('0x65')](_0x28e531);}_0x1509e0[_0x1628('0x13')]['ObjetivoCentral']=_0x4a51eb;$[_0x1628('0x56')](_0x4a25a1,function(_0x3755ef,_0x52631f){if(_0x52631f!=''){_0x1509e0[_0x1628('0x13')][_0x1628('0x99')]['push']({'Medio':_0x52631f,'MediosIndirectos':_0x1e04e4[_0x3755ef]});}});$[_0x1628('0x56')](_0x4be582,function(_0x121108,_0x1f0db5){_0x1509e0[_0x1628('0x13')][_0x1628('0x74')]['push']({'fin':_0x1f0db5,'FinesIndirectos':_0x4285d1[_0x121108]});});waitingDialog[_0x1628('0x50')]();$(_0x1628('0x9a'))[_0x1628('0xb')]();$(_0x1628('0x9b'))[_0x1628('0xb')]();$(_0x1628('0x9c'))[_0x1628('0xb')]();setTimeout(function(){html2canvas($(_0x1628('0x9d')),{'onrendered':function(_0xab5e77){theCanvas=_0xab5e77;var _0x5dc12c=theCanvas[_0x1628('0x9e')]();var _0x413fc3=_0x5dc12c['replace'](/^data:image\/png/,_0x1628('0x9f'));_0x1509e0[_0x1628('0x13')]['imagen']=_0x5dc12c;console[_0x1628('0x8f')](_0x1509e0[_0x1628('0x13')][_0x1628('0xa0')]);_0x502995[_0x1628('0xa1')](_0x1509e0[_0x1628('0x13')],function(_0x24922c){if(_0x24922c[_0x1628('0x4d')]){waitingDialog[_0x1628('0xb')]();swal({'text':_0x1628('0xa2'),'confirmButtonColor':'#238276','width':_0x1628('0xa3')});$(_0x1628('0xa4'))[_0x1628('0xd')](_0x1628('0xe'),![]);_0x1509e0[_0x1628('0xa5')]();$(_0x1628('0x9a'))[_0x1628('0x50')]();}});}});},0x1f4);};_0x1509e0[_0x1628('0xa6')]=function(){if(_0x1509e0[_0x1628('0xa7')][_0x1628('0x2b')]<0x5){_0x1509e0['medios1']['push']({'IdObjetivoEsp':0x0,'medio':''});}};_0x1509e0['EliminarObjetivos']=function(){if(_0x1509e0[_0x1628('0xa7')][_0x1628('0x2b')]>0x1){_0x1509e0['medios1'][_0x1628('0xa8')](_0x1509e0[_0x1628('0xa7')]['length']-0x1,0x1);}};var _0x4c03aa=0x0;var _0x83a915=[];_0x1509e0[_0x1628('0xa7')]=[];_0x1509e0[_0x1628('0xa5')]=function(){$(_0x1628('0xa9'))[_0x1628('0xb')]();$(_0x1628('0x10'))['hide']();$(_0x1628('0xf'))[_0x1628('0x50')]();waitingDialog[_0x1628('0x50')]();$(_0x1628('0xc'))[_0x1628('0xd')]('disabled',![]);$(_0x1628('0xaa'))['css'](_0x1628('0x40'),'none');$(_0x1628('0xab'))[_0x1628('0xac')](_0x1628('0x40'),'none');$(_0x1628('0xad'))[_0x1628('0xb')]();var _0x309772=document[_0x1628('0x18')]('audio-player');_0x309772[_0x1628('0x19')]();var _0x528280=document['getElementById'](_0x1628('0x1b'));_0x528280['pause']();if(_0x4c03aa==0x0){if(_0x116e3e[_0x1628('0x12')][_0x1628('0x14')]['Etapa']<0x5){_0x502995[_0x1628('0x70')](_0x116e3e[_0x1628('0x12')][_0x1628('0x14')]['id'],function(_0x56393d){if(_0x56393d[_0x1628('0x4d')]){_0x1509e0[_0x1628('0x15')]=_0x56393d['ArbolFinal'];_0x1509e0[_0x1628('0xae')]=_0x56393d[_0x1628('0x52')]['Medios'];if(_0x1509e0[_0x1628('0xa7')][_0x1628('0x2b')]==0x0){$['each'](_0x56393d[_0x1628('0xaf')],function(_0xaa3969,_0x3efd1e){_0x1509e0[_0x1628('0xa7')][_0x1628('0x65')]({'medio':_0x3efd1e});});}}});waitingDialog[_0x1628('0xb')]();}else{_0x502995[_0x1628('0xb0')](_0x116e3e[_0x1628('0x12')][_0x1628('0x14')]['id'],function(_0x2bfbcd){if(_0x2bfbcd[_0x1628('0x4d')]){_0x1509e0[_0x1628('0x15')][_0x1628('0x71')]=_0x2bfbcd[_0x1628('0xb1')][_0x1628('0x71')];$(_0x1628('0x9'))[_0x1628('0x50')]();$('#botonQuitar')[_0x1628('0x50')]();_0x1509e0[_0x1628('0xa7')]=[];$[_0x1628('0x56')](_0x2bfbcd[_0x1628('0xaf')],function(_0x31fadc,_0x18a338){_0x1509e0[_0x1628('0xa7')][_0x1628('0x65')]({'IdObjetivoEsp':_0x18a338[_0x1628('0xb2')],'medio':_0x18a338[_0x1628('0xb3')]});});}waitingDialog[_0x1628('0xb')]();});$(_0x1628('0xb4'))[_0x1628('0xb')]();$(_0x1628('0xb5'))[_0x1628('0xac')]({'margin-left':_0x1628('0xb6')});$(_0x1628('0xb7'))['css']({'margin-left':_0x1628('0xb8')});}}waitingDialog[_0x1628('0xb')]();_0x4c03aa++;};_0x1509e0['ocultarObjetivos']=function(){$(_0x1628('0xb9'))[_0x1628('0xb')]();$(_0x1628('0xa9'))[_0x1628('0x50')]();$(_0x1628('0xf'))[_0x1628('0xb')]();$(_0x1628('0x10'))[_0x1628('0xb')]();$(_0x1628('0xad'))[_0x1628('0xb')]();var _0x52c8a1=document[_0x1628('0x18')](_0x1628('0x1a'));_0x52c8a1[_0x1628('0x19')]();var _0x584af2=document['getElementById']('audio-player2');_0x584af2[_0x1628('0x19')]();};_0x1509e0[_0x1628('0xba')]=function(){if(_0x116e3e[_0x1628('0x12')][_0x1628('0x14')]['Etapa']<0x5){_0x502995[_0x1628('0x70')](_0x116e3e[_0x1628('0x12')][_0x1628('0x14')]['id'],function(_0x22b2e7){if(_0x22b2e7[_0x1628('0x4d')]){_0x1509e0['mediosIndirectos']=[];$[_0x1628('0x56')](_0x1509e0[_0x1628('0xae')],function(_0x5845dd,_0x31029c){for(var _0xff295c=0x0;_0xff295c<0x3;_0xff295c++){if(_0x31029c[_0x1628('0x78')][_0xff295c]!=''){_0x1509e0['mediosIndirectos'][_0x1628('0x65')]({'idMedio':_0x5845dd,'medioIndirectos':_0x31029c[_0x1628('0x78')][_0xff295c],'Resultado':'','Herramienta':'','Producto':''});}else{_0x1509e0[_0x1628('0xbb')]['push']({'idMedio':_0x31029c[_0x1628('0xbc')],'medioIndirectos':'','Resultado':'','Herramienta':'','Producto':''});}}});$('#Btnguardar')[_0x1628('0xac')]({'display':_0x1628('0x41')});}});waitingDialog[_0x1628('0xb')]();}else{var _0x486e3a=0x0;$[_0x1628('0x56')](_0x1509e0[_0x1628('0xa7')],function(_0x56e78f,_0x46a3ca){if(_0x46a3ca[_0x1628('0xbd')]==''){_0x486e3a++;}});if(_0x486e3a>0x0){alertify[_0x1628('0x4d')]('Ups!\x20Debes\x20completar\x20todos\x20los\x20objetivos\x20específicos');return![];}else{_0x502995['ConsultarDatosObjetivos'](_0x116e3e['proyecto'][_0x1628('0x14')]['id'],function(_0x2c8baa){if(_0x2c8baa[_0x1628('0x4d')]){_0x1509e0['prueba']=_0x2c8baa['DatosObjetivos'][_0x1628('0x15')];$(_0x1628('0x9'))[_0x1628('0x50')]();$(_0x1628('0xa'))[_0x1628('0x50')]();_0x1509e0['medios']=[];_0x1509e0[_0x1628('0xbb')]=[];$[_0x1628('0x56')](_0x1509e0[_0x1628('0xa7')],function(_0x10e511,_0x41faea){_0x1509e0[_0x1628('0xae')]['push']({'Medio':_0x41faea[_0x1628('0xb3')],'MediosIndirectos':_0x10e511});var _0x296357=0x0;var _0x37ddfa=0x0;$['each'](_0x1509e0[_0x1628('0xbe')],function(_0x88f876,_0x590aa3){if(_0x296357<=0x3){if(_0x41faea[_0x1628('0xb2')]==_0x590aa3[_0x1628('0xb2')]){_0x1509e0['mediosIndirectos'][_0x1628('0x65')]({'idMedio':_0x10e511,'medioIndirectos':_0x590aa3['Resultado1'],'Resultado':_0x590aa3['MedidaResultado'],'Herramienta':_0x590aa3[_0x1628('0xbf')],'Producto':_0x590aa3[_0x1628('0xc0')]});_0x296357++;}else{}}});_0x37ddfa=0x3-_0x296357;if(_0x37ddfa>=0x0){for(var _0x2c437e=0x1;_0x2c437e<=_0x37ddfa;_0x2c437e++){_0x1509e0[_0x1628('0xbb')][_0x1628('0x65')]({'idMedio':_0x10e511,'medioIndirectos':'','Resultado':'','Herramienta':'','Producto':''});}}else{for(var _0x2c437e=0x1;_0x2c437e<=0x3;_0x2c437e++){_0x1509e0[_0x1628('0xbb')][_0x1628('0x65')]({'idMedio':_0x10e511,'medioIndirectos':'','Resultado':'','Herramienta':'','Producto':''});}}_0x296357=0x0;});console[_0x1628('0x8f')](_0x1509e0[_0x1628('0xbe')]);console[_0x1628('0x8f')](_0x2c8baa[_0x1628('0xaf')]);waitingDialog[_0x1628('0xb')]();}});}waitingDialog['hide']();}$(_0x1628('0xa9'))[_0x1628('0xb')]();$(_0x1628('0xf'))[_0x1628('0xb')]();$(_0x1628('0x10'))['show']();$(_0x1628('0xad'))['hide']();$(_0x1628('0xb9'))[_0x1628('0xb')]();var _0x414352=document[_0x1628('0x18')](_0x1628('0xc1'));_0x414352[_0x1628('0x19')]();var _0x412c5c=document[_0x1628('0x18')](_0x1628('0x1a'));_0x412c5c[_0x1628('0x19')]();};_0x1509e0[_0x1628('0xc2')]=function(){var _0x593429=$('#verbo')[_0x1628('0xc3')]();if($(_0x1628('0xb4'))['is'](_0x1628('0xc4'))){_0x1509e0['ObjetivosFinales']['ObjetivoCentral']=_0x593429+'\x20'+_0x1509e0[_0x1628('0x15')][_0x1628('0x71')];}else{_0x1509e0[_0x1628('0x16')][_0x1628('0x71')]=$(_0x1628('0xb5'))[_0x1628('0xc3')]();}_0x1509e0[_0x1628('0xc5')]=[];$[_0x1628('0x56')](_0x1509e0[_0x1628('0xbb')],function(_0x57faaf,_0x5e4eff){if(_0x57faaf<0x3){var _0x4db570=0x0;}if(_0x57faaf>=0x3&&_0x57faaf<0x6){var _0x4db570=0x1;}if(_0x57faaf>=0x6&&_0x57faaf<0x9){var _0x4db570=0x2;}if(_0x57faaf>=0x9&&_0x57faaf<0xc){var _0x4db570=0x3;}if(_0x57faaf>=0xc){var _0x4db570=0x4;}if(_0x5e4eff['medioIndirectos']!=undefined){_0x1509e0[_0x1628('0xc5')][_0x1628('0x65')]({'ObjetivoEsp':_0x1509e0[_0x1628('0xa7')][_0x4db570][_0x1628('0xbd')][_0x1628('0xc6')](),'Resultado1':_0x5e4eff[_0x1628('0xc7')],'MedidaResultado':_0x5e4eff[_0x1628('0xc8')],'HerramientaResultado':_0x5e4eff[_0x1628('0xc9')],'ProductoResultado':_0x5e4eff[_0x1628('0xca')]});}else{_0x1509e0['ObjetivosFinales1'][_0x1628('0x65')]({'ObjetivoEsp':_0x1509e0[_0x1628('0xa7')][_0x4db570][_0x1628('0xbd')][_0x1628('0xc6')](),'Resultado1':'','MedidaResultado':_0x5e4eff[_0x1628('0xc8')],'HerramientaResultado':_0x5e4eff[_0x1628('0xc9')],'ProductoResultado':_0x5e4eff[_0x1628('0xca')]});}});_0x1509e0[_0x1628('0x16')]['Objetivos']=_0x1509e0[_0x1628('0xc5')];var _0x599526=0x0;var _0x20ac22=_0x1509e0[_0x1628('0x16')][_0x1628('0x15')];$['each'](_0x20ac22,function(_0x3f379e,_0x1d78c7){if(_0x1d78c7[_0x1628('0xcb')]!=''&&(_0x1d78c7[_0x1628('0xcc')]==''||_0x1d78c7[_0x1628('0xbf')]==''||_0x1d78c7[_0x1628('0xc0')]=='')){_0x599526++;}});if(_0x599526==0x0){waitingDialog[_0x1628('0x50')]();_0x502995['GuardarObjetivos'](_0x1509e0[_0x1628('0x16')],function(_0x4850d6){if(_0x4850d6[_0x1628('0x4d')]){waitingDialog[_0x1628('0xb')]();swal({'text':_0x1628('0xa2'),'confirmButtonColor':_0x1628('0xcd'),'width':_0x1628('0xa3')});_0x20c4c8[_0x1628('0xce')]('/Menu');}});}else{alertify['success']('Ups!\x20Debes\x20completar\x20los\x20campos\x20de\x20cada\x20resultado\x20esperado.');}console[_0x1628('0x8f')](_0x1509e0[_0x1628('0x16')]);};_0x1509e0[_0x1628('0xcf')]=function(){_0x20c4c8[_0x1628('0xce')](_0x1628('0xd0'));$(_0x1628('0xad'))['hide']();};_0x1509e0[_0x1628('0xd1')]=function(){_0x1509e0[_0x1628('0xd2')]=[];var _0x1f53e5=$(_0x1628('0xb4'))[_0x1628('0xc3')]();if($(_0x1628('0xb4'))['is'](_0x1628('0xc4'))){_0x1509e0[_0x1628('0x16')][_0x1628('0x71')]=_0x1f53e5+'\x20'+_0x1509e0[_0x1628('0x15')]['ObjetivoCentral'];}else{_0x1509e0[_0x1628('0x16')][_0x1628('0x71')]=_0x1509e0[_0x1628('0x15')][_0x1628('0x71')];}$[_0x1628('0x56')](_0x1509e0[_0x1628('0xa7')],function(_0xbd94d8,_0x468fd1){if(_0x468fd1[_0x1628('0xb2')]!=0x0){_0x1509e0[_0x1628('0xd2')]['push']({'IdObjetivoEsp':_0x468fd1['IdObjetivoEsp'],'ObjetivoEsp':_0x468fd1[_0x1628('0xbd')],'IdProyecto':_0x116e3e[_0x1628('0x12')][_0x1628('0x14')]['id'],'ObjetivoCentral':_0x1509e0[_0x1628('0x15')]['ObjetivoCentral']});}else{_0x1509e0[_0x1628('0xd2')][_0x1628('0x65')]({'IdObjetivoEsp':0x0,'ObjetivoEsp':_0x468fd1['medio'],'IdProyecto':_0x116e3e[_0x1628('0x12')][_0x1628('0x14')]['id'],'ObjetivoCentral':_0x1509e0['Objetivos']['ObjetivoCentral']});}});waitingDialog[_0x1628('0x50')]();_0x502995[_0x1628('0xd1')](_0x1509e0[_0x1628('0xd2')],function(_0x323f49){if(_0x323f49[_0x1628('0x4d')]){waitingDialog[_0x1628('0xb')]();swal({'text':_0x1628('0xa2'),'confirmButtonColor':'#238276','width':_0x1628('0xa3')});_0x1509e0[_0x1628('0xba')]();}});};}]);

ManualApp.controller('ArbolObjetivosController',
    ['$scope', '$rootScope', '$location', 'ArbolObjetivoService', '$cookies', '$cookieStore', 'MenuService', '$routeParams', '$sce',
        function ($scope, $rootScope, $location, ArbolObjetivoService, $cookies, $cookieStore, MenuService, $routeParams, $sce) {
            //location.reload();
            VideoDemo = 1;
            $("#agregar_btn").hide();
            $("#botonQuitar").hide();


            $("#resultados").attr("disabled", "disabled");
            //LINEA PARA OCULTAR EL FORMULARIO DE OBJETIVOS
            $("#VistaObjetivos").hide();

            $("#vistaResultados").hide();
            //OBJETOS
            $scope.Arbol = {
                IdProyecto: $rootScope.proyecto.datos.id,
                IdMatriz: "",
                ProblemaGeneral: "",
                DetalleMat: [
                  {
                      Problema: "",
                      EjeX: "",
                      EjeY: "",
                      Criterio: ""
                  }
                ]
            }

            $scope.ObjArbol = {
                IdProyecto: $rootScope.proyecto.datos.id,
                ObjetivoCentral: "",
                Medios: [
                  {
                      Medio: "",
                      MediosIndirectos: [
                          {
                              indirecta: ""
                          }
                      ]
                  }
                ],
                Fines: [
                 {
                     fin: "",
                     FinesIndirectos: [
                         {
                             indirecto: ""
                         }
                     ]
                 }
                ]

            }

            $scope.Objetivos = {
                IdProyecto: $rootScope.proyecto.datos.id,
                ObjetivoCentral: "",
                Medios: [
                  {
                      Medio: "",
                      MediosIndirectos: [
                          {
                              indirecta: ""
                          }
                      ]
                  }
                ],
                Fines: [
                 {
                     fin: "",
                     FinesIndirectos: [
                         {
                             indirecto: ""
                         }
                     ]
                 }
                ]
            }

            $scope.DatosProyecto = {
                id: "",
                Tema: "",
                IdUsuario: "",
                Etapa: ""
            }

            $scope.ObjetivosFinales = {
                IdProyecto: $rootScope.proyecto.datos.id,
                ObjetivoCentral: "",
                Objetivos: {
                    IdObjetivoGeneral: "",
                    ObjetivoEsp: "",
                    Resultado1: "",
                    MedidaResultado: "",
                    HerramientaResultado: "",
                    ProductoResultado: ""
                }
            }

            //Funciòn para pausar el audio cuando se abra el video
            $scope.PauseAudio = function () {
                setTimeout(function () {
                    var audio = document.getElementById("audio-player");
                    audio.pause();
                }, 1000);

                setTimeout(function () {
                    var audio = document.getElementById("audio-player1");
                    audio.pause();
                }, 1000);

                setTimeout(function () {
                    var audio = document.getElementById("audio-player2");
                    audio.pause();
                }, 1000);
            }


            $scope.CerrarAudio = function () {
                setTimeout(function () {
                    var audio = document.getElementById("audio-player");
                    audio.pause();
                }, 1000);

                setTimeout(function () {
                    var audio = document.getElementById("audio-player1");
                    audio.pause();
                }, 1000);

                setTimeout(function () {
                    var audio = document.getElementById("audio-player2");
                    audio.pause();
                }, 1000);
            }
            //-----------------------------------------------------------------------------------------------------

            //VARIABLE PARA ACTIVAR CICLO INFINITO
            var update = window.requestAnimationFrame || window.mozRequestAnimationFrame ||
                         window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
            var panel = document.querySelector("#panel");
            var textoPanel = document.querySelector("#mostrarPanel h6");
            var alerta = document.querySelector("#alerta");
            var panelOn = true, numEfectos, numeCausas, tipo, txtIndirecto, efecto, causa, indirecto, elementoBorrar, img3, idElementoBorrar, causaImg3, imgBorrar;
            var efectoImg3;

            //CAPTURAR UL
            efecto = document.querySelector("#efecto");
            causa = document.querySelector("#causa");
            efectoIndirectoUl = document.querySelector("#efectoIndirecto");
            causaIndirectaUl = document.querySelector("#causaIndirecta");

            //CICLO INFINITO
            function repetir() {
                //CAPTURAR LA CANTIDAD DE LI
                efectos = document.querySelectorAll("#efecto li");
                causas = document.querySelectorAll("#causa li");
                efectosIndirectos = document.querySelectorAll("#efectoIndirecto li");
                causasIndirectas = document.querySelectorAll("#causaIndirecta li")

                //CAPTURAR IMAGENES 3
                efectoImg3 = document.querySelectorAll("#imgEfecto3 img");
                causaImg3 = document.querySelectorAll("#imgCausa3 img");

                //ANCHO IMAGENES 3
                //efectos indirectos
                if (efectosIndirectos.length == 1) {
                    efectoImg3[0].style.width = 50 + "%";
                } else {
                    for (var i = 0; i < efectoImg3.length; i++) {
                        efectoImg3[i].style.width = 100 / efectos.length + "%";
                    }
                }

                //causas indirectas
                if (causasIndirectas.length == 1) {
                    causaImg3[0].style.width = 50 + "%";
                } else {
                    for (var i = 0; i < causaImg3.length; i++) {
                        causaImg3[i].style.width = 100 / causas.length + "%";
                    }
                }

                //ANCHO DE LI
                //efectos
                for (var i = 0; i < efectos.length; i++) {
                    efectos[i].style.width = 100 / efectos.length + "%";
                }
                //causas
                for (var i = 0; i < causas.length; i++) {
                    causas[i].style.width = 100 / causas.length + "%";
                }
                //efectos indirectos
                if (efectosIndirectos.length == 1) {
                    efectosIndirectos[0].style.width = 50 + "%";
                } else {
                    for (var i = 0; i < efectosIndirectos.length; i++) {
                        efectosIndirectos[i].style.width = 100 / efectos.length + "%";
                    }
                }

                //causas indirectas
                if (causasIndirectas.length == 1) {
                    causasIndirectas[0].style.width = 50 + "%";
                } else {
                    for (var i = 0; i < causasIndirectas.length; i++) {
                        causasIndirectas[i].style.width = 100 / causas.length + "%";
                    }
                }

                //ASIGNAR IMAGENES
                //efectos
                if (efectos.length != 0) {
                    document.querySelector("#imgEfecto").setAttribute("src", "img/lineaU" + efectos.length + ".png");
                } else {

                    // document.querySelector("#imgEfecto").setAttribute("src", "img/sinLinea.png");
                }
                //causas
                if (causas.length != 0) {
                    document.querySelector("#imgCausa").setAttribute("src", "img/lineaD" + causas.length + ".png");
                } else {
                    document.querySelector("#imgCausa").setAttribute("src", "img/sinLinea.png");
                }

                //efectos indirectos
                var imgEfectoIndirecto = document.querySelectorAll("#imgEfecto3 img");

                if (imgEfectoIndirecto.length != 0) {
                    for (var i = 0; i < imgEfectoIndirecto.length; i++) {
                        var total = document.querySelectorAll("#efectoIndirecto li:nth-child(" + (i + 1) + ") div");
                        if (total.length != 0) {
                            imgEfectoIndirecto[i].setAttribute("src", "img/lineaU" + total.length + ".png");
                        } else {
                            imgEfectoIndirecto[i].setAttribute("src", "img/sinLinea.png");
                        }
                    }
                }

                //causas indirectas
                var imgCausaIndirecta = document.querySelectorAll("#imgCausa3 img");

                if (imgCausaIndirecta.length != 0) {
                    for (var i = 0; i < imgCausaIndirecta.length; i++) {
                        var total = document.querySelectorAll("#causaIndirecta li:nth-child(" + (i + 1) + ") div");
                        if (total.length != 0) {
                            imgCausaIndirecta[i].setAttribute("src", "img/lineaD" + total.length + ".png");
                        } else {
                            imgCausaIndirecta[i].setAttribute("src", "img/sinLinea.png");
                        }
                    }
                }

                //ASIGANR ID´S Y NUMERO DE POSICION
                for (var i = 0; i < efectos.length; i++) {
                    efectos[i].setAttribute("id", "efecto" + (i + 1));
                    efectos[i].querySelector(".bloque div span").innerHTML = (i + 1) + ".";
                    efectoImg3[i].setAttribute("id", "efecto" + (i + 1) + "img");
                    efectosIndirectos[i].setAttribute("id", "efecto" + (i + 1) + "indirecto");
                }
                for (var i = 0; i < causas.length; i++) {
                    causas[i].setAttribute("id", "causa" + (i + 1));
                    causas[i].querySelector(".bloque div span").innerHTML = (i + 1) + ".";
                    causaImg3[i].setAttribute("id", "causa" + (i + 1) + "img");
                    causasIndirectas[i].setAttribute("id", "causa" + (i + 1) + "indirecto");

                }

                update(repetir); //entra en la funcion repetir sin salir de la misma, asi crea un ciclo infinito
            }
            update(repetir); //inicia la funcion repetir

            // FUNCIONES QUE ACTIVAN LAS VENTANAS MODALES
            // mostrar
            function modalOn(elemento) {
                //$("#modal").show();
                //$("#arbolContenedor").hide();
                document.querySelector("#modal").style.display = "block";
                document.querySelector(elemento).style.display = "block";
            }
            // ocultar
            function modalOff() {
                document.querySelector("#modal").style.display = "none";
                //$("#arbolContenedor").show();
                var elementosModal = document.querySelectorAll(".contenidoModal");
                for (var i = 0; i < elementosModal.length; i++) {
                    elementosModal[i].style.display = "none";
                }
            }

            //FUNCION DE LAS ALERTAS
            //alerta1 que dura cierto tiempo, tiene 3 parametros (la duracion es en segundos).
            function alerta1(titulo, texto, duracion) {
                alerta.style.top = "5%";
                alerta.querySelector("h3").innerHTML = titulo;
                alerta.querySelector("p").innerHTML = texto;
                setTimeout(function () {
                    alerta.style.top = "-25%";
                }, duracion * 1000)
            }

            //VARIABLES PARA LA CREACIÓN DEL ARBOL
            var contEfeIndir = 0;
            var contCuaIndir = 0;
            $scope.CausasTotales = [];
            $scope.EfectosTotales = [];
            $scope.MediosIndTotales = [];
            $scope.FinesIndTotales = [];
            $scope.CausasIndTotales = [];
            $scope.EfectosIndTotales = [];


            //VARIABLE Y FUNCIÓN PARA CONSULTAR EL PROYECTO ACTUALIZADO Y CREAR EL ARBOL DE PROBLEMAS
            $scope.IdProyecto = $rootScope.proyecto.datos.id;
            MenuService.AbrirProyecto($scope.IdProyecto, function (response) {
                if (response.success) {
                    $scope.DatosProyecto = response.proyecto;
                    $rootScope.proyecto.datos.Etapa = $scope.DatosProyecto.Etapa;
                    waitingDialog.show();
                    //FUNCIÓN PARA CONSULTAR LOS DATOS DE LA MATRIZ  Y PINTAR EL ARBOL DE PROBLEMAS
                    if ($rootScope.proyecto != undefined) {
                        if ($scope.DatosProyecto.Etapa < 4) {
                            ArbolObjetivoService.ConsultarArbolFinal($rootScope.proyecto.datos.id, function (response) {
                                if (response.success) {
                                    var problemaGeneral = response.ArbolFinal.ProblemaCentral;
                                    document.querySelector("#txtProblema").value = problemaGeneral;
                                    alerta1("Consejo.", "En el panel de la izquierda podras crear los medios y fines.", 5);

                                    //CICLO PARA CREAR LOS EFECTOS EN EL ARBOL
                                    $.each(response.ArbolFinal.Efectos, function (index, value) {

                                        img3 = document.createElement("img");
                                        elemento = document.createElement("li");
                                        elemento2 = document.createElement("li");
                                        bloque = document.createElement("div");
                                        borrar = document.createElement("div");
                                        txtArea = document.createElement("textarea");
                                        txtArea.value = value.Efecto;
                                        borrar.innerHTML = "<span></span><h6 class='borrarElemento' onclick='borrarElemento(this)'> Borrar</h6>";
                                        bloque.setAttribute("class", "bloque");
                                        txtArea.setAttribute("class", "txtBloque2");
                                        txtArea.setAttribute("maxlength", "140");
                                        efecto.appendChild(elemento).appendChild(bloque).appendChild(borrar);
                                        efecto.querySelector("li:last-child div:last-child").appendChild(txtArea);
                                        document.querySelector("#imgEfecto3").appendChild(img3);
                                        document.querySelector("#efectoIndirecto").appendChild(elemento2);

                                        $.each(value.EfectoIndirecta, function (index1, value1) {
                                            $scope.EfectosIndTotales.push({ id: index, EfectoIndirecta: value.EfectoIndirecta[index1] })
                                        })


                                    });

                                    //CICLO PARA CREAR EFECTOS INDIRECTOS DEL ARBOL

                                    var indirecto1 = 0;
                                    $.each($scope.EfectosIndTotales, function (index, value) {
                                        indirecto1 = (value.id) + 1;
                                        bloque = document.createElement("div");
                                        borrar = document.createElement("span");
                                        txtArea = document.createElement("textarea");
                                        txtArea.value = value.EfectoIndirecta;
                                        borrar.innerHTML = "<h6 class='borrarElemento' onclick='borrarElemento2(this)'> Borrar</h6>";
                                        bloque.setAttribute("class", "bloque2");
                                        txtArea.setAttribute("class", "txtBloque3");
                                        txtArea.setAttribute("maxlength", "140");
                                        efectoIndirectoUl.querySelector("li:nth-child(" + indirecto1 + ")").appendChild(bloque).appendChild(txtArea);
                                        efectoIndirectoUl.querySelector("li:nth-child(" + indirecto1 + ") div:last-child").appendChild(borrar);
                                    })

                                    //CICLO PARA CREAR LOS CAUSAS EN EL ARBOL
                                    $.each(response.ArbolFinal.Causas, function (index, value) {

                                        img3 = document.createElement("img");
                                        elemento = document.createElement("li");
                                        elemento2 = document.createElement("li");
                                        bloque = document.createElement("div");
                                        borrar = document.createElement("div");
                                        txtArea = document.createElement("textarea");
                                        txtArea.value = value.Causa;
                                        borrar.innerHTML = "<span></span><h6 class='borrarElemento' onclick='borrarElemento(this)'> Borrar</h6>";
                                        bloque.setAttribute("class", "bloque");
                                        txtArea.setAttribute("class", "txtBloque2");
                                        txtArea.setAttribute("maxlength", "140");
                                        causa.appendChild(elemento).appendChild(bloque).appendChild(borrar);
                                        causa.querySelector("li:last-child div:last-child").appendChild(txtArea);
                                        document.querySelector("#imgCausa3").appendChild(img3);
                                        document.querySelector("#causaIndirecta").appendChild(elemento2);

                                        $.each(value.CausaIndirecta, function (index1, value1) {
                                            $scope.CausasIndTotales.push({ id: index, CausaIndirecta: value.CausaIndirecta[index1] })
                                        })
                                    });

                                    //console.log($scope.CausasIndTotales);
                                    //CICLO PARA CREAR CAUSAS INDIRECTAS DEL ARBOL
                                    var indirecto = 0;
                                    $.each($scope.CausasIndTotales, function (index, value) {
                                        indirecto = (value.id) + 1;
                                        bloque = document.createElement("div");
                                        borrar = document.createElement("span");
                                        txtArea = document.createElement("textarea");
                                        txtArea.value = value.CausaIndirecta;
                                        borrar.innerHTML = "<h6 class='borrarElemento' onclick='borrarElemento2(this)'> Borrar</h6>";
                                        bloque.setAttribute("class", "bloque2");
                                        txtArea.setAttribute("class", "txtBloque3");
                                        txtArea.setAttribute("maxlength", "140");
                                        causaIndirectaUl.querySelector("li:nth-child(" + indirecto + ")").appendChild(bloque).appendChild(txtArea);
                                        causaIndirectaUl.querySelector("li:nth-child(" + indirecto + ") div:last-child").appendChild(borrar);
                                    })
                                }
                                waitingDialog.hide();
                                $("#TabObjetivos").attr("disabled", "disabled");
                            })

                        } else {
                            ArbolObjetivoService.ConsultarArbolObjetivosFinal($rootScope.proyecto.datos.id, function (response) {
                                if (response.success) {

                                    var ObjetivoCentral = response.ArbolFinal.ObjetivoCentral;
                                    document.querySelector("#txtProblema").value = ObjetivoCentral;
                                    alerta1("Consejo.", "En el panel de la izquierda podras crear los medios y fines.", 5);

                                    //CICLO PARA CREAR LOS EFECTOS EN EL ARBOL
                                    $.each(response.ArbolFinal.Fines, function (index, value) {

                                        img3 = document.createElement("img");
                                        elemento = document.createElement("li");
                                        elemento2 = document.createElement("li");
                                        bloque = document.createElement("div");
                                        borrar = document.createElement("div");
                                        txtArea = document.createElement("textarea");
                                        txtArea.value = value.fin;
                                        borrar.innerHTML = "<span></span><h6 class='borrarElemento' onclick='borrarElemento(this)'> Borrar</h6>";
                                        bloque.setAttribute("class", "bloque");
                                        txtArea.setAttribute("class", "txtBloque2");
                                        txtArea.setAttribute("maxlength", "140");
                                        efecto.appendChild(elemento).appendChild(bloque).appendChild(borrar);
                                        efecto.querySelector("li:last-child div:last-child").appendChild(txtArea);
                                        document.querySelector("#imgEfecto3").appendChild(img3);
                                        document.querySelector("#efectoIndirecto").appendChild(elemento2);

                                        $.each(value.FinesIndirectos, function (index1, value1) {
                                            $scope.FinesIndTotales.push({ id: index, FinesIndirectos: value.FinesIndirectos[index1] })
                                        })
                                    });

                                    //CICLO PARA CREAR EFECTOS INDIRECTOS DEL ARBOL
                                    //console.log($scope.FinesIndTotales);
                                    var indirecto1 = 0;
                                    $.each($scope.FinesIndTotales, function (index, value) {

                                        indirecto1 = (value.id) + 1;

                                        bloque = document.createElement("div");
                                        borrar = document.createElement("span");
                                        txtArea = document.createElement("textarea");
                                        txtArea.value = value.FinesIndirectos;
                                        borrar.innerHTML = "<h6 class='borrarElemento' onclick='borrarElemento2(this)'> Borrar</h6>";
                                        bloque.setAttribute("class", "bloque2");
                                        txtArea.setAttribute("class", "txtBloque3");
                                        txtArea.setAttribute("maxlength", "140");
                                        efectoIndirectoUl.querySelector("li:nth-child(" + indirecto1 + ")").appendChild(bloque).appendChild(txtArea);
                                        efectoIndirectoUl.querySelector("li:nth-child(" + indirecto1 + ") div:last-child").appendChild(borrar);
                                    })

                                    //CICLO PARA CREAR LOS CAUSAS EN EL ARBOL
                                    $.each(response.ArbolFinal.Medios, function (index, value) {

                                        img3 = document.createElement("img");
                                        elemento = document.createElement("li");
                                        elemento2 = document.createElement("li");
                                        bloque = document.createElement("div");
                                        borrar = document.createElement("div");
                                        txtArea = document.createElement("textarea");
                                        txtArea.value = value.Medio;
                                        borrar.innerHTML = "<span></span><h6 class='borrarElemento' onclick='borrarElemento(this)'> Borrar</h6>";
                                        bloque.setAttribute("class", "bloque");
                                        txtArea.setAttribute("class", "txtBloque2");
                                        txtArea.setAttribute("maxlength", "140");
                                        causa.appendChild(elemento).appendChild(bloque).appendChild(borrar);
                                        causa.querySelector("li:last-child div:last-child").appendChild(txtArea);
                                        document.querySelector("#imgCausa3").appendChild(img3);
                                        document.querySelector("#causaIndirecta").appendChild(elemento2);

                                        $.each(value.MediosIndirectos, function (index1, value1) {
                                            $scope.MediosIndTotales.push({ id: index, MediosIndirectos: value.MediosIndirectos[index1] })
                                        })
                                    });

                                    //console.log($scope.MediosIndTotales);
                                    //CICLO PARA CREAR CAUSAS INDIRECTAS DEL ARBOL
                                    var indirecto = 0;
                                    $.each($scope.MediosIndTotales, function (index, value) {
                                        indirecto = (value.id) + 1;
                                        bloque = document.createElement("div");
                                        borrar = document.createElement("span");
                                        txtArea = document.createElement("textarea");
                                        txtArea.value = value.MediosIndirectos;
                                        borrar.innerHTML = "<h6 class='borrarElemento' onclick='borrarElemento2(this)'> Borrar</h6>";
                                        bloque.setAttribute("class", "bloque2");
                                        txtArea.setAttribute("class", "txtBloque3");
                                        txtArea.setAttribute("maxlength", "140");
                                        causaIndirectaUl.querySelector("li:nth-child(" + indirecto + ")").appendChild(bloque).appendChild(txtArea);
                                        causaIndirectaUl.querySelector("li:nth-child(" + indirecto + ") div:last-child").appendChild(borrar);
                                    })
                                }

                                //$("#guardar").hide();
                                $("#botonSiguienteArbol").show();
                                waitingDialog.hide();
                            })
                        }
                    }
                }
            })


            //FUNCION PARA MOSTRAR Y OCULTAR EL PANEL
            $scope.mostrarPanel = function () {
                if (panelOn) {
                    panel.style.top = "-100%";
                    textoPanel.innerHTML = "Mostrar";
                    panelOn = false;
                } else {
                    panel.style.top = "30px";
                    textoPanel.innerHTML = "Ocultar";
                    panelOn = true;
                }
            }

            //FUNCION DEL SELECT DEL PANEL
            $scope.cambioElemento = function () {
                tipo = document.querySelector("#elemento").value;
                document.querySelector("#asignarIndirecta").innerHTML = '<option value="vacio">Seleccionar...</option>'; //resetea el select de indirecta

                if (tipo == "efectoIndirecto") {
                    document.querySelector("#indirecta").style.display = "block"; //muestra el select para asignar a una indirecta
                    document.querySelector("#txtIndirecta").innerHTML = "efecto"; //coloca el texto segun la indirecta (causas o efectos)
                    for (var i = 0; i < efectos.length; i++) {
                        var option = document.createElement("option");
                        option.innerHTML = i + 1;
                        option.setAttribute("value", i + 1);
                        document.querySelector("#asignarIndirecta").appendChild(option);
                        alerta1("Consejo.", "Asiga tu efecto indirecto a un efecto según su posición.", 3);
                    }
                } else if (tipo == "causaIndirecta") {
                    document.querySelector("#indirecta").style.display = "block"; //muestra el select para asignar a una indirecta
                    document.querySelector("#txtIndirecta").innerHTML = "causa"; //coloca el texto segun la indirecta (causas o efectos)
                    for (var i = 0; i < causas.length; i++) {
                        var option = document.createElement("option");
                        option.innerHTML = i + 1;
                        option.setAttribute("value", i + 1);
                        document.querySelector("#asignarIndirecta").appendChild(option);
                        alerta1("Consejo.", "Asiga tu causa indirecta a una causa según su posición.", 3);
                    }
                } else {
                    document.querySelector("#indirecta").style.display = "none"; //esconde el select para asignar a una indirecta
                }
            }

            //BOTON CREAR DEL PANEL
            $scope.crear = function () {
                indirecto = document.querySelector("#asignarIndirecta").value;
                var elemento, txtArea, elemento2;

                if (tipo === "vacio" || tipo === undefined) { //validar si el select de tipo viene vacio
                    alerta1("Recuerda.", "Debes seleccionar un fin o un medio.", 3);
                }

                if (indirecto == "vacio" && tipo == "efectoIndirecto" || tipo == "causaIndirecta") {
                    alerta1("Recuerda.", "Debes seleccionar un fin o un medio primero.", 3);
                }

                //crear efectos
                if (tipo == "efecto" && efectos.length < 5) {
                    img3 = document.createElement("img");
                    elemento = document.createElement("li");
                    elemento2 = document.createElement("li");
                    bloque = document.createElement("div");
                    borrar = document.createElement("div");
                    txtArea = document.createElement("textarea");
                    txtArea.value = "";
                    borrar.innerHTML = "<span></span><h6 class='borrarElemento' onclick='borrarElemento(this)'> Borrar</h6>";
                    bloque.setAttribute("class", "bloque");
                    txtArea.setAttribute("class", "txtBloque2");
                    txtArea.setAttribute("maxlength", "140");
                    txtArea.setAttribute("style", "font-size:10px;");
                    efecto.appendChild(elemento).appendChild(bloque).appendChild(borrar);
                    efecto.querySelector("li:last-child div:last-child").appendChild(txtArea);
                    document.querySelector("#imgEfecto3").appendChild(img3);
                    document.querySelector("#efectoIndirecto").appendChild(elemento2);
                } else if (tipo == "efecto" && efectos.length >= 5) {
                    alerta1("Recuerda.", "Ya tienes 5 fines.", 2);
                }

                // crear causas
                if (tipo == "causa" && causas.length < 5) {
                    img3 = document.createElement("img");
                    elemento = document.createElement("li");
                    elemento2 = document.createElement("li");
                    bloque = document.createElement("div");
                    borrar = document.createElement("div");
                    txtArea = document.createElement("textarea");
                    borrar.innerHTML = "<span></span><h6 class='borrarElemento' onclick='borrarElemento(this)'> Borrar</h6>";
                    bloque.setAttribute("class", "bloque");
                    txtArea.setAttribute("class", "txtBloque2");
                    txtArea.setAttribute("maxlength", "140");
                    txtArea.setAttribute("style", "font-size:10px;");
                    causa.appendChild(elemento).appendChild(bloque).appendChild(borrar);
                    causa.querySelector("li:last-child div:last-child").appendChild(txtArea);
                    document.querySelector("#imgCausa3").appendChild(img3);
                    document.querySelector("#causaIndirecta").appendChild(elemento2);
                } else if (tipo == "causa" && causas.length >= 5) {
                    alerta1("Recuerda.", "Ya tienes 5 medios.", 2);
                }

                if (indirecto != "vacio") {
                    // crear efecto indirecto
                    if (tipo == "efectoIndirecto" && document.querySelectorAll("#efectoIndirecto li:nth-child(" + indirecto + ") div").length < 3) {
                        bloque = document.createElement("div");
                        borrar = document.createElement("span");
                        txtArea = document.createElement("textarea");
                        borrar.innerHTML = "<h6 class='borrarElemento' onclick='borrarElemento2(this)'> Borrar</h6>";
                        bloque.setAttribute("class", "bloque2");
                        txtArea.setAttribute("class", "txtBloque3");
                        txtArea.setAttribute("maxlength", "140");

                        efectoIndirectoUl.querySelector("li:nth-child(" + indirecto + ")").appendChild(bloque).appendChild(txtArea);
                        efectoIndirectoUl.querySelector("li:nth-child(" + indirecto + ") div:last-child").appendChild(borrar);

                    } else if (document.querySelectorAll("#efectoIndirecto li:nth-child(" + indirecto + ") div").length >= 3) {
                        alerta1("Recuerda.", "Ya tienes 3 fines indirectos.", 2);
                    }

                    // crear causa indirecta
                    if (tipo == "causaIndirecta" && document.querySelectorAll("#causaIndirecta li:nth-child(" + indirecto + ") div").length < 3) {
                        console.log(indirecto);
                        bloque = document.createElement("div");
                        borrar = document.createElement("span");
                        txtArea = document.createElement("textarea");
                        borrar.innerHTML = "<h6 class='borrarElemento' onclick='borrarElemento2(this)'> Borrar</h6>";
                        bloque.setAttribute("class", "bloque2");
                        txtArea.setAttribute("class", "txtBloque3");
                        txtArea.setAttribute("maxlength", "140");

                        causaIndirectaUl.querySelector("li:nth-child(" + indirecto + ")").appendChild(bloque).appendChild(txtArea);
                        causaIndirectaUl.querySelector("li:nth-child(" + indirecto + ") div:last-child").appendChild(borrar);
                    } else if (document.querySelectorAll("#causaIndirecta li:nth-child(" + indirecto + ") div").length >= 3) {
                        alerta1("Recuerda.", "Ya tienes 3 medios indirectos.", 2);
                    }
                }
            }

            //FUNCIÓN PARA GUARDAR LOS DATOS DEL ARBOL
            $scope.guardar = function () {

                var datosProblema = document.querySelector("#txtProblema").value;
                var datosEfectos = [];//ESTE ARREGLO REPRESENTA LOS FINES
                var datosCausas = [];//ESTE ARREGLO REPRESENTA LOS MEDIOS
                var datosEfectosIndirectos = [];//ESTE ARREGLO REPRESENTA LOS FINES INDIRECTOS
                var datosCausasIndirectos = [];//ESTE ARREGLO REPRESENTA LOS MEDIOS INDIRECTOS

                for (var i = 0; i < efectos.length; i++) {
                    var FinesVacios = document.querySelector("#efecto li:nth-child(" + (i + 1) + ") textarea").value;
                    if (FinesVacios != "") {
                        datosEfectos[i] = document.querySelector("#efecto li:nth-child(" + (i + 1) + ") textarea").value;
                    } else {
                        alertify.success("Ups! tienes algún fin vacio");
                        return;
                    }
                }

                for (var i = 0; i < causas.length; i++) {
                    var MediosVacios = datosCausas[i] = document.querySelector("#causa li:nth-child(" + (i + 1) + ") textarea").value
                    if (MediosVacios != "") {
                        datosCausas[i] = document.querySelector("#causa li:nth-child(" + (i + 1) + ") textarea").value;
                    } else {
                        alertify.success("Ups! tienes algún medio vacio");
                        return;
                    }
                }

                for (var i = 0; i < efectos.length; i++) {
                    var cadaLiIndirecto = [];

                    for (var e = 0; e < document.querySelectorAll("#efecto" + (i + 1) + "indirecto div").length; e++) {
                        var FinIndirectoVacios = cadaLiIndirecto[e] = document.querySelector("#efecto" + (i + 1) + "indirecto div:nth-child(" + (e + 1) + ") textarea").value;

                        if (FinIndirectoVacios != "") {
                            cadaLiIndirecto[e] = document.querySelector("#efecto" + (i + 1) + "indirecto div:nth-child(" + (e + 1) + ") textarea").value;
                        } else {
                            alertify.success("Ups! tienes algún fin indirecto vacio");
                            return;
                        }
                    }
                    datosEfectosIndirectos.push(cadaLiIndirecto);
                }

                for (var i = 0; i < causas.length; i++) {
                    var cadaLiIndirecto = [];

                    for (var e = 0; e < document.querySelectorAll("#causa" + (i + 1) + "indirecto div").length; e++) {
                        var MedioIndirectosVacios = cadaLiIndirecto[e] = document.querySelector("#causa" + (i + 1) + "indirecto div:nth-child(" + (e + 1) + ") textarea").value;
                        if (MedioIndirectosVacios != "") {
                            cadaLiIndirecto[e] = document.querySelector("#causa" + (i + 1) + "indirecto div:nth-child(" + (e + 1) + ") textarea").value;
                        } else {
                            alertify.success("Ups! tienes algún medio indirecto vacia");
                            return;
                        }
                    }
                    datosCausasIndirectos.push(cadaLiIndirecto);
                }

                $scope.ObjArbol.ObjetivoCentral = datosProblema;
                $.each(datosCausas, function (index, value) {
                    if (value != "") {
                        $scope.ObjArbol.Medios.push({ Medio: value, MediosIndirectos: datosCausasIndirectos[index] })
                    }
                })
                $.each(datosEfectos, function (index, value) {

                    $scope.ObjArbol.Fines.push({ fin: value, FinesIndirectos: datosEfectosIndirectos[index] })
                })
                waitingDialog.show();

                $("#guardar").hide();
                $("#tipArbolObjetivos").hide();
                $(".borrarElemento").hide();

                setTimeout(function () {

                    html2canvas($("#arbolContenedor"), {
                        onrendered: function (canvas) {
                            theCanvas = canvas;
                            //  document.body.appendChild(canvas);

                            var imgageData = theCanvas.toDataURL();
                            // Now browser starts downloading it instead of just showing it
                            var newData = imgageData.replace(/^data:image\/png/, "data:application/octet-stream");
                            $scope.ObjArbol.imagen = imgageData;
                            console.log($scope.ObjArbol.imagen);
                            ArbolObjetivoService.GuardarDatosArbol($scope.ObjArbol, function (response) {

                                if (response.success) {
                                    waitingDialog.hide();
                                    swal({
                                        text: 'Registro Exitoso',
                                        confirmButtonColor: '#238276',
                                        width: '25%',
                                    })

                                    //$scope.ocultarArbol();
                                    $("#TabObjetivos").attr("disabled", false);
                                    $scope.ocultarArbol();
                                    $("#guardar").show();
                                }
                            })
                        }
                    });
                }, 500);
            }
            //document.querySelector("#guardar").addEventListener("click", function () {
            //});
            $scope.AgregarMedio = function () {
                if ($scope.medios1.length < 5) {
                    $scope.medios1.push({ IdObjetivoEsp: 0, medio: "" });
                }
            }

            $scope.EliminarObjetivos = function () {
                if ($scope.medios1.length > 1) {
                    $scope.medios1.splice(($scope.medios1.length - 1), 1);
                }
            }


            //VARIABLE PARA VALIDAR CUANDO YA INGRESO LA PRIMERA VEZ A LA VISTA DE RESULTADOS

            var contadorObjetivos = 0;
            var medios10 = [];
            $scope.medios1 = []
            //FUNCION PARA PASAR DEL ABROL A LA VISTA DE OBJETIVO GENERAL Y ESPECIFICO.
            $scope.ocultarArbol = function () {
                $("#ArbolObjetivos").hide();
                $("#vistaResultados").hide();
                $("#VistaObjetivos").show();
                waitingDialog.show();
                $("#resultados").attr("disabled", false);
                $('#audioAyudaCuatro').css("display", "none");
                $('#audioAyudaSeis').css("display", "none");
                $(".notify").hide();
                var audio = document.getElementById("audio-player");
                audio.pause();
                var audio2 = document.getElementById("audio-player2");
                audio2.pause();

                if (contadorObjetivos == 0) {
                    if ($rootScope.proyecto.datos.Etapa < 5) {
                        ArbolObjetivoService.ConsultarArbolObjetivosFinal($rootScope.proyecto.datos.id, function (response) {
                            if (response.success) {
                                $scope.Objetivos = response.ArbolFinal;
                                $scope.medios = response.ArbolFinal.Medios;
                                //$scope.medios1 = response.Especificos;
                                if ($scope.medios1.length == 0) {
                                    $.each(response.Especificos, function (index, value) {

                                        $scope.medios1.push({ medio: value });
                                    })
                                }
                            }
                        })
                        waitingDialog.hide();
                    } else {
                        ArbolObjetivoService.ConsultarDatosObjetivos($rootScope.proyecto.datos.id, function (response) {
                            if (response.success) {
                                $scope.Objetivos.ObjetivoCentral = response.DatosObjetivos.ObjetivoCentral;
                                $("#agregar_btn").show();
                                $("#botonQuitar").show();
                                $scope.medios1 = [];
                                //$scope.medios1 = response.Especificos;
                                $.each(response.Especificos, function (index, value) {

                                    $scope.medios1.push({ IdObjetivoEsp: value.IdObjetivoEsp, medio: value.ObjetivoEsp });
                                })
                            }
                            waitingDialog.hide();
                        })

                        $("#verbo").hide();
                        $("#campoObjetivoGeneral").css({ "margin-left": "-10%" });
                        $("#tituloObjetivoGeneral").css({ "margin-left": "18%" });
                    }
                }
                waitingDialog.hide();
                contadorObjetivos++;
            }


            //FUNCION PARA REGRESAR  A LA VISTA DEL ARBOL DE OBJETIVOS. 
            $scope.ocultarObjetivos = function () {
                $("#audioAyudaCinco").hide();
                $("#ArbolObjetivos").show();
                $("#VistaObjetivos").hide();
                $("#vistaResultados").hide();
                $(".notify").hide();
                var audio = document.getElementById("audio-player1");
                audio.pause();
                var audio1 = document.getElementById("audio-player2");
                audio1.pause();


            }

            //$scope.medio1 = "";

            //FUNCION PARA PASAR DE LA VISTA OBJETIVOS A RESULTADOS.
            $scope.mostrarResultados = function () {


                //if (contadorResultados == 0) {
                if ($rootScope.proyecto.datos.Etapa < 5) {
                    ArbolObjetivoService.ConsultarArbolObjetivosFinal($rootScope.proyecto.datos.id, function (response) {
                        if (response.success) {
                            //$scope.medios = response.ArbolFinal.Medios;
                            $scope.mediosIndirectos = [];
                            $.each($scope.medios, function (index, value) {

                                for (var i = 0; i < 3; i++) {
                                    if (value.MediosIndirectos[i] != "") {
                                        $scope.mediosIndirectos.push({ idMedio: index, medioIndirectos: value.MediosIndirectos[i], Resultado: "", Herramienta: "", Producto: "" })
                                    } else {
                                        $scope.mediosIndirectos.push({ idMedio: value.Medio, medioIndirectos: "", Resultado: "", Herramienta: "", Producto: "" })
                                    }
                                }
                            })
                            //console.log($scope.mediosIndirectos);
                            $("#Btnguardar").css({ "display": "block" });
                        }
                    })
                    waitingDialog.hide();
                } else {

                    var contadorObjVacios = 0;
                    $.each($scope.medios1, function (index1, value) {
                        if (value.medio == "") {
                           
                            contadorObjVacios++;
                        }
                    });
                    if (contadorObjVacios > 0) {
                        alertify.success("Ups! Debes completar todos los objetivos específicos");
                        return false;
                    } else {

                        ArbolObjetivoService.ConsultarDatosObjetivos($rootScope.proyecto.datos.id, function (response) {
                            if (response.success) {
                                //$scope.Objetivos.ObjetivoCentral = response.DatosObjetivos.ObjetivoCentral;
                                $scope.prueba = response.DatosObjetivos.Objetivos
                                $("#agregar_btn").show();
                                $("#botonQuitar").show();
                                $scope.medios = [];
                                $scope.mediosIndirectos = [];

                                $.each($scope.medios1, function (index, value1) {

                                    $scope.medios.push({ Medio: value1.ObjetivoEsp, MediosIndirectos: index });
                                    var cont = 0;
                                    var faltantes = 0;
                                    $.each($scope.prueba, function (index1, value) {

                                        if (cont <= 3) {

                                            if (value1.IdObjetivoEsp == value.IdObjetivoEsp) {
                                                $scope.mediosIndirectos.push({ idMedio: index, medioIndirectos: value.Resultado1, Resultado: value.MedidaResultado, Herramienta: value.HerramientaResultado, Producto: value.ProductoResultado })
                                                cont++;
                                            } else {
                                                //$scope.mediosIndirectos.push({ idMedio: index, medioIndirectos: "", Resultado: "", Herramienta: "", Producto: "" })
                                            }
                                        }
                                    });

                                    //Se resta 3 que es el maximo de campos con la cantidad de campos que ya se agregaron
                                    faltantes = 3 - cont;
                                    if (faltantes >= 0) {
                                        // Se agregan los campos faltantes
                                        for (var i = 1; i <= faltantes; i++) {
                                            $scope.mediosIndirectos.push({ idMedio: index, medioIndirectos: "", Resultado: "", Herramienta: "", Producto: "" })
                                        }
                                    } else {

                                        for (var i = 1; i <= 3; i++) {
                                            $scope.mediosIndirectos.push({ idMedio: index, medioIndirectos: "", Resultado: "", Herramienta: "", Producto: "" })
                                        }
                                    }
                                    cont = 0;
                                });
                                //console.log($scope.prueba);
                                //console.log(response.Especificos);
                                //console.log($scope.medios);
                                //console.log($scope.mediosIndirectos);
                                console.log($scope.prueba);
                                console.log(response.Especificos);
                                //$("#Btnguardar").css({ "display": "none" });
                                waitingDialog.hide();
                            }
                        })
                    }
                    //}
                    waitingDialog.hide();
                    //contadorResultados++;
                }

                $("#ArbolObjetivos").hide();
                $("#VistaObjetivos").hide();
                $("#vistaResultados").show();
                $(".notify").hide();
                $("#audioAyudaCinco").hide();
                //waitingDialog.show();
                var audio = document.getElementById("audio-player");
                audio.pause();
                var audio1 = document.getElementById("audio-player1");
                audio1.pause();

            }


            //FUNCION PARA GUARDAR TODOS LOS DATOS DE OBJETIVOS.
            $scope.guardarObjetivos = function () {

                var verbo = $("#verbo").val();
                //$scope.ObjetivosFinales.ObjetivoCentral = verbo + " " + $scope.Objetivos.ObjetivoCentral;
                if ($('#verbo').is(":visible")) {
                    $scope.ObjetivosFinales.ObjetivoCentral = verbo + " " + $scope.Objetivos.ObjetivoCentral;
                } else {
                    $scope.ObjetivosFinales.ObjetivoCentral = $("#campoObjetivoGeneral").val();
                }

                $scope.ObjetivosFinales1 = [];
                $.each($scope.mediosIndirectos, function (index, value) {

                    if (index < 3) {
                        var posicion = 0;
                    } if (index >= 3 && index < 6) {
                        var posicion = 1;
                    } if (index >= 6 && index < 9) {
                        var posicion = 2;
                    } if (index >= 9 && index < 12) {
                        var posicion = 3;
                    } if (index >= 12) {
                        var posicion = 4;
                    }

                    if (value.medioIndirectos != undefined) {


                        $scope.ObjetivosFinales1.push({ ObjetivoEsp: $scope.medios1[posicion].medio.toString(), Resultado1: value.medioIndirectos, MedidaResultado: value.Resultado, HerramientaResultado: value.Herramienta, ProductoResultado: value.Producto })

                    } else {
                        $scope.ObjetivosFinales1.push({ ObjetivoEsp: $scope.medios1[posicion].medio.toString(), Resultado1: "", MedidaResultado: value.Resultado, HerramientaResultado: value.Herramienta, ProductoResultado: value.Producto })

                    }
                })
                $scope.ObjetivosFinales.Objetivos = $scope.ObjetivosFinales1;

                var con = 0;
                var recorrer = $scope.ObjetivosFinales.Objetivos;
                $.each(recorrer, function (index, value) {

                    if (value.Resultado1 != "" && (value.MedidaResultado == "" || value.HerramientaResultado == "" || value.ProductoResultado == "")) {
                        con++;
                    }
                })

                if (con == 0) {
                    waitingDialog.show();
                    ArbolObjetivoService.GuardarObjetivos($scope.ObjetivosFinales, function (response) {
                        if (response.success) {
                            waitingDialog.hide();

                            swal({
                                text: 'Registro Exitoso',
                                confirmButtonColor: '#238276',
                                width: '25%',
                            })

                            $location.url("/Menu");
                        }
                    });

                } else {
                    alertify.success("Ups! Debes completar los campos de cada resultado esperado.");
                }
                console.log($scope.ObjetivosFinales)

            }

            $scope.atras = function () {

                $location.url("/Menu");
                $(".notify").hide();

            }

            $scope.GuardarObjetivosEspecificos = function () {

                $scope.ObjetivosEspe = [];


                var verbo = $("#verbo").val();

                if ($('#verbo').is(":visible")) {
                    $scope.ObjetivosFinales.ObjetivoCentral = verbo + " " + $scope.Objetivos.ObjetivoCentral;
                } else {
                    $scope.ObjetivosFinales.ObjetivoCentral = $scope.Objetivos.ObjetivoCentral;
                }



                $.each($scope.medios1, function (index, value) {
                    if (value.IdObjetivoEsp != 0) {
                        $scope.ObjetivosEspe.push({ IdObjetivoEsp: value.IdObjetivoEsp, ObjetivoEsp: value.medio, IdProyecto: $rootScope.proyecto.datos.id, ObjetivoCentral: $scope.Objetivos.ObjetivoCentral })
                    } else {
                        $scope.ObjetivosEspe.push({ IdObjetivoEsp: 0, ObjetivoEsp: value.medio, IdProyecto: $rootScope.proyecto.datos.id, ObjetivoCentral: $scope.Objetivos.ObjetivoCentral })
                    }

                })

                waitingDialog.show();
                ArbolObjetivoService.GuardarObjetivosEspecificos($scope.ObjetivosEspe, function (response) {
                    if (response.success) {
                        waitingDialog.hide();

                        swal({
                            text: 'Registro Exitoso',
                            confirmButtonColor: '#238276',
                            width: '25%',
                        })

                        $scope.mostrarResultados();
                    }
                });
            }
        }]);