//var _0x33c3=['MarcoLogicoController','$scope','$location','MarcoLogicoService','$cookies','$cookieStore','$routeParams','$sce','#ContainerFinal\x20','hide','#menuAyuda2\x20','#btnFinalizar','#btnEditarMarco','getElementById','Marco','guardarMarco','IdProyecto','proyecto','datos','Fin1','Fin2','Fin3','Fin4','Proposito1','Proposito2','Proposito3','Resultado1','Resultado2','Resultado3','Actividad1','Actividad2','Actividad4','Proposito4','Resultado4','success','Ups!\x20Faltan\x20campos\x20por\x20completar','show','Registro\x20Exitoso','#238276','url','/MarcoL','Etapa','#btnGuardarMarco','AbrirProyecto','LLenarMarco','marco','ConsultarMarco','#containerMarcoLogico\x20','#menuAyuda','abrirReporte1','controller'];(function(_0x2da5d4,_0x52ce16){var _0x56c53b=function(_0x4cfc5f){while(--_0x4cfc5f){_0x2da5d4['push'](_0x2da5d4['shift']());}};_0x56c53b(++_0x52ce16);}(_0x33c3,0x164));var _0x7d9a=function(_0x231fd0,_0x4f680a){_0x231fd0=_0x231fd0-0x0;var _0x5b4826=_0x33c3[_0x231fd0];return _0x5b4826;};ManualApp[_0x7d9a('0x0')](_0x7d9a('0x1'),[_0x7d9a('0x2'),'$rootScope',_0x7d9a('0x3'),_0x7d9a('0x4'),_0x7d9a('0x5'),_0x7d9a('0x6'),_0x7d9a('0x7'),_0x7d9a('0x8'),function(_0x39dc18,_0x13fadf,_0x2ca6a7,_0x58980d,_0x1f346a,_0x3169b3,_0x4a86d1,_0x27eaea){$(_0x7d9a('0x9'))[_0x7d9a('0xa')]();$(_0x7d9a('0xb'))[_0x7d9a('0xa')]();$('#ContainerFinal')['hide']();$(_0x7d9a('0xc'))[_0x7d9a('0xa')]();$(_0x7d9a('0xd'))[_0x7d9a('0xa')]();_0x39dc18['PauseAudio']=function(){setTimeout(function(){var _0x136b16=document[_0x7d9a('0xe')]('audio-player');_0x136b16['pause']();},0x3e8);};_0x39dc18[_0x7d9a('0xf')]={'IdMarco':'','IdProyecto':'','Actividad1':'','Actividad2':'','Actividad3':'','Actividad4':'','Resultado1':'','Resultado2':'','Resultado3':'','Resultado4':'','Proposito1':'','Proposito2':'','Proposito3':'','Proposito4':'','Fin1':'','Fin2':'','Fin3':'','Fin4':''};_0x39dc18[_0x7d9a('0x10')]=function(){_0x39dc18[_0x7d9a('0xf')][_0x7d9a('0x11')]=_0x13fadf[_0x7d9a('0x12')][_0x7d9a('0x13')]['id'];if(_0x39dc18[_0x7d9a('0xf')][_0x7d9a('0x14')]==null||_0x39dc18[_0x7d9a('0xf')][_0x7d9a('0x15')]==null||_0x39dc18['Marco'][_0x7d9a('0x16')]==null||_0x39dc18['Marco'][_0x7d9a('0x17')]==null||_0x39dc18['Marco'][_0x7d9a('0x18')]==null||_0x39dc18[_0x7d9a('0xf')][_0x7d9a('0x19')]==null||_0x39dc18['Marco'][_0x7d9a('0x1a')]==null||_0x39dc18[_0x7d9a('0xf')]['Proposito4']==null||_0x39dc18[_0x7d9a('0xf')][_0x7d9a('0x1b')]==null||_0x39dc18[_0x7d9a('0xf')][_0x7d9a('0x1c')]==null||_0x39dc18[_0x7d9a('0xf')][_0x7d9a('0x1d')]==null||_0x39dc18[_0x7d9a('0xf')]['Resultado4']==null||_0x39dc18['Marco'][_0x7d9a('0x1e')]==null||_0x39dc18[_0x7d9a('0xf')][_0x7d9a('0x1f')]==null||_0x39dc18[_0x7d9a('0xf')]['Actividad2']==null||_0x39dc18[_0x7d9a('0xf')][_0x7d9a('0x20')]==null||_0x39dc18[_0x7d9a('0xf')][_0x7d9a('0x14')]==''||_0x39dc18[_0x7d9a('0xf')][_0x7d9a('0x15')]==''||_0x39dc18[_0x7d9a('0xf')][_0x7d9a('0x16')]==''||_0x39dc18[_0x7d9a('0xf')][_0x7d9a('0x17')]==''||_0x39dc18['Marco'][_0x7d9a('0x18')]==''||_0x39dc18[_0x7d9a('0xf')][_0x7d9a('0x19')]==''||_0x39dc18['Marco'][_0x7d9a('0x1a')]==''||_0x39dc18[_0x7d9a('0xf')][_0x7d9a('0x21')]==''||_0x39dc18[_0x7d9a('0xf')][_0x7d9a('0x1b')]==''||_0x39dc18[_0x7d9a('0xf')][_0x7d9a('0x1c')]==''||_0x39dc18[_0x7d9a('0xf')][_0x7d9a('0x1d')]==''||_0x39dc18[_0x7d9a('0xf')][_0x7d9a('0x22')]==''||_0x39dc18[_0x7d9a('0xf')][_0x7d9a('0x1e')]==''||_0x39dc18[_0x7d9a('0xf')]['Actividad2']==''||_0x39dc18[_0x7d9a('0xf')][_0x7d9a('0x1f')]==''||_0x39dc18[_0x7d9a('0xf')][_0x7d9a('0x20')]==''){alertify[_0x7d9a('0x23')](_0x7d9a('0x24'));return![];}else{waitingDialog[_0x7d9a('0x25')]();_0x58980d['GuardarMarco'](_0x39dc18[_0x7d9a('0xf')],function(_0x42efd8){if(_0x42efd8[_0x7d9a('0x23')]){waitingDialog['hide']();swal({'text':_0x7d9a('0x26'),'confirmButtonColor':_0x7d9a('0x27'),'width':'25%'});_0x2ca6a7[_0x7d9a('0x28')](_0x7d9a('0x29'));_0x13fadf[_0x7d9a('0x12')][_0x7d9a('0x13')][_0x7d9a('0x2a')]=0xb;$(_0x7d9a('0xc'))[_0x7d9a('0x25')]();$(_0x7d9a('0x2b'))[_0x7d9a('0xa')]();$('#btnEditarMarco')[_0x7d9a('0x25')]();}});}};_0x58980d[_0x7d9a('0x2c')](_0x13fadf[_0x7d9a('0x12')][_0x7d9a('0x13')]['id'],function(_0x3c08c9){waitingDialog[_0x7d9a('0x25')]();if(_0x3c08c9['success']){_0x13fadf[_0x7d9a('0x12')][_0x7d9a('0x13')]['Etapa']=_0x3c08c9[_0x7d9a('0x12')][_0x7d9a('0x2a')];if(_0x13fadf[_0x7d9a('0x12')]['datos']['Etapa']==0xa){_0x58980d[_0x7d9a('0x2d')](_0x13fadf[_0x7d9a('0x12')][_0x7d9a('0x13')]['id'],function(_0x1644be){if(_0x1644be[_0x7d9a('0x23')]){_0x39dc18[_0x7d9a('0xf')]=_0x1644be[_0x7d9a('0x2e')];}waitingDialog[_0x7d9a('0xa')]();});}else{_0x58980d[_0x7d9a('0x2f')](_0x13fadf['proyecto'][_0x7d9a('0x13')]['id'],function(_0x36574c){if(_0x36574c[_0x7d9a('0x23')]){$('#btnFinalizar')[_0x7d9a('0x25')]();$(_0x7d9a('0xd'))[_0x7d9a('0x25')]();$('#btnGuardarMarco')['hide']();_0x39dc18[_0x7d9a('0xf')]=_0x36574c[_0x7d9a('0x2e')];}waitingDialog[_0x7d9a('0xa')]();});}}});_0x39dc18['Finalizar']=function(){$(_0x7d9a('0x30'))['hide']();$(_0x7d9a('0x31'))[_0x7d9a('0xa')]();$(_0x7d9a('0x9'))[_0x7d9a('0x25')]();$(_0x7d9a('0xb'))[_0x7d9a('0x25')]();};_0x39dc18[_0x7d9a('0x32')]=function(){_0x2ca6a7['url']('/Reporte');};}]);
ManualApp.controller('MarcoLogicoController',
    ['$scope', '$rootScope', '$location', 'MarcoLogicoService', '$cookies', '$cookieStore', '$routeParams', '$sce',
        function ($scope, $rootScope, $location, MarcoLogicoService, $cookies, $cookieStore, $routeParams, $sce) {
            
            $("#ContainerFinal ").hide();
            $("#menuAyuda2 ").hide();
            $("#ContainerFinal").hide();
            $("#btnFinalizar").hide();
            $("#btnEditarMarco").hide();

            //Funciòn para pausar el audio cuando se abra el video
            $scope.PauseAudio = function () {
                setTimeout(function () {
                    var audio = document.getElementById("audio-player");
                    audio.pause();
                }, 1000);
            }

            $scope.Marco = {
                IdMarco:"", 
                IdProyecto: "",
                Actividad1 :"",
                Actividad2 :"",
                Actividad3 :"",
                Actividad4 :"",
                Resultado1 :"",
                Resultado2 :"",
                Resultado3 :"",
                Resultado4 :"",
                Proposito1 :"",
                Proposito2 :"",
                Proposito3 :"",
                Proposito4 :"",
                Fin1 :"",
                Fin2:"", 
                Fin3 :"",
                Fin4 :""
            }

            $scope.guardarMarco = function () {
                $scope.Marco.IdProyecto = $rootScope.proyecto.datos.id;
                if ($scope.Marco.Fin1==null|| $scope.Marco.Fin2==null || $scope.Marco.Fin3 == null  || $scope.Marco.Fin4 == null 
                   || $scope.Marco.Proposito1 == null || $scope.Marco.Proposito2 == null || $scope.Marco.Proposito3 == null || $scope.Marco.Proposito4 == null
                    || $scope.Marco.Resultado1 == null || $scope.Marco.Resultado2 == null || $scope.Marco.Resultado3 == null || $scope.Marco.Resultado4 == null
                     || $scope.Marco.Actividad1 == null || $scope.Marco.Actividad2 == null || $scope.Marco.Actividad2 == null || $scope.Marco.Actividad4 == null
                    || $scope.Marco.Fin1 == "" || $scope.Marco.Fin2 == "" || $scope.Marco.Fin3 == "" || $scope.Marco.Fin4 == ""
                   || $scope.Marco.Proposito1 == "" || $scope.Marco.Proposito2 == "" || $scope.Marco.Proposito3 == "" || $scope.Marco.Proposito4 == ""
                    || $scope.Marco.Resultado1 == "" || $scope.Marco.Resultado2 == "" || $scope.Marco.Resultado3 == "" || $scope.Marco.Resultado4 == ""
                     || $scope.Marco.Actividad1 == "" || $scope.Marco.Actividad2 == "" || $scope.Marco.Actividad2 == "" || $scope.Marco.Actividad4 == ""

                    ) {
                    alertify.success("Ups! Faltan campos por completar");
                    return false;
                } else {
                    waitingDialog.show();
                    MarcoLogicoService.GuardarMarco($scope.Marco, function (response) {

                        if (response.success) {
                            waitingDialog.hide();
                            swal({
                                text: 'Registro Exitoso',
                                confirmButtonColor: '#238276',
                                width: '25%'

                            })

                            $location.url("/MarcoL");
                            $rootScope.proyecto.datos.Etapa = 11;
                            $("#btnFinalizar").show();
                            $("#btnGuardarMarco").hide();
                            $("#btnEditarMarco").show();
                          
                        }
                    })
                   
                }
               
            }


          

            MarcoLogicoService.AbrirProyecto($rootScope.proyecto.datos.id, function (response) {
                waitingDialog.show();
                if (response.success) {
                    $rootScope.proyecto.datos.Etapa = response.proyecto.Etapa;

                    if ($rootScope.proyecto.datos.Etapa == 10) {
                        MarcoLogicoService.LLenarMarco($rootScope.proyecto.datos.id, function (response) {

                            if (response.success) {
                                $scope.Marco = response.marco;
                            }
                            waitingDialog.hide();
                        })
                    } else {
                        MarcoLogicoService.ConsultarMarco($rootScope.proyecto.datos.id, function (response) {

                            if (response.success) {
                                $("#btnFinalizar").show();
                                $("#btnEditarMarco").show();
                                $("#btnGuardarMarco").hide();
                                $scope.Marco = response.marco;
                            }
                            waitingDialog.hide();
                        })
                    }
                }
                
            })

            $scope.Finalizar = function() {
                $("#containerMarcoLogico ").hide();
                $("#menuAyuda").hide();
                $("#ContainerFinal ").show();
                $("#menuAyuda2 ").show();
             
            }

         

            $scope.abrirReporte1= function () {
                $location.url("/Reporte");
            }

        }]);