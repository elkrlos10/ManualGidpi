//var _0x3c71=['style','width','#imgEfecto','src','img/lineaU','.png','setAttribute','img/sinLinea.png','#imgCausa','img/lineaD','#efectoIndirecto\x20li:nth-child(','#causaIndirecta\x20li:nth-child(',')\x20div','efecto','innerHTML','indirecto','.bloque\x20div\x20span','causa','img','#modal','display','block','none','.contenidoModal','top','-25%','CausasTotales','EfectosTotales','EfectosIndTotales','IdProyecto','AbrirProyecto','success','Etapa','DetalleMat','arbol','Consejo.','En\x20el\x20panel\x20de\x20la\x20izquierda\x20podras\x20crear\x20las\x20causas\x20y\x20efectos.','each','Criterio','Punto\x20Critico','#txtProblema','value','Pasivos','push','Activos','CausasIndTotales','createElement','div','textarea','<span></span><h6\x20class=\x27borrarElemento\x27\x20onclick=\x27borrarElemento(this)\x27>\x20Borrar</h6>','bloque','class','txtBloque2','maxlength','appendChild','#imgEfecto3','span','Problema','bloque2','txtBloque3','140','li:nth-child(',')\x20div:last-child','li:last-child\x20div:last-child','<h6\x20class=\x27borrarElemento\x27\x20onclick=\x27borrarElemento2(this)\x27>\x20Borrar</h6>','#crearProblemaCentral','AsignarProblemaCentral','#txtProblemaInicial','Debes\x20ingresar\x20un\x20problema\x20central','#238276','25%','hide','ConsultarArbolFinal','ProblemaCentral','ArbolFinal','Efectos','Efecto','EfectoIndirecta','Causas','Causa','#imgCausa3','CausaIndirecta','log','#guardar','-100%','30px','Ocultar','cambioElemento','#elemento','#asignarIndirecta','<option\x20value=\x22vacio\x22>Seleccionar...</option>','efectoIndirecto','#indirecta','#txtIndirecta','Asiga\x20tu\x20causa\x20indirecta\x20a\x20una\x20causa\x20según\x20su\x20posición.','font-size:80%;','font-size:60%;','.txtBloque3','css','font-size:150px;','font-size:50%;','font-size:30%;','crear','vacio','Recuerda.','causaIndirecta','Debes\x20seleccionar\x20un\x20efecto\x20o\x20una\x20causa\x20primero.','font-size:10px;','Ya\x20tienes\x205\x20efectos.','Ya\x20tienes\x205\x20causas.','Ya\x20tienes\x203\x20efectos\x20indirectos.','Ya\x20tienes\x203\x20causas\x20indirectas.','guardar','#efecto\x20li:nth-child(',')\x20textarea','Ups!\x20tienes\x20algún\x20efecto\x20vacio','#causa\x20li:nth-child(','indirecto\x20div:nth-child(','Ups!\x20tienes\x20algún\x20efecto\x20indirecto\x20vacio','indirecto\x20div','#causa','Ups!\x20tienes\x20alguna\x20causa\x20indirecta\x20vacia','debes\x20agregar\x20una\x20causa\x20o\x20un\x20efecto\x20como\x20minimo','show','replace','data:application/octet-stream','imagen','GuardarDatosArbol','Registro\x20Exitoso','url','atras','/Menu','.notify','controller','ArbolProblemaController','$rootScope','$location','ArbolProblemaService','$cookies','MenuService','$routeParams','$sce','Arbol','datos','ObjArbol','proyecto','DatosProyecto','PauseAudio','getElementById','audio-player','pause','mozRequestAnimationFrame','msRequestAnimationFrame','#panel','querySelector','#mostrarPanel\x20h6','#alerta','#efecto','#efectoIndirecto','#causaIndirecta','querySelectorAll','#efecto\x20li','#causa\x20li','#efectoIndirecto\x20li','#imgEfecto3\x20img','#imgCausa3\x20img','length'];(function(_0x36bed7,_0x16c478){var _0x26e32b=function(_0x4fe93b){while(--_0x4fe93b){_0x36bed7['push'](_0x36bed7['shift']());}};_0x26e32b(++_0x16c478);}(_0x3c71,0x85));var _0x220e=function(_0x4340cc,_0x31e3a3){_0x4340cc=_0x4340cc-0x0;var _0x4eb87b=_0x3c71[_0x4340cc];return _0x4eb87b;};ManualApp[_0x220e('0x0')](_0x220e('0x1'),['$scope',_0x220e('0x2'),_0x220e('0x3'),_0x220e('0x4'),_0x220e('0x5'),'$cookieStore',_0x220e('0x6'),_0x220e('0x7'),_0x220e('0x8'),function(_0x25e3c2,_0x162a59,_0x45dd2b,_0x4dcf04,_0x196c7a,_0x2da435,_0x1a72e0,_0x568a74,_0x156032){VideoDemo=0x1;_0x25e3c2[_0x220e('0x9')]={'IdProyecto':_0x162a59['proyecto'][_0x220e('0xa')]['id'],'IdMatriz':'','ProblemaGeneral':'','DetalleMat':[{'Problema':'','EjeX':'','EjeY':'','Criterio':''}]};_0x25e3c2[_0x220e('0xb')]={'IdProyecto':_0x162a59[_0x220e('0xc')][_0x220e('0xa')]['id'],'ObjetivoCentral':'','imagen':'','Causas':[{'Causa':'','CausaIndirecta':[{'indirecta':''}]}],'Efectos':[{'Efecto':'','EfectoIndirecta':[{'indirecto':''}]}]};_0x25e3c2[_0x220e('0xd')]={'id':'','Tema':'','IdUsuario':'','Etapa':''};_0x25e3c2[_0x220e('0xe')]=function(){setTimeout(function(){var _0x34cf16=document[_0x220e('0xf')](_0x220e('0x10'));_0x34cf16[_0x220e('0x11')]();},0x3e8);};var _0x1fc892=window['requestAnimationFrame']||window[_0x220e('0x12')]||window['webkitRequestAnimationFrame']||window[_0x220e('0x13')];var _0x342271=document['querySelector'](_0x220e('0x14'));var _0x528c8e=document[_0x220e('0x15')](_0x220e('0x16'));var _0x528782=document['querySelector'](_0x220e('0x17'));var _0x5707a1=!![],_0x394608,_0x27bc7d,_0x31e9b3,_0x4290c5,_0x13dff0,_0x2abc28,_0x5474ad,_0x2b91ad,_0x4f323b,_0x39de09,_0x44a530,_0x3712d0;var _0x59d2c;_0x13dff0=document[_0x220e('0x15')](_0x220e('0x18'));_0x2abc28=document[_0x220e('0x15')]('#causa');efectoIndirectoUl=document['querySelector'](_0x220e('0x19'));causaIndirectaUl=document['querySelector'](_0x220e('0x1a'));function _0x1d9a17(){efectos=document[_0x220e('0x1b')](_0x220e('0x1c'));causas=document[_0x220e('0x1b')](_0x220e('0x1d'));efectosIndirectos=document[_0x220e('0x1b')](_0x220e('0x1e'));causasIndirectas=document[_0x220e('0x1b')]('#causaIndirecta\x20li');_0x59d2c=document[_0x220e('0x1b')](_0x220e('0x1f'));_0x44a530=document[_0x220e('0x1b')](_0x220e('0x20'));if(efectosIndirectos[_0x220e('0x21')]==0x1){_0x59d2c[0x0][_0x220e('0x22')][_0x220e('0x23')]=0x32+'%';}else{for(var _0x30014e=0x0;_0x30014e<_0x59d2c[_0x220e('0x21')];_0x30014e++){_0x59d2c[_0x30014e][_0x220e('0x22')][_0x220e('0x23')]=0x64/efectos[_0x220e('0x21')]+'%';}}if(causasIndirectas[_0x220e('0x21')]==0x1){_0x44a530[0x0][_0x220e('0x22')][_0x220e('0x23')]=0x32+'%';}else{for(var _0x30014e=0x0;_0x30014e<_0x44a530[_0x220e('0x21')];_0x30014e++){_0x44a530[_0x30014e][_0x220e('0x22')][_0x220e('0x23')]=0x64/causas['length']+'%';}}for(var _0x30014e=0x0;_0x30014e<efectos[_0x220e('0x21')];_0x30014e++){efectos[_0x30014e][_0x220e('0x22')][_0x220e('0x23')]=0x64/efectos['length']+'%';}for(var _0x30014e=0x0;_0x30014e<causas[_0x220e('0x21')];_0x30014e++){causas[_0x30014e]['style'][_0x220e('0x23')]=0x64/causas[_0x220e('0x21')]+'%';}if(efectosIndirectos[_0x220e('0x21')]==0x1){efectosIndirectos[0x0][_0x220e('0x22')]['width']=0x32+'%';}else{for(var _0x30014e=0x0;_0x30014e<efectosIndirectos[_0x220e('0x21')];_0x30014e++){efectosIndirectos[_0x30014e][_0x220e('0x22')][_0x220e('0x23')]=0x64/efectos[_0x220e('0x21')]+'%';}}if(causasIndirectas[_0x220e('0x21')]==0x1){causasIndirectas[0x0][_0x220e('0x22')][_0x220e('0x23')]=0x32+'%';}else{for(var _0x30014e=0x0;_0x30014e<causasIndirectas[_0x220e('0x21')];_0x30014e++){causasIndirectas[_0x30014e][_0x220e('0x22')][_0x220e('0x23')]=0x64/causas[_0x220e('0x21')]+'%';}}if(efectos[_0x220e('0x21')]!=0x0){document[_0x220e('0x15')](_0x220e('0x24'))['setAttribute'](_0x220e('0x25'),_0x220e('0x26')+efectos[_0x220e('0x21')]+_0x220e('0x27'));}else{document[_0x220e('0x15')](_0x220e('0x24'))[_0x220e('0x28')]('src',_0x220e('0x29'));}if(causas[_0x220e('0x21')]!=0x0){document[_0x220e('0x15')](_0x220e('0x2a'))[_0x220e('0x28')](_0x220e('0x25'),_0x220e('0x2b')+causas[_0x220e('0x21')]+_0x220e('0x27'));}else{document[_0x220e('0x15')](_0x220e('0x2a'))[_0x220e('0x28')](_0x220e('0x25'),_0x220e('0x29'));}var _0x34b59b=document[_0x220e('0x1b')](_0x220e('0x1f'));if(_0x34b59b[_0x220e('0x21')]!=0x0){for(var _0x30014e=0x0;_0x30014e<_0x34b59b[_0x220e('0x21')];_0x30014e++){var _0x53b8ee=document[_0x220e('0x1b')](_0x220e('0x2c')+(_0x30014e+0x1)+')\x20div');if(_0x53b8ee[_0x220e('0x21')]!=0x0){_0x34b59b[_0x30014e][_0x220e('0x28')]('src',_0x220e('0x26')+_0x53b8ee[_0x220e('0x21')]+_0x220e('0x27'));}else{_0x34b59b[_0x30014e]['setAttribute'](_0x220e('0x25'),_0x220e('0x29'));}}}var _0x36c204=document[_0x220e('0x1b')](_0x220e('0x20'));if(_0x36c204[_0x220e('0x21')]!=0x0){for(var _0x30014e=0x0;_0x30014e<_0x36c204[_0x220e('0x21')];_0x30014e++){var _0x53b8ee=document[_0x220e('0x1b')](_0x220e('0x2d')+(_0x30014e+0x1)+_0x220e('0x2e'));if(_0x53b8ee[_0x220e('0x21')]!=0x0){_0x36c204[_0x30014e][_0x220e('0x28')](_0x220e('0x25'),'img/lineaD'+_0x53b8ee[_0x220e('0x21')]+'.png');}else{_0x36c204[_0x30014e][_0x220e('0x28')](_0x220e('0x25'),_0x220e('0x29'));}}}for(var _0x30014e=0x0;_0x30014e<efectos[_0x220e('0x21')];_0x30014e++){efectos[_0x30014e][_0x220e('0x28')]('id',_0x220e('0x2f')+(_0x30014e+0x1));efectos[_0x30014e][_0x220e('0x15')]('.bloque\x20div\x20span')[_0x220e('0x30')]=_0x30014e+0x1+'.';_0x59d2c[_0x30014e][_0x220e('0x28')]('id',_0x220e('0x2f')+(_0x30014e+0x1)+'img');efectosIndirectos[_0x30014e][_0x220e('0x28')]('id',_0x220e('0x2f')+(_0x30014e+0x1)+_0x220e('0x31'));}for(var _0x30014e=0x0;_0x30014e<causas['length'];_0x30014e++){causas[_0x30014e]['setAttribute']('id','causa'+(_0x30014e+0x1));causas[_0x30014e][_0x220e('0x15')](_0x220e('0x32'))[_0x220e('0x30')]=_0x30014e+0x1+'.';_0x44a530[_0x30014e][_0x220e('0x28')]('id',_0x220e('0x33')+(_0x30014e+0x1)+_0x220e('0x34'));causasIndirectas[_0x30014e][_0x220e('0x28')]('id',_0x220e('0x33')+(_0x30014e+0x1)+_0x220e('0x31'));}_0x1fc892(_0x1d9a17);}_0x1fc892(_0x1d9a17);function _0x5d0f76(_0x34592a){document[_0x220e('0x15')](_0x220e('0x35'))[_0x220e('0x22')][_0x220e('0x36')]=_0x220e('0x37');document[_0x220e('0x15')](_0x34592a)[_0x220e('0x22')][_0x220e('0x36')]=_0x220e('0x37');}function _0x54df54(){document[_0x220e('0x15')](_0x220e('0x35'))[_0x220e('0x22')][_0x220e('0x36')]=_0x220e('0x38');var _0x10b882=document[_0x220e('0x1b')](_0x220e('0x39'));for(var _0x285740=0x0;_0x285740<_0x10b882[_0x220e('0x21')];_0x285740++){_0x10b882[_0x285740][_0x220e('0x22')][_0x220e('0x36')]=_0x220e('0x38');}}function _0x283d5d(_0x3f9384,_0x21f439,_0xf5d5a8){_0x528782[_0x220e('0x22')][_0x220e('0x3a')]='5%';_0x528782['querySelector']('h3')[_0x220e('0x30')]=_0x3f9384;_0x528782[_0x220e('0x15')]('p')[_0x220e('0x30')]=_0x21f439;setTimeout(function(){_0x528782[_0x220e('0x22')][_0x220e('0x3a')]=_0x220e('0x3b');},_0xf5d5a8*0x3e8);}var _0x4f38c0=0x0;var _0x5bfaa4=0x0;_0x25e3c2[_0x220e('0x3c')]=[];_0x25e3c2[_0x220e('0x3d')]=[];_0x25e3c2['CausasIndTotales']=[];_0x25e3c2[_0x220e('0x3e')]=[];_0x25e3c2[_0x220e('0x3f')]=_0x162a59[_0x220e('0xc')][_0x220e('0xa')]['id'];_0x1a72e0[_0x220e('0x40')](_0x25e3c2[_0x220e('0x3f')],function(_0xac03e5){waitingDialog['show']();if(_0xac03e5[_0x220e('0x41')]){_0x25e3c2[_0x220e('0xd')]=_0xac03e5[_0x220e('0xc')];if(_0x162a59[_0x220e('0xc')]!=undefined){if(_0x25e3c2[_0x220e('0xd')][_0x220e('0x42')]<0x3){_0x4dcf04['ArbolProblemaProyecto'](_0x162a59[_0x220e('0xc')][_0x220e('0xa')]['id'],function(_0x42b989){if(_0x42b989['success']==!![]){if(_0x42b989['arbol']!=null){_0x25e3c2[_0x220e('0x9')][_0x220e('0x43')]=_0x42b989[_0x220e('0x44')][_0x220e('0x43')];var _0x454e26=_0x42b989[_0x220e('0x44')]['ProblemaGeneral'];_0x283d5d(_0x220e('0x45'),_0x220e('0x46'),0x5);$[_0x220e('0x47')](_0x25e3c2[_0x220e('0x9')][_0x220e('0x43')],function(_0x57336f,_0x350e9e){if(_0x350e9e[_0x220e('0x48')]==_0x220e('0x49')){var _0x4c31e4=_0x350e9e['Problema'];document[_0x220e('0x15')](_0x220e('0x4a'))[_0x220e('0x4b')]=_0x4c31e4;}if(_0x350e9e['Criterio']==_0x220e('0x4c')){if(_0x4f38c0<0x5){_0x25e3c2[_0x220e('0x3d')][_0x220e('0x4d')](_0x350e9e);_0x4f38c0++;}else{_0x25e3c2[_0x220e('0x3e')][_0x220e('0x4d')](_0x350e9e);}}if(_0x350e9e['Criterio']==_0x220e('0x4e')){if(_0x5bfaa4<0x5){_0x25e3c2[_0x220e('0x3c')][_0x220e('0x4d')](_0x350e9e);_0x5bfaa4++;}else{_0x25e3c2[_0x220e('0x4f')][_0x220e('0x4d')](_0x350e9e);}}});$[_0x220e('0x47')](_0x25e3c2[_0x220e('0x3d')],function(_0x5d83d8,_0x393910){if(_0x5d83d8<0x5){_0x4f323b=document[_0x220e('0x50')]('img');elemento=document[_0x220e('0x50')]('li');elemento2=document[_0x220e('0x50')]('li');bloque=document[_0x220e('0x50')](_0x220e('0x51'));borrar=document['createElement'](_0x220e('0x51'));txtArea=document[_0x220e('0x50')](_0x220e('0x52'));txtArea[_0x220e('0x4b')]=_0x393910['Problema'];borrar['innerHTML']=_0x220e('0x53');bloque[_0x220e('0x28')]('class',_0x220e('0x54'));txtArea[_0x220e('0x28')](_0x220e('0x55'),_0x220e('0x56'));txtArea['setAttribute'](_0x220e('0x57'),'140');_0x13dff0['appendChild'](elemento)[_0x220e('0x58')](bloque)['appendChild'](borrar);_0x13dff0[_0x220e('0x15')]('li:last-child\x20div:last-child')[_0x220e('0x58')](txtArea);document[_0x220e('0x15')](_0x220e('0x59'))[_0x220e('0x58')](_0x4f323b);document[_0x220e('0x15')](_0x220e('0x19'))[_0x220e('0x58')](elemento2);}});var _0x4adbbf=0x1;$[_0x220e('0x47')](_0x25e3c2[_0x220e('0x3e')],function(_0x1fed81,_0x1152fd){if(_0x1fed81==0x3||_0x1fed81==0x6||_0x1fed81==0x9||_0x1fed81==0xc){_0x4adbbf++;}bloque=document[_0x220e('0x50')](_0x220e('0x51'));borrar=document[_0x220e('0x50')](_0x220e('0x5a'));txtArea=document[_0x220e('0x50')](_0x220e('0x52'));txtArea[_0x220e('0x4b')]=_0x1152fd[_0x220e('0x5b')];borrar[_0x220e('0x30')]='<h6\x20class=\x27borrarElemento\x27\x20onclick=\x27borrarElemento2(this)\x27>\x20Borrar</h6>';bloque[_0x220e('0x28')]('class',_0x220e('0x5c'));txtArea[_0x220e('0x28')]('class',_0x220e('0x5d'));txtArea['setAttribute'](_0x220e('0x57'),_0x220e('0x5e'));efectoIndirectoUl[_0x220e('0x15')](_0x220e('0x5f')+_0x4adbbf+')')[_0x220e('0x58')](bloque)[_0x220e('0x58')](txtArea);efectoIndirectoUl[_0x220e('0x15')](_0x220e('0x5f')+_0x4adbbf+_0x220e('0x60'))[_0x220e('0x58')](borrar);});$[_0x220e('0x47')](_0x25e3c2['CausasTotales'],function(_0x20beba,_0x1e5be8){if(_0x20beba<0x5){_0x4f323b=document[_0x220e('0x50')](_0x220e('0x34'));elemento=document[_0x220e('0x50')]('li');elemento2=document[_0x220e('0x50')]('li');bloque=document[_0x220e('0x50')](_0x220e('0x51'));borrar=document[_0x220e('0x50')](_0x220e('0x51'));txtArea=document[_0x220e('0x50')](_0x220e('0x52'));txtArea[_0x220e('0x4b')]=_0x1e5be8['Problema'];borrar[_0x220e('0x30')]=_0x220e('0x53');bloque['setAttribute'](_0x220e('0x55'),_0x220e('0x54'));txtArea[_0x220e('0x28')]('class',_0x220e('0x56'));txtArea[_0x220e('0x28')]('maxlength',_0x220e('0x5e'));_0x2abc28[_0x220e('0x58')](elemento)['appendChild'](bloque)[_0x220e('0x58')](borrar);_0x2abc28['querySelector'](_0x220e('0x61'))[_0x220e('0x58')](txtArea);document['querySelector']('#imgCausa3')['appendChild'](_0x4f323b);document[_0x220e('0x15')]('#causaIndirecta')['appendChild'](elemento2);}});var _0x4585cd=0x1;$['each'](_0x25e3c2[_0x220e('0x4f')],function(_0x47f9ea,_0x66b91a){if(_0x47f9ea==0x3||_0x47f9ea==0x6||_0x47f9ea==0x9||_0x47f9ea==0xc){_0x4585cd++;}bloque=document[_0x220e('0x50')](_0x220e('0x51'));borrar=document[_0x220e('0x50')]('span');txtArea=document[_0x220e('0x50')]('textarea');txtArea['value']=_0x66b91a['Problema'];borrar['innerHTML']=_0x220e('0x62');bloque[_0x220e('0x28')](_0x220e('0x55'),_0x220e('0x5c'));txtArea[_0x220e('0x28')](_0x220e('0x55'),_0x220e('0x5d'));txtArea[_0x220e('0x28')](_0x220e('0x57'),'140');causaIndirectaUl[_0x220e('0x15')]('li:nth-child('+_0x4585cd+')')[_0x220e('0x58')](bloque)[_0x220e('0x58')](txtArea);causaIndirectaUl[_0x220e('0x15')](_0x220e('0x5f')+_0x4585cd+_0x220e('0x60'))[_0x220e('0x58')](borrar);});}else{_0x5d0f76(_0x220e('0x63'));_0x25e3c2[_0x220e('0x64')]=function(){var _0x4f3583=document[_0x220e('0x15')](_0x220e('0x65'))['value'];if(_0x4f3583[_0x220e('0x21')]==0x0||_0x4f3583=='\x20'){swal({'text':_0x220e('0x66'),'confirmButtonColor':_0x220e('0x67'),'width':_0x220e('0x68')});}else{document[_0x220e('0x15')](_0x220e('0x4a'))[_0x220e('0x4b')]=_0x4f3583;_0x54df54();_0x283d5d(_0x220e('0x45'),'En\x20el\x20panel\x20de\x20la\x20izquierda\x20podras\x20crear\x20las\x20causas\x20y\x20efectos.',0x5);}};}}waitingDialog[_0x220e('0x69')]();});}else{_0x4dcf04[_0x220e('0x6a')](_0x162a59[_0x220e('0xc')][_0x220e('0xa')]['id'],function(_0x43546f){if(_0x43546f[_0x220e('0x41')]){var _0xf50091=_0x43546f['ArbolFinal'][_0x220e('0x6b')];document['querySelector'](_0x220e('0x4a'))[_0x220e('0x4b')]=_0xf50091;_0x283d5d(_0x220e('0x45'),_0x220e('0x46'),0x5);$[_0x220e('0x47')](_0x43546f[_0x220e('0x6c')][_0x220e('0x6d')],function(_0x44332e,_0x1fff68){_0x4f323b=document[_0x220e('0x50')](_0x220e('0x34'));elemento=document[_0x220e('0x50')]('li');elemento2=document[_0x220e('0x50')]('li');bloque=document[_0x220e('0x50')](_0x220e('0x51'));borrar=document['createElement'](_0x220e('0x51'));txtArea=document[_0x220e('0x50')](_0x220e('0x52'));txtArea[_0x220e('0x4b')]=_0x1fff68[_0x220e('0x6e')];borrar[_0x220e('0x30')]=_0x220e('0x53');bloque[_0x220e('0x28')](_0x220e('0x55'),_0x220e('0x54'));txtArea[_0x220e('0x28')]('class','txtBloque2');txtArea['setAttribute'](_0x220e('0x57'),_0x220e('0x5e'));_0x13dff0['appendChild'](elemento)[_0x220e('0x58')](bloque)[_0x220e('0x58')](borrar);_0x13dff0[_0x220e('0x15')](_0x220e('0x61'))[_0x220e('0x58')](txtArea);document[_0x220e('0x15')](_0x220e('0x59'))[_0x220e('0x58')](_0x4f323b);document[_0x220e('0x15')](_0x220e('0x19'))['appendChild'](elemento2);$[_0x220e('0x47')](_0x1fff68[_0x220e('0x6f')],function(_0x1a291c,_0x5378af){_0x25e3c2[_0x220e('0x3e')][_0x220e('0x4d')]({'id':_0x44332e,'EfectoIndirecta':_0x1fff68[_0x220e('0x6f')][_0x1a291c]});});});console['log'](_0x25e3c2[_0x220e('0x3e')]);var _0x112be2=0x0;$[_0x220e('0x47')](_0x25e3c2['EfectosIndTotales'],function(_0x13e123,_0x5bbeca){_0x112be2=_0x5bbeca['id']+0x1;bloque=document[_0x220e('0x50')](_0x220e('0x51'));borrar=document[_0x220e('0x50')](_0x220e('0x5a'));txtArea=document[_0x220e('0x50')]('textarea');txtArea['value']=_0x5bbeca[_0x220e('0x6f')];borrar[_0x220e('0x30')]=_0x220e('0x62');bloque[_0x220e('0x28')]('class',_0x220e('0x5c'));txtArea[_0x220e('0x28')](_0x220e('0x55'),_0x220e('0x5d'));txtArea[_0x220e('0x28')]('maxlength',_0x220e('0x5e'));efectoIndirectoUl[_0x220e('0x15')](_0x220e('0x5f')+_0x112be2+')')[_0x220e('0x58')](bloque)[_0x220e('0x58')](txtArea);efectoIndirectoUl[_0x220e('0x15')](_0x220e('0x5f')+_0x112be2+_0x220e('0x60'))['appendChild'](borrar);});$['each'](_0x43546f[_0x220e('0x6c')][_0x220e('0x70')],function(_0x2a4d74,_0xd18bf1){_0x4f323b=document[_0x220e('0x50')](_0x220e('0x34'));elemento=document[_0x220e('0x50')]('li');elemento2=document[_0x220e('0x50')]('li');bloque=document[_0x220e('0x50')](_0x220e('0x51'));borrar=document['createElement'](_0x220e('0x51'));txtArea=document[_0x220e('0x50')]('textarea');txtArea[_0x220e('0x4b')]=_0xd18bf1[_0x220e('0x71')];borrar[_0x220e('0x30')]=_0x220e('0x53');bloque[_0x220e('0x28')]('class','bloque');txtArea[_0x220e('0x28')](_0x220e('0x55'),_0x220e('0x56'));txtArea[_0x220e('0x28')](_0x220e('0x57'),_0x220e('0x5e'));_0x2abc28['appendChild'](elemento)[_0x220e('0x58')](bloque)[_0x220e('0x58')](borrar);_0x2abc28['querySelector']('li:last-child\x20div:last-child')[_0x220e('0x58')](txtArea);document[_0x220e('0x15')](_0x220e('0x72'))[_0x220e('0x58')](_0x4f323b);document[_0x220e('0x15')]('#causaIndirecta')[_0x220e('0x58')](elemento2);$['each'](_0xd18bf1[_0x220e('0x73')],function(_0x5c9189,_0x2c24a3){_0x25e3c2[_0x220e('0x4f')]['push']({'id':_0x2a4d74,'CausaIndirecta':_0xd18bf1[_0x220e('0x73')][_0x5c9189]});});});console[_0x220e('0x74')](_0x25e3c2[_0x220e('0x4f')]);var _0xb79d3c=0x0;$[_0x220e('0x47')](_0x25e3c2[_0x220e('0x4f')],function(_0x4a95f2,_0x52f30){_0xb79d3c=_0x52f30['id']+0x1;bloque=document[_0x220e('0x50')](_0x220e('0x51'));borrar=document[_0x220e('0x50')]('span');txtArea=document[_0x220e('0x50')]('textarea');txtArea[_0x220e('0x4b')]=_0x52f30[_0x220e('0x73')];borrar[_0x220e('0x30')]=_0x220e('0x62');bloque[_0x220e('0x28')](_0x220e('0x55'),_0x220e('0x5c'));txtArea[_0x220e('0x28')]('class',_0x220e('0x5d'));txtArea[_0x220e('0x28')](_0x220e('0x57'),'140');causaIndirectaUl[_0x220e('0x15')]('li:nth-child('+_0xb79d3c+')')[_0x220e('0x58')](bloque)[_0x220e('0x58')](txtArea);causaIndirectaUl['querySelector'](_0x220e('0x5f')+_0xb79d3c+_0x220e('0x60'))[_0x220e('0x58')](borrar);});}$(_0x220e('0x75'))[_0x220e('0x69')]();waitingDialog[_0x220e('0x69')]();});}}}});_0x25e3c2['mostrarPanel']=function(){if(_0x5707a1){_0x342271['style'][_0x220e('0x3a')]=_0x220e('0x76');_0x528c8e[_0x220e('0x30')]='Mostrar';_0x5707a1=![];}else{_0x342271[_0x220e('0x22')]['top']=_0x220e('0x77');_0x528c8e[_0x220e('0x30')]=_0x220e('0x78');_0x5707a1=!![];}};_0x25e3c2[_0x220e('0x79')]=function(){_0x31e9b3=document[_0x220e('0x15')](_0x220e('0x7a'))[_0x220e('0x4b')];document['querySelector'](_0x220e('0x7b'))[_0x220e('0x30')]=_0x220e('0x7c');if(_0x31e9b3==_0x220e('0x7d')){document['querySelector'](_0x220e('0x7e'))[_0x220e('0x22')][_0x220e('0x36')]=_0x220e('0x37');document[_0x220e('0x15')](_0x220e('0x7f'))[_0x220e('0x30')]='efecto';for(var _0x4c7d8c=0x0;_0x4c7d8c<efectos[_0x220e('0x21')];_0x4c7d8c++){var _0x485f44=document[_0x220e('0x50')]('option');_0x485f44[_0x220e('0x30')]=_0x4c7d8c+0x1;_0x485f44['setAttribute']('value',_0x4c7d8c+0x1);document['querySelector'](_0x220e('0x7b'))[_0x220e('0x58')](_0x485f44);_0x283d5d(_0x220e('0x45'),'Asiga\x20tu\x20efecto\x20indirecto\x20a\x20un\x20efecto\x20según\x20su\x20posición.',0x3);}}else if(_0x31e9b3=='causaIndirecta'){document[_0x220e('0x15')](_0x220e('0x7e'))[_0x220e('0x22')][_0x220e('0x36')]='block';document[_0x220e('0x15')](_0x220e('0x7f'))[_0x220e('0x30')]=_0x220e('0x33');for(var _0x4c7d8c=0x0;_0x4c7d8c<causas[_0x220e('0x21')];_0x4c7d8c++){var _0x485f44=document[_0x220e('0x50')]('option');_0x485f44[_0x220e('0x30')]=_0x4c7d8c+0x1;_0x485f44['setAttribute'](_0x220e('0x4b'),_0x4c7d8c+0x1);document[_0x220e('0x15')](_0x220e('0x7b'))[_0x220e('0x58')](_0x485f44);_0x283d5d(_0x220e('0x45'),_0x220e('0x80'),0x3);}}else{document[_0x220e('0x15')](_0x220e('0x7e'))[_0x220e('0x22')]['display']=_0x220e('0x38');}};function _0x1632eb(_0x2dbe69){switch(_0x2dbe69){case 0x1:{letra=_0x220e('0x81');return letra;}case 0x2:{letra=_0x220e('0x82');$(_0x220e('0x83'))[_0x220e('0x84')]({'font-size':_0x220e('0x85')});return letra;}case 0x3:{letra=_0x220e('0x86');return letra;}case 0x4:{letra=_0x220e('0x82');return letra;}case 0x5:{letra=_0x220e('0x87');return letra;}}}_0x25e3c2[_0x220e('0x88')]=function(){_0x5474ad=document['querySelector']('#asignarIndirecta')[_0x220e('0x4b')];var _0x32f8e2,_0xa04ad5,_0xdb8a28;if(_0x31e9b3===_0x220e('0x89')||_0x31e9b3===undefined){_0x283d5d(_0x220e('0x8a'),'Debes\x20seleccionar\x20un\x20efecto\x20o\x20una\x20causa.',0x3);}if(_0x5474ad==_0x220e('0x89')&&_0x31e9b3==_0x220e('0x7d')||_0x31e9b3==_0x220e('0x8b')){_0x283d5d(_0x220e('0x8a'),_0x220e('0x8c'),0x3);}if(_0x31e9b3=='efecto'&&efectos[_0x220e('0x21')]<0x5){_0x4f323b=document[_0x220e('0x50')](_0x220e('0x34'));_0x32f8e2=document['createElement']('li');_0xdb8a28=document[_0x220e('0x50')]('li');bloque=document['createElement'](_0x220e('0x51'));borrar=document['createElement'](_0x220e('0x51'));_0xa04ad5=document[_0x220e('0x50')](_0x220e('0x52'));_0xa04ad5['value']='';borrar[_0x220e('0x30')]=_0x220e('0x53');bloque[_0x220e('0x28')](_0x220e('0x55'),_0x220e('0x54'));_0xa04ad5[_0x220e('0x28')](_0x220e('0x55'),_0x220e('0x56'));_0xa04ad5[_0x220e('0x28')](_0x220e('0x57'),_0x220e('0x5e'));_0xa04ad5[_0x220e('0x28')](_0x220e('0x22'),_0x220e('0x8d'));_0x13dff0['appendChild'](_0x32f8e2)[_0x220e('0x58')](bloque)[_0x220e('0x58')](borrar);_0x13dff0['querySelector'](_0x220e('0x61'))[_0x220e('0x58')](_0xa04ad5);document['querySelector'](_0x220e('0x59'))['appendChild'](_0x4f323b);document[_0x220e('0x15')](_0x220e('0x19'))[_0x220e('0x58')](_0xdb8a28);}else if(_0x31e9b3==_0x220e('0x2f')&&efectos[_0x220e('0x21')]>=0x5){_0x283d5d(_0x220e('0x8a'),_0x220e('0x8e'),0x2);}if(_0x31e9b3==_0x220e('0x33')&&causas['length']<0x5){_0x4f323b=document[_0x220e('0x50')](_0x220e('0x34'));_0x32f8e2=document[_0x220e('0x50')]('li');_0xdb8a28=document[_0x220e('0x50')]('li');bloque=document[_0x220e('0x50')](_0x220e('0x51'));borrar=document[_0x220e('0x50')](_0x220e('0x51'));_0xa04ad5=document[_0x220e('0x50')](_0x220e('0x52'));borrar[_0x220e('0x30')]=_0x220e('0x53');bloque[_0x220e('0x28')](_0x220e('0x55'),_0x220e('0x54'));_0xa04ad5[_0x220e('0x28')](_0x220e('0x55'),_0x220e('0x56'));_0xa04ad5[_0x220e('0x28')](_0x220e('0x57'),'140');_0xa04ad5[_0x220e('0x28')](_0x220e('0x22'),_0x220e('0x8d'));_0x2abc28[_0x220e('0x58')](_0x32f8e2)['appendChild'](bloque)[_0x220e('0x58')](borrar);_0x2abc28[_0x220e('0x15')](_0x220e('0x61'))[_0x220e('0x58')](_0xa04ad5);document['querySelector'](_0x220e('0x72'))[_0x220e('0x58')](_0x4f323b);document[_0x220e('0x15')](_0x220e('0x1a'))[_0x220e('0x58')](_0xdb8a28);}else if(_0x31e9b3==_0x220e('0x33')&&causas[_0x220e('0x21')]>=0x5){_0x283d5d('Recuerda.',_0x220e('0x8f'),0x2);}if(_0x5474ad!=_0x220e('0x89')){if(_0x31e9b3==_0x220e('0x7d')&&document[_0x220e('0x1b')](_0x220e('0x2c')+_0x5474ad+_0x220e('0x2e'))[_0x220e('0x21')]<0x3){bloque=document['createElement'](_0x220e('0x51'));borrar=document[_0x220e('0x50')](_0x220e('0x5a'));_0xa04ad5=document['createElement'](_0x220e('0x52'));borrar[_0x220e('0x30')]=_0x220e('0x62');bloque['setAttribute']('class',_0x220e('0x5c'));_0xa04ad5[_0x220e('0x28')]('class',_0x220e('0x5d'));_0xa04ad5[_0x220e('0x28')](_0x220e('0x57'),_0x220e('0x5e'));_0xa04ad5[_0x220e('0x28')](_0x220e('0x22'),_0x1632eb(efectos[_0x220e('0x21')]));efectoIndirectoUl[_0x220e('0x15')](_0x220e('0x5f')+_0x5474ad+')')[_0x220e('0x58')](bloque)[_0x220e('0x58')](_0xa04ad5);efectoIndirectoUl[_0x220e('0x15')](_0x220e('0x5f')+_0x5474ad+_0x220e('0x60'))['appendChild'](borrar);}else if(document[_0x220e('0x1b')](_0x220e('0x2c')+_0x5474ad+_0x220e('0x2e'))['length']>=0x3){_0x283d5d(_0x220e('0x8a'),_0x220e('0x90'),0x2);}if(_0x31e9b3==_0x220e('0x8b')&&document[_0x220e('0x1b')](_0x220e('0x2d')+_0x5474ad+_0x220e('0x2e'))[_0x220e('0x21')]<0x3){bloque=document['createElement'](_0x220e('0x51'));borrar=document[_0x220e('0x50')](_0x220e('0x5a'));_0xa04ad5=document[_0x220e('0x50')](_0x220e('0x52'));borrar[_0x220e('0x30')]=_0x220e('0x62');bloque[_0x220e('0x28')](_0x220e('0x55'),_0x220e('0x5c'));_0xa04ad5[_0x220e('0x28')](_0x220e('0x55'),_0x220e('0x5d'));_0xa04ad5[_0x220e('0x28')](_0x220e('0x57'),_0x220e('0x5e'));causaIndirectaUl[_0x220e('0x15')](_0x220e('0x5f')+_0x5474ad+')')[_0x220e('0x58')](bloque)[_0x220e('0x58')](_0xa04ad5);causaIndirectaUl[_0x220e('0x15')]('li:nth-child('+_0x5474ad+')\x20div:last-child')[_0x220e('0x58')](borrar);}else if(document[_0x220e('0x1b')](_0x220e('0x2d')+_0x5474ad+')\x20div')[_0x220e('0x21')]>=0x3){_0x283d5d('Recuerda.',_0x220e('0x91'),0x2);}}};_0x25e3c2[_0x220e('0x92')]=function(){var _0x1768a2=document[_0x220e('0x15')](_0x220e('0x4a'))['value'];var _0x36f5bb=[];var _0x4bdc41=[];var _0xfaa7f5=[];var _0x56e3d0=[];for(var _0xe23561=0x0;_0xe23561<efectos[_0x220e('0x21')];_0xe23561++){var _0x2adf53=document['querySelector'](_0x220e('0x93')+(_0xe23561+0x1)+_0x220e('0x94'))[_0x220e('0x4b')];if(_0x2adf53!=''){_0x36f5bb[_0xe23561]=document[_0x220e('0x15')](_0x220e('0x93')+(_0xe23561+0x1)+_0x220e('0x94'))[_0x220e('0x4b')];}else{alertify['success'](_0x220e('0x95'));return;}}for(var _0xe23561=0x0;_0xe23561<causas[_0x220e('0x21')];_0xe23561++){var _0x3de0d5=_0x4bdc41[_0xe23561]=document[_0x220e('0x15')]('#causa\x20li:nth-child('+(_0xe23561+0x1)+')\x20textarea')[_0x220e('0x4b')];if(_0x3de0d5!=''){_0x4bdc41[_0xe23561]=document['querySelector'](_0x220e('0x96')+(_0xe23561+0x1)+_0x220e('0x94'))[_0x220e('0x4b')];}else{alertify['success']('Ups!\x20tienes\x20alguna\x20causa\x20vacia');return;}}for(var _0xe23561=0x0;_0xe23561<efectos[_0x220e('0x21')];_0xe23561++){var _0x2ffc44=[];for(var _0x3aeddc=0x0;_0x3aeddc<document[_0x220e('0x1b')](_0x220e('0x18')+(_0xe23561+0x1)+'indirecto\x20div')[_0x220e('0x21')];_0x3aeddc++){var _0xd19940=_0x2ffc44[_0x3aeddc]=document[_0x220e('0x15')](_0x220e('0x18')+(_0xe23561+0x1)+_0x220e('0x97')+(_0x3aeddc+0x1)+_0x220e('0x94'))[_0x220e('0x4b')];if(_0xd19940!=''){_0x2ffc44[_0x3aeddc]=document['querySelector']('#efecto'+(_0xe23561+0x1)+_0x220e('0x97')+(_0x3aeddc+0x1)+_0x220e('0x94'))[_0x220e('0x4b')];}else{alertify[_0x220e('0x41')](_0x220e('0x98'));return;}}_0xfaa7f5[_0x220e('0x4d')](_0x2ffc44);}for(var _0xe23561=0x0;_0xe23561<causas[_0x220e('0x21')];_0xe23561++){var _0x2ffc44=[];for(var _0x3aeddc=0x0;_0x3aeddc<document[_0x220e('0x1b')]('#causa'+(_0xe23561+0x1)+_0x220e('0x99'))[_0x220e('0x21')];_0x3aeddc++){var _0x2e8b2f=_0x2ffc44[_0x3aeddc]=document[_0x220e('0x15')](_0x220e('0x9a')+(_0xe23561+0x1)+'indirecto\x20div:nth-child('+(_0x3aeddc+0x1)+')\x20textarea')['value'];if(_0x2e8b2f!=''){_0x2ffc44[_0x3aeddc]=document[_0x220e('0x15')](_0x220e('0x9a')+(_0xe23561+0x1)+_0x220e('0x97')+(_0x3aeddc+0x1)+_0x220e('0x94'))[_0x220e('0x4b')];}else{alertify[_0x220e('0x41')](_0x220e('0x9b'));return;}}_0x56e3d0[_0x220e('0x4d')](_0x2ffc44);}_0x25e3c2[_0x220e('0xb')][_0x220e('0x6b')]=_0x1768a2;if(_0x4bdc41[_0x220e('0x21')]>0x0||_0x36f5bb>0x0){$['each'](_0x4bdc41,function(_0x50ee73,_0x20da1b){if(_0x20da1b!=''){_0x25e3c2[_0x220e('0xb')][_0x220e('0x70')][_0x220e('0x4d')]({'Causa':_0x20da1b,'CausaIndirecta':_0x56e3d0[_0x50ee73]});}});$['each'](_0x36f5bb,function(_0x3676e3,_0x1a019c){_0x25e3c2[_0x220e('0xb')][_0x220e('0x6d')]['push']({'Efecto':_0x1a019c,'EfectoIndirecta':_0xfaa7f5[_0x3676e3]});});}else{alert(_0x220e('0x9c'));return;}waitingDialog[_0x220e('0x9d')]();$('#guardar')[_0x220e('0x69')]();$('#tipsArbolProblema')[_0x220e('0x69')]();$('.borrarElemento')[_0x220e('0x69')]();setTimeout(function(){html2canvas($('#arbolContenedor'),{'onrendered':function(_0x102e0e){theCanvas=_0x102e0e;var _0x2170dc=theCanvas['toDataURL']();var _0x414390=_0x2170dc[_0x220e('0x9e')](/^data:image\/png/,_0x220e('0x9f'));_0x25e3c2[_0x220e('0xb')][_0x220e('0xa0')]=_0x2170dc;_0x4dcf04[_0x220e('0xa1')](_0x25e3c2[_0x220e('0xb')],function(_0x30ff06){if(_0x30ff06[_0x220e('0x41')]){waitingDialog[_0x220e('0x69')]();swal({'text':_0x220e('0xa2'),'confirmButtonColor':_0x220e('0x67'),'width':_0x220e('0x68')});_0x45dd2b[_0x220e('0xa3')]('/Menu');}});}});},0x1f4);};_0x25e3c2[_0x220e('0xa4')]=function(){_0x45dd2b[_0x220e('0xa3')](_0x220e('0xa5'));$(_0x220e('0xa6'))[_0x220e('0x69')]();};}]);

ManualApp.controller('ArbolProblemaController',
    ['$scope', '$rootScope', '$location', 'ArbolProblemaService', '$cookies','$cookieStore', 'MenuService', '$routeParams', '$sce',
        function ($scope, $rootScope, $location, ArbolProblemaService, $cookies, $cookieStore, MenuService, $routeParams, $sce) {
            VideoDemo = 1;

            //OBJETOS
            $scope.Arbol = {
                IdProyecto: $rootScope.proyecto.datos.id,
                IdMatriz: "",
                ProblemaGeneral: "",
                DetalleMat: [
                  {
                      Problema: "",
                      EjeX: "",
                      EjeY: "",
                      Criterio: ""
                  }
                ]
            }

            $scope.ObjArbol = {
                IdProyecto: $rootScope.proyecto.datos.id,
                ObjetivoCentral: "",
                imagen:"",
                Causas: [
                  {
                      Causa: "",
                      CausaIndirecta: [
                          {
                              indirecta: ""
                          }
                      ]
                  }
                ],
                Efectos: [
                 {
                     Efecto: "",
                     EfectoIndirecta: [
                         {
                             indirecto: ""
                         }
                     ]
                 }
                ]

            }

            $scope.DatosProyecto = {
                id:"",
                Tema: "",
                IdUsuario: "",
                Etapa:""
            }

            //Funciòn para pausar el audio cuando se abra el video
            $scope.PauseAudio = function () {
                setTimeout(function () {
                    var audio = document.getElementById("audio-player");
                    audio.pause();
                }, 1000);
            }
            //-----------------------------------------------------------------------------------------------------

            //VARIABLE PARA ACTIVAR CICLO INFINITO
            var update = window.requestAnimationFrame || window.mozRequestAnimationFrame ||
                         window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
            var panel = document.querySelector("#panel");
            var textoPanel = document.querySelector("#mostrarPanel h6");
            var alerta = document.querySelector("#alerta");
            var panelOn = true, numEfectos, numeCausas, tipo, txtIndirecto, efecto, causa, indirecto, elementoBorrar, img3, idElementoBorrar, causaImg3, imgBorrar;
            var efectoImg3;



            //CAPTURAR UL
            efecto = document.querySelector("#efecto");
            causa = document.querySelector("#causa");
            efectoIndirectoUl = document.querySelector("#efectoIndirecto");
            causaIndirectaUl = document.querySelector("#causaIndirecta");

            //CICLO INFINITO
            function repetir() {

                //CAPTURAR LA CANTIDAD DE LI
                efectos = document.querySelectorAll("#efecto li");
                causas = document.querySelectorAll("#causa li");
                efectosIndirectos = document.querySelectorAll("#efectoIndirecto li");
                causasIndirectas = document.querySelectorAll("#causaIndirecta li")

                //CAPTURAR IMAGENES 3
                efectoImg3 = document.querySelectorAll("#imgEfecto3 img");
                causaImg3 = document.querySelectorAll("#imgCausa3 img");

                //ANCHO IMAGENES 3
                //efectos indirectos
                if (efectosIndirectos.length == 1) {
                    efectoImg3[0].style.width = 50 + "%";
                } else {
                    for (var i = 0; i < efectoImg3.length; i++) {
                        efectoImg3[i].style.width = 100 / efectos.length + "%";
                    }
                }

                //causas indirectas
                if (causasIndirectas.length == 1) {
                    causaImg3[0].style.width = 50 + "%";
                } else {
                    for (var i = 0; i < causaImg3.length; i++) {
                        causaImg3[i].style.width = 100 / causas.length + "%";
                    }
                }

                //ANCHO DE LI
                //efectos
                for (var i = 0; i < efectos.length; i++) {
                    efectos[i].style.width = 100 / efectos.length + "%";
                }
                //causas
                for (var i = 0; i < causas.length; i++) {
                    causas[i].style.width = 100 / causas.length + "%";
                }
                //efectos indirectos
                if (efectosIndirectos.length == 1) {
                    efectosIndirectos[0].style.width = 50 + "%";
                } else {
                    for (var i = 0; i < efectosIndirectos.length; i++) {
                        efectosIndirectos[i].style.width = 100 / efectos.length + "%";
                    }
                }

                //causas indirectas
                if (causasIndirectas.length == 1) {
                    causasIndirectas[0].style.width = 50 + "%";
                } else {
                    for (var i = 0; i < causasIndirectas.length; i++) {
                        causasIndirectas[i].style.width = 100 / causas.length + "%";
                    }
                }


                //ASIGNAR IMAGENES
                //efectos
                if (efectos.length != 0) {
                    document.querySelector("#imgEfecto").setAttribute("src", "img/lineaU" + efectos.length + ".png");
                } else {

                    document.querySelector("#imgEfecto").setAttribute("src", "img/sinLinea.png");
                }
                //causas
                if (causas.length != 0) {
                    document.querySelector("#imgCausa").setAttribute("src", "img/lineaD" + causas.length + ".png");
                } else {
                    document.querySelector("#imgCausa").setAttribute("src", "img/sinLinea.png");
                }

                //efectos indirectos
                var imgEfectoIndirecto = document.querySelectorAll("#imgEfecto3 img");

                if (imgEfectoIndirecto.length != 0) {
                    for (var i = 0; i < imgEfectoIndirecto.length; i++) {
                        var total = document.querySelectorAll("#efectoIndirecto li:nth-child(" + (i + 1) + ") div");
                        if (total.length != 0) {
                            imgEfectoIndirecto[i].setAttribute("src", "img/lineaU" + total.length + ".png");
                        } else {
                            imgEfectoIndirecto[i].setAttribute("src", "img/sinLinea.png");
                        }
                    }
                }

                //causas indirectas
                var imgCausaIndirecta = document.querySelectorAll("#imgCausa3 img");

                if (imgCausaIndirecta.length != 0) {
                    for (var i = 0; i < imgCausaIndirecta.length; i++) {
                        var total = document.querySelectorAll("#causaIndirecta li:nth-child(" + (i + 1) + ") div");
                        if (total.length != 0) {
                            imgCausaIndirecta[i].setAttribute("src", "img/lineaD" + total.length + ".png");
                        } else {
                            imgCausaIndirecta[i].setAttribute("src", "img/sinLinea.png");
                        }
                    }
                }


                //ASIGANR ID´S Y NUMERO DE POSICION
                for (var i = 0; i < efectos.length; i++) {
                    efectos[i].setAttribute("id", "efecto" + (i + 1));
                    efectos[i].querySelector(".bloque div span").innerHTML = (i + 1) + ".";
                    efectoImg3[i].setAttribute("id", "efecto" + (i + 1) + "img");
                    efectosIndirectos[i].setAttribute("id", "efecto" + (i + 1) + "indirecto");
                }
                for (var i = 0; i < causas.length; i++) {
                    causas[i].setAttribute("id", "causa" + (i + 1));
                    causas[i].querySelector(".bloque div span").innerHTML = (i + 1) + ".";
                    causaImg3[i].setAttribute("id", "causa" + (i + 1) + "img");
                    causasIndirectas[i].setAttribute("id", "causa" + (i + 1) + "indirecto");

                }

                //$(".txtBloque3").css({ "font-size": Tamañoletra(efectos.length) })
                //console.log($(".txtBloque3").css({ "font-size": Tamañoletra(efectos.length) }));

                update(repetir); //entra en la funcion repetir sin salir de la misma, asi crea un ciclo infinito
            }
            update(repetir); //inicia la funcion repetir


            // FUNCIONES QUE ACTIVAN LAS VENTANAS MODALES
            // mostrar
            function modalOn(elemento) {
                //$("#modal").show();
                //$("#arbolContenedor").hide();
                document.querySelector("#modal").style.display = "block";
                document.querySelector(elemento).style.display = "block";
            }
            // ocultar
            function modalOff() {
                document.querySelector("#modal").style.display = "none";
                //$("#arbolContenedor").show();
                var elementosModal = document.querySelectorAll(".contenidoModal");
                for (var i = 0; i < elementosModal.length; i++) {
                    elementosModal[i].style.display = "none";
                }
            }

            //FUNCION DE LAS ALERTAS
            //alerta1 que dura cierto tiempo, tiene 3 parametros (la duracion es en segundos).
            function alerta1(titulo, texto, duracion) {
                alerta.style.top = "5%";
                alerta.querySelector("h3").innerHTML = titulo;
                alerta.querySelector("p").innerHTML = texto;
                setTimeout(function () {
                    alerta.style.top = "-25%";
                }, duracion * 1000)
            }


            //VARIABLES PARA LA CREACIÓN DEL ARBOL
            var contEfeIndir = 0;
            var contCuaIndir = 0;
            $scope.CausasTotales = [];
            $scope.EfectosTotales = [];
            $scope.CausasIndTotales = [];
            $scope.EfectosIndTotales = [];


            //VARIABLE Y FUNCIÓN PARA CONSULTAR EL PROYECTO ACTUALIZADO Y CREAR EL ARBOL DE PROBLEMAS
            $scope.IdProyecto = $rootScope.proyecto.datos.id;
            MenuService.AbrirProyecto($scope.IdProyecto, function (response) {
                waitingDialog.show();
                if (response.success) {
                    $scope.DatosProyecto = response.proyecto;
                    //FUNCIÓN PARA CONSULTAR LOS DATOS DE LA MATRIZ  Y PINTAR EL ARBOL DE PROBLEMAS
                    if ($rootScope.proyecto != undefined) {
                        if ($scope.DatosProyecto.Etapa < 3 ) {
                            ArbolProblemaService.ArbolProblemaProyecto($rootScope.proyecto.datos.id, function (response) {
                                if (response.success == true) {

                                    //APARICION PROBLEMA CENTRAL MODAL
                                    if (response.arbol != null) {

                                        $scope.Arbol.DetalleMat = response.arbol.DetalleMat;
                                        var problemaGeneral = response.arbol.ProblemaGeneral;

                                        alerta1("Consejo.", "En el panel de la izquierda podras crear las causas y efectos.", 5);

                                        //CICLO PARA RECORRER TODOS LOS PROBLEMAS Y SEPARAR CAUSAS Y EFECTOS
                                        $.each($scope.Arbol.DetalleMat, function (index, value) {
                                            if (value.Criterio == "Punto Critico") {
                                                var txtInicial = value.Problema;//capturar texto del problema central en modal
                                                document.querySelector("#txtProblema").value = txtInicial;
                                            }

                                            if (value.Criterio == "Pasivos") {
                                                if (contEfeIndir < 5) {
                                                    $scope.EfectosTotales.push(value);
                                                    contEfeIndir++;
                                                } else {
                                                    $scope.EfectosIndTotales.push(value);
                                                }
                                            }

                                            if (value.Criterio == "Activos") {
                                                if (contCuaIndir < 5) {
                                                    $scope.CausasTotales.push(value);
                                                    contCuaIndir++;
                                                } else {
                                                    $scope.CausasIndTotales.push(value);
                                                }
                                            }
                                        });

                                        //CICLO PARA CREAR LOS EFECTOS EN EL ARBOL
                                        $.each($scope.EfectosTotales, function (index, value) {
                                            if (index < 5) {
                                                img3 = document.createElement("img");
                                                elemento = document.createElement("li");
                                                elemento2 = document.createElement("li");
                                                bloque = document.createElement("div");
                                                borrar = document.createElement("div");
                                                txtArea = document.createElement("textarea");
                                                txtArea.value = value.Problema;
                                                borrar.innerHTML = "<span></span><h6 class='borrarElemento' onclick='borrarElemento(this)'> Borrar</h6>";
                                                bloque.setAttribute("class", "bloque");
                                                txtArea.setAttribute("class", "txtBloque2");
                                                txtArea.setAttribute("maxlength", "140");

                                                efecto.appendChild(elemento).appendChild(bloque).appendChild(borrar);
                                                efecto.querySelector("li:last-child div:last-child").appendChild(txtArea);
                                                document.querySelector("#imgEfecto3").appendChild(img3);
                                                document.querySelector("#efectoIndirecto").appendChild(elemento2);
                                            }

                                        });

                                        //CICLO PARA CREAR EFECTOS INDIRECTOS DEL ARBOL
                                        var indirecto1 = 1
                                        $.each($scope.EfectosIndTotales, function (index, value) {

                                            if (index == 3 || index == 6 || index == 9 || index == 12) {
                                                indirecto1++;
                                            }

                                            bloque = document.createElement("div");
                                            borrar = document.createElement("span");
                                            txtArea = document.createElement("textarea");
                                            txtArea.value = value.Problema;
                                            borrar.innerHTML = "<h6 class='borrarElemento' onclick='borrarElemento2(this)'> Borrar</h6>";
                                            bloque.setAttribute("class", "bloque2");
                                            txtArea.setAttribute("class", "txtBloque3");
                                            txtArea.setAttribute("maxlength", "140");
                                            efectoIndirectoUl.querySelector("li:nth-child(" + indirecto1 + ")").appendChild(bloque).appendChild(txtArea);
                                            efectoIndirectoUl.querySelector("li:nth-child(" + indirecto1 + ") div:last-child").appendChild(borrar);
                                        })

                                        //CICLO PARA CREAR LOS CAUSAS EN EL ARBOL
                                        $.each($scope.CausasTotales, function (index, value) {
                                            if (index < 5) {

                                                img3 = document.createElement("img");
                                                elemento = document.createElement("li");
                                                elemento2 = document.createElement("li");
                                                bloque = document.createElement("div");
                                                borrar = document.createElement("div");
                                                txtArea = document.createElement("textarea");
                                                txtArea.value = value.Problema;
                                                borrar.innerHTML = "<span></span><h6 class='borrarElemento' onclick='borrarElemento(this)'> Borrar</h6>";
                                                bloque.setAttribute("class", "bloque");
                                                txtArea.setAttribute("class", "txtBloque2");
                                                txtArea.setAttribute("maxlength", "140");
                                                causa.appendChild(elemento).appendChild(bloque).appendChild(borrar);
                                                causa.querySelector("li:last-child div:last-child").appendChild(txtArea);
                                                document.querySelector("#imgCausa3").appendChild(img3);
                                                document.querySelector("#causaIndirecta").appendChild(elemento2);
                                            }

                                        });

                                        //CICLO PARA CREAR CAUSAS INDIRECTAS DEL ARBOL
                                        var indirecto = 1
                                        $.each($scope.CausasIndTotales, function (index, value) {

                                            if (index == 3 || index == 6 || index == 9 || index == 12) {
                                                indirecto++;
                                            }

                                            bloque = document.createElement("div");
                                            borrar = document.createElement("span");
                                            txtArea = document.createElement("textarea");
                                            txtArea.value = value.Problema;
                                            borrar.innerHTML = "<h6 class='borrarElemento' onclick='borrarElemento2(this)'> Borrar</h6>";
                                            bloque.setAttribute("class", "bloque2");
                                            txtArea.setAttribute("class", "txtBloque3");
                                            txtArea.setAttribute("maxlength", "140");
                                            causaIndirectaUl.querySelector("li:nth-child(" + indirecto + ")").appendChild(bloque).appendChild(txtArea);
                                            causaIndirectaUl.querySelector("li:nth-child(" + indirecto + ") div:last-child").appendChild(borrar);

                                        })


                                    } else {
                                        modalOn("#crearProblemaCentral");

                                        //ASIGNAR EL PROBLEMA CENTRAL PRIMERA VEZ
                                        $scope.AsignarProblemaCentral = function () {
                                            var txtInicial = document.querySelector("#txtProblemaInicial").value; //capturar texto del problema central en modal
                                            if (txtInicial.length == 0 || txtInicial == " ") { //validar si viene vacio
                                                swal({
                                                    text: 'Debes ingresar un problema central',
                                                    confirmButtonColor: '#238276',
                                                    width: '25%'

                                                })


                                            } else {
                                                document.querySelector("#txtProblema").value = txtInicial;
                                                modalOff();
                                                alerta1("Consejo.", "En el panel de la izquierda podras crear las causas y efectos.", 5);
                                            }
                                        }
                                        //document.querySelector("#btnProblemaCentral").addEventListener("click", function () {
                                        //    var txtInicial = document.querySelector("#txtProblemaInicial").value; //capturar texto del problema central en modal
                                        //    if (txtInicial.length == 0 || txtInicial == " ") { //validar si viene vacio
                                        //        swal({
                                        //            text: 'Debes ingresar un problema central',
                                        //            confirmButtonColor: '#238276',
                                        //            width: '25%'

                                        //        })

                                                
                                        //    } else {
                                        //        document.querySelector("#txtProblema").value = txtInicial;
                                        //        modalOff();
                                        //        alerta1("Consejo.", "En el panel de la izquierda podras crear las causas y efectos.", 5);
                                        //    }
                                        //});
                                    }
                                }
                                waitingDialog.hide();
                            })
                        } else {
                            ArbolProblemaService.ConsultarArbolFinal($rootScope.proyecto.datos.id, function (response) {
                                if (response.success) {

                                    var problemaGeneral = response.ArbolFinal.ProblemaCentral;
                                    document.querySelector("#txtProblema").value = problemaGeneral;
                                    alerta1("Consejo.", "En el panel de la izquierda podras crear las causas y efectos.", 5);

                                    //CICLO PARA CREAR LOS EFECTOS EN EL ARBOL
                                    $.each(response.ArbolFinal.Efectos, function (index, value) {

                                        img3 = document.createElement("img");
                                        elemento = document.createElement("li");
                                        elemento2 = document.createElement("li");
                                        bloque = document.createElement("div");
                                        borrar = document.createElement("div");
                                        txtArea = document.createElement("textarea");
                                        txtArea.value = value.Efecto;
                                        borrar.innerHTML = "<span></span><h6 class='borrarElemento' onclick='borrarElemento(this)'> Borrar</h6>";
                                        bloque.setAttribute("class", "bloque");
                                        txtArea.setAttribute("class", "txtBloque2");
                                        txtArea.setAttribute("maxlength", "140");
                                        efecto.appendChild(elemento).appendChild(bloque).appendChild(borrar);
                                        efecto.querySelector("li:last-child div:last-child").appendChild(txtArea);
                                        document.querySelector("#imgEfecto3").appendChild(img3);
                                        document.querySelector("#efectoIndirecto").appendChild(elemento2);


                                        $.each(value.EfectoIndirecta, function (index1, value1) {
                                            $scope.EfectosIndTotales.push({ id: index, EfectoIndirecta: value.EfectoIndirecta[index1] })
                                        })

                                     
                                    });

                                    //CICLO PARA CREAR EFECTOS INDIRECTOS DEL ARBOL
                                    console.log($scope.EfectosIndTotales);
                                    var indirecto1 = 0;
                                    $.each($scope.EfectosIndTotales, function (index, value) {

                                        indirecto1 = (value.id) + 1;

                                        bloque = document.createElement("div");
                                        borrar = document.createElement("span");
                                        txtArea = document.createElement("textarea");
                                        txtArea.value = value.EfectoIndirecta;
                                        borrar.innerHTML = "<h6 class='borrarElemento' onclick='borrarElemento2(this)'> Borrar</h6>";
                                        bloque.setAttribute("class", "bloque2");
                                        txtArea.setAttribute("class", "txtBloque3");
                                        txtArea.setAttribute("maxlength", "140");
                                        efectoIndirectoUl.querySelector("li:nth-child(" + indirecto1 + ")").appendChild(bloque).appendChild(txtArea);
                                        efectoIndirectoUl.querySelector("li:nth-child(" + indirecto1 + ") div:last-child").appendChild(borrar);
                                    })

                                    //CICLO PARA CREAR LOS CAUSAS EN EL ARBOL
                                    $.each(response.ArbolFinal.Causas, function (index, value) {

                                        img3 = document.createElement("img");
                                        elemento = document.createElement("li");
                                        elemento2 = document.createElement("li");
                                        bloque = document.createElement("div");
                                        borrar = document.createElement("div");
                                        txtArea = document.createElement("textarea");
                                        txtArea.value = value.Causa;
                                        borrar.innerHTML = "<span></span><h6 class='borrarElemento' onclick='borrarElemento(this)'> Borrar</h6>";
                                        bloque.setAttribute("class", "bloque");
                                        txtArea.setAttribute("class", "txtBloque2");
                                        txtArea.setAttribute("maxlength", "140");
                                        causa.appendChild(elemento).appendChild(bloque).appendChild(borrar);
                                        causa.querySelector("li:last-child div:last-child").appendChild(txtArea);
                                        document.querySelector("#imgCausa3").appendChild(img3);
                                        document.querySelector("#causaIndirecta").appendChild(elemento2);

                                        $.each(value.CausaIndirecta, function (index1, value1) {
                                            $scope.CausasIndTotales.push({ id: index, CausaIndirecta: value.CausaIndirecta[index1] })
                                        })
                                    });

                                    console.log($scope.CausasIndTotales);
                                    //CICLO PARA CREAR CAUSAS INDIRECTAS DEL ARBOL
                                    var indirecto = 0;
                                    $.each($scope.CausasIndTotales, function (index, value) {
                                        indirecto = (value.id) + 1;

                                        bloque = document.createElement("div");
                                        borrar = document.createElement("span");
                                        txtArea = document.createElement("textarea");
                                        txtArea.value = value.CausaIndirecta;
                                        borrar.innerHTML = "<h6 class='borrarElemento' onclick='borrarElemento2(this)'> Borrar</h6>";
                                        bloque.setAttribute("class", "bloque2");
                                        txtArea.setAttribute("class", "txtBloque3");
                                        txtArea.setAttribute("maxlength", "140");
                                        causaIndirectaUl.querySelector("li:nth-child(" + indirecto + ")").appendChild(bloque).appendChild(txtArea);
                                        causaIndirectaUl.querySelector("li:nth-child(" + indirecto + ") div:last-child").appendChild(borrar);
                                       
                                    })


                                }
                                $("#guardar").hide();
                                waitingDialog.hide();
                            })
                        }
                    }

                }

            })
            

            //FUNCION PARA MOSTRAR Y OCULTAR EL PANEL
            $scope.mostrarPanel = function () {
                if (panelOn) {
                    panel.style.top = "-100%";
                    textoPanel.innerHTML = "Mostrar";
                    panelOn = false;
                } else {
                    panel.style.top = "30px";
                    textoPanel.innerHTML = "Ocultar";
                    panelOn = true;
                }
            }


            //FUNCION DEL SELECT DEL PANEL
            $scope.cambioElemento = function () {
                tipo = document.querySelector("#elemento").value;
                document.querySelector("#asignarIndirecta").innerHTML = '<option value="vacio">Seleccionar...</option>'; //resetea el select de indirecta

                if (tipo == "efectoIndirecto") {
                    document.querySelector("#indirecta").style.display = "block"; //muestra el select para asignar a una indirecta
                    document.querySelector("#txtIndirecta").innerHTML = "efecto"; //coloca el texto segun la indirecta (causas o efectos)
                    for (var i = 0; i < efectos.length; i++) {
                        var option = document.createElement("option");
                        option.innerHTML = i + 1;
                        option.setAttribute("value", i + 1);
                        document.querySelector("#asignarIndirecta").appendChild(option);
                        alerta1("Consejo.", "Asiga tu efecto indirecto a un efecto según su posición.", 3);
                    }
                } else if (tipo == "causaIndirecta") {
                    document.querySelector("#indirecta").style.display = "block"; //muestra el select para asignar a una indirecta
                    document.querySelector("#txtIndirecta").innerHTML = "causa"; //coloca el texto segun la indirecta (causas o efectos)
                    for (var i = 0; i < causas.length; i++) {
                        var option = document.createElement("option");
                        option.innerHTML = i + 1;
                        option.setAttribute("value", i + 1);
                        document.querySelector("#asignarIndirecta").appendChild(option);
                        alerta1("Consejo.", "Asiga tu causa indirecta a una causa según su posición.", 3);
                    }
                } else {
                    document.querySelector("#indirecta").style.display = "none"; //esconde el select para asignar a una indirecta
                }
            }
            //CAMBIAR TAMAÑO DE LA LETRA DEL BLOQUE 3
            function Tamañoletra(cantidad) {
                switch (cantidad) {
                    case 1: {
                        //if ((screen.width <= 1024) && (screen.height <= 768)) {
                        letra = "font-size:80%;";
                        //$(".txtBloque3").css({ "font-size": "font-size:50px;"})
                            return letra;
                        //}
                    }
                    case 2: {
                        letra = "font-size:60%;";
                        $(".txtBloque3").css({ "font-size": "font-size:150px;" })
               
                        return letra;
                    }
                    case 3: {
                        letra = "font-size:50%;";
                        return letra;
                    }
                    case 4: {
                        letra = "font-size:60%;";
                        return letra;
                    }
                    case 5: {
                        letra = "font-size:30%;";
                        return letra;
                    }
                }
            }

            //BOTON CREAR DEL PANEL
            $scope.crear = function () {
                indirecto = document.querySelector("#asignarIndirecta").value;
                var elemento, txtArea, elemento2;

                if (tipo === "vacio" || tipo === undefined) { //validar si el select de tipo viene vacio
                    alerta1("Recuerda.", "Debes seleccionar un efecto o una causa.", 3);
                }

                if (indirecto == "vacio" && tipo == "efectoIndirecto" || tipo == "causaIndirecta") {
                    alerta1("Recuerda.", "Debes seleccionar un efecto o una causa primero.", 3);
                }

                //crear efectos
                   
                if (tipo == "efecto" && efectos.length < 5) {
                    img3 = document.createElement("img");
                    elemento = document.createElement("li");
                    elemento2 = document.createElement("li");
                    bloque = document.createElement("div");
                    borrar = document.createElement("div");
                    txtArea = document.createElement("textarea");
                    txtArea.value = "";
                    borrar.innerHTML = "<span></span><h6 class='borrarElemento' onclick='borrarElemento(this)'> Borrar</h6>";
                    bloque.setAttribute("class", "bloque");
                    txtArea.setAttribute("class", "txtBloque2");
                    txtArea.setAttribute("maxlength", "140");
                    txtArea.setAttribute("style", "font-size:10px;");
                
                    efecto.appendChild(elemento).appendChild(bloque).appendChild(borrar);
                    efecto.querySelector("li:last-child div:last-child").appendChild(txtArea);
                    document.querySelector("#imgEfecto3").appendChild(img3);
                    document.querySelector("#efectoIndirecto").appendChild(elemento2);
                } else if (tipo == "efecto" && efectos.length >= 5) {
                    alerta1("Recuerda.", "Ya tienes 5 efectos.", 2);
                }

                // crear causas
                if (tipo == "causa" && causas.length < 5) {
                    img3 = document.createElement("img");
                    elemento = document.createElement("li");
                    elemento2 = document.createElement("li");
                    bloque = document.createElement("div");
                    borrar = document.createElement("div");
                    txtArea = document.createElement("textarea");
                    borrar.innerHTML = "<span></span><h6 class='borrarElemento' onclick='borrarElemento(this)'> Borrar</h6>";
                    bloque.setAttribute("class", "bloque");
                    txtArea.setAttribute("class", "txtBloque2");
                    txtArea.setAttribute("maxlength", "140");
                    txtArea.setAttribute("style", "font-size:10px;");

                    causa.appendChild(elemento).appendChild(bloque).appendChild(borrar);
                    causa.querySelector("li:last-child div:last-child").appendChild(txtArea);
                    document.querySelector("#imgCausa3").appendChild(img3);
                    document.querySelector("#causaIndirecta").appendChild(elemento2);
                } else if (tipo == "causa" && causas.length >= 5) {
                    alerta1("Recuerda.", "Ya tienes 5 causas.", 2);
                }

                if (indirecto != "vacio") {
                    // crear efecto indirecto
                    if (tipo == "efectoIndirecto" && document.querySelectorAll("#efectoIndirecto li:nth-child(" + indirecto + ") div").length < 3) {
                        bloque = document.createElement("div");
                        borrar = document.createElement("span");
                        txtArea = document.createElement("textarea");
                        borrar.innerHTML = "<h6 class='borrarElemento' onclick='borrarElemento2(this)'> Borrar</h6>";
                        bloque.setAttribute("class", "bloque2");
                        txtArea.setAttribute("class", "txtBloque3");
                        txtArea.setAttribute("maxlength", "140");
                        txtArea.setAttribute("style", Tamañoletra(efectos.length));
                        
                        efectoIndirectoUl.querySelector("li:nth-child(" + indirecto + ")").appendChild(bloque).appendChild(txtArea);
                        efectoIndirectoUl.querySelector("li:nth-child(" + indirecto + ") div:last-child").appendChild(borrar);

                    } else if (document.querySelectorAll("#efectoIndirecto li:nth-child(" + indirecto + ") div").length >= 3) {
                        alerta1("Recuerda.", "Ya tienes 3 efectos indirectos.", 2);
                    }

                    // crear causa indirecta
                    if (tipo == "causaIndirecta" && document.querySelectorAll("#causaIndirecta li:nth-child(" + indirecto + ") div").length < 3) {
             
                        bloque = document.createElement("div");
                        borrar = document.createElement("span");
                        txtArea = document.createElement("textarea");
                        borrar.innerHTML = "<h6 class='borrarElemento' onclick='borrarElemento2(this)'> Borrar</h6>";
                        bloque.setAttribute("class", "bloque2");
                        txtArea.setAttribute("class", "txtBloque3");
                        txtArea.setAttribute("maxlength", "140");
                       
                        causaIndirectaUl.querySelector("li:nth-child(" + indirecto + ")").appendChild(bloque).appendChild(txtArea);
                        causaIndirectaUl.querySelector("li:nth-child(" + indirecto + ") div:last-child").appendChild(borrar);
                    } else if (document.querySelectorAll("#causaIndirecta li:nth-child(" + indirecto + ") div").length >= 3) {
                        alerta1("Recuerda.", "Ya tienes 3 causas indirectas.", 2);
                    }
                }
            }

            //FUNCIÓN PARA GUARDAR LOS DATOS DEL ARBOL
            $scope.guardar = function () {
                

                var datosProblema = document.querySelector("#txtProblema").value;
                var datosEfectos = [];
                var datosCausas = [];
                var datosEfectosIndirectos = [];
                var datosCausasIndirectos = [];

                for (var i = 0; i < efectos.length; i++) {
                    var EfectosVacios = document.querySelector("#efecto li:nth-child(" + (i + 1) + ") textarea").value;
                    if (EfectosVacios != "") {
                        datosEfectos[i] = document.querySelector("#efecto li:nth-child(" + (i + 1) + ") textarea").value;
                    } else {
                        alertify.success("Ups! tienes algún efecto vacio");
                        return;
                    }
                }

                for (var i = 0; i < causas.length; i++) {
                    var CausasVacias = datosCausas[i] = document.querySelector("#causa li:nth-child(" + (i + 1) + ") textarea").value
                    if (CausasVacias != "") {
                        datosCausas[i] = document.querySelector("#causa li:nth-child(" + (i + 1) + ") textarea").value;
                    } else {
                        alertify.success("Ups! tienes alguna causa vacia");
                        return;
                    }
                }

                for (var i = 0; i < efectos.length; i++) {
                    var cadaLiIndirecto = [];

                    for (var e = 0; e < document.querySelectorAll("#efecto" + (i + 1) + "indirecto div").length; e++) {
                        var EfectosIndirectasVacias = cadaLiIndirecto[e] = document.querySelector("#efecto" + (i + 1) + "indirecto div:nth-child(" + (e + 1) + ") textarea").value;

                        if (EfectosIndirectasVacias != "") {
                            cadaLiIndirecto[e] = document.querySelector("#efecto" + (i + 1) + "indirecto div:nth-child(" + (e + 1) + ") textarea").value;
                        } else {
                            alertify.success("Ups! tienes algún efecto indirecto vacio");
                            return;
                        }

                    }
                    datosEfectosIndirectos.push(cadaLiIndirecto);
                }

                for (var i = 0; i < causas.length; i++) {
                    var cadaLiIndirecto = [];

                    for (var e = 0; e < document.querySelectorAll("#causa" + (i + 1) + "indirecto div").length; e++) {
                        var CausasIndirectasVacias = cadaLiIndirecto[e] = document.querySelector("#causa" + (i + 1) + "indirecto div:nth-child(" + (e + 1) + ") textarea").value;
                        if (CausasIndirectasVacias != "") {
                            cadaLiIndirecto[e] = document.querySelector("#causa" + (i + 1) + "indirecto div:nth-child(" + (e + 1) + ") textarea").value;
                        } else {
                            alertify.success("Ups! tienes alguna causa indirecta vacia");
                            return;
                        }

                    }
                    datosCausasIndirectos.push(cadaLiIndirecto);
                }

                $scope.ObjArbol.ProblemaCentral = datosProblema;
                if (datosCausas.length > 0 || datosEfectos>0) {
                    $.each(datosCausas, function (index, value) {
                        if (value != "") {
                            $scope.ObjArbol.Causas.push({ Causa: value, CausaIndirecta: datosCausasIndirectos[index] })
                        }


                    })
                    $.each(datosEfectos, function (index, value) {

                        $scope.ObjArbol.Efectos.push({ Efecto: value, EfectoIndirecta: datosEfectosIndirectos[index] })
                    })
                } else {
                    alert("debes agregar una causa o un efecto como minimo");
                    return;
                }
                waitingDialog.show();
               
                $("#guardar").hide();
                $("#tipsArbolProblema").hide();
                $(".borrarElemento").hide();
                setTimeout(function () { 
                html2canvas($("#arbolContenedor"), {
                    onrendered: function (canvas) {
                        theCanvas = canvas;
                      //  document.body.appendChild(canvas);

                        var imgageData = theCanvas.toDataURL();
                        // Now browser starts downloading it instead of just showing it
                        var newData = imgageData.replace(/^data:image\/png/, "data:application/octet-stream");
                        $scope.ObjArbol.imagen = imgageData;

                        ArbolProblemaService.GuardarDatosArbol($scope.ObjArbol, function (response) {
                            if (response.success) {
                                waitingDialog.hide();
                                swal({
                                    text: 'Registro Exitoso',
                                    confirmButtonColor: '#238276',
                                    width: '25%'

                                })

                                $location.url("/Menu");
                                

                            }
                        })
                    }
                });
                }, 500);
              
              
                
        }


//document.querySelector("#guardar").addEventListener("click", function () {

//});

$scope.atras = function () {

    $location.url("/Menu");
    $(".notify").hide();

}




}]);