//var _0x2afd=['efectoIndirecto','#indirecta','#txtIndirecta','Asiga\x20tu\x20efecto\x20indirecto\x20a\x20un\x20efecto\x20según\x20su\x20posición.','option','Asiga\x20tu\x20causa\x20indirecta\x20a\x20una\x20causa\x20según\x20su\x20posición.','css','font-size:150px;','font-size:50%;','font-size:60%;','font-size:30%;','crear','vacio','Recuerda.','Debes\x20seleccionar\x20un\x20efecto\x20o\x20una\x20causa.','causaIndirecta','Debes\x20seleccionar\x20un\x20efecto\x20o\x20una\x20causa\x20primero.','font-size:10px;','Ya\x20tienes\x205\x20efectos.','Ya\x20tienes\x205\x20causas.','Ya\x20tienes\x203\x20efectos\x20indirectos.','guardar','#efecto\x20li:nth-child(',')\x20textarea','Ups!\x20tienes\x20algún\x20efecto\x20vacio','#causa\x20li:nth-child(','Ups!\x20tienes\x20alguna\x20causa\x20vacia','indirecto\x20div:nth-child(','#causa','Ups!\x20tienes\x20alguna\x20causa\x20indirecta\x20vacia','Causas','#arbolContenedor','toDataURL','replace','data:application/octet-stream','GuardarDatosArbol','25%','/Menu','atras','url','.notify','ArbolProblemaController','$scope','$rootScope','$location','ArbolProblemaService','$cookies','$cookieStore','MenuService','$routeParams','$sce','Arbol','proyecto','datos','ObjArbol','DatosProyecto','PauseAudio','getElementById','requestAnimationFrame','webkitRequestAnimationFrame','msRequestAnimationFrame','querySelector','#panel','#mostrarPanel\x20h6','#efecto','#efectoIndirecto','#causaIndirecta','querySelectorAll','#efecto\x20li','#causa\x20li','#efectoIndirecto\x20li','#causaIndirecta\x20li','#imgEfecto3\x20img','#imgCausa3\x20img','length','style','width','#imgEfecto','setAttribute','src','img/lineaU','.png','img/sinLinea.png','#imgCausa','img/lineaD','#efectoIndirecto\x20li:nth-child(',')\x20div','#causaIndirecta\x20li:nth-child(','efecto','.bloque\x20div\x20span','innerHTML','img','causa','indirecto','#modal','display','block','.contenidoModal','none','top','-25%','CausasTotales','CausasIndTotales','IdProyecto','AbrirProyecto','show','success','Etapa','ArbolProblemaProyecto','arbol','DetalleMat','ProblemaGeneral','Consejo.','En\x20el\x20panel\x20de\x20la\x20izquierda\x20podras\x20crear\x20las\x20causas\x20y\x20efectos.','each','Criterio','Problema','#txtProblema','value','EfectosTotales','push','EfectosIndTotales','Activos','createElement','div','<span></span><h6\x20class=\x27borrarElemento\x27\x20onclick=\x27borrarElemento(this)\x27>\x20Borrar</h6>','class','bloque','txtBloque2','140','appendChild','li:last-child\x20div:last-child','#imgEfecto3','span','textarea','txtBloque3','maxlength','li:nth-child(',')\x20div:last-child','#imgCausa3','<h6\x20class=\x27borrarElemento\x27\x20onclick=\x27borrarElemento2(this)\x27>\x20Borrar</h6>','bloque2','#crearProblemaCentral','Debes\x20ingresar\x20un\x20problema\x20central','#238276','hide','ConsultarArbolFinal','ArbolFinal','ProblemaCentral','Efectos','Efecto','<span></span><h6\x20class=\x27borrarElemento\x27\x20onclick=\x27borrarElemento(this)\x27>Borrar</h6>','EfectoIndirecta','log','<h6\x20class=\x27borrarElemento\x27\x20onclick=\x27borrarElemento2(this)\x27>Borrar</h6>','CausaIndirecta','mostrarPanel','-100%','Mostrar','30px','#elemento','#asignarIndirecta','<option\x20value=\x22vacio\x22>Seleccionar...</option>'];(function(_0x5788c8,_0xd41f38){var _0x290d64=function(_0x3df6c4){while(--_0x3df6c4){_0x5788c8['push'](_0x5788c8['shift']());}};_0x290d64(++_0xd41f38);}(_0x2afd,0x16f));var _0x1421=function(_0x53da6d,_0x17b1fd){_0x53da6d=_0x53da6d-0x0;var _0x374987=_0x2afd[_0x53da6d];return _0x374987;};ManualApp['controller'](_0x1421('0x0'),[_0x1421('0x1'),_0x1421('0x2'),_0x1421('0x3'),_0x1421('0x4'),_0x1421('0x5'),_0x1421('0x6'),_0x1421('0x7'),_0x1421('0x8'),_0x1421('0x9'),function(_0xccca47,_0x2ee1d0,_0x54e0da,_0x30e495,_0x403508,_0x1199ad,_0x5854b7,_0x33a0c4,_0x3dfe68){VideoDemo=0x1;_0xccca47[_0x1421('0xa')]={'IdProyecto':_0x2ee1d0[_0x1421('0xb')][_0x1421('0xc')]['id'],'IdMatriz':'','ProblemaGeneral':'','DetalleMat':[{'Problema':'','EjeX':'','EjeY':'','Criterio':''}]};_0xccca47[_0x1421('0xd')]={'IdProyecto':_0x2ee1d0[_0x1421('0xb')][_0x1421('0xc')]['id'],'ObjetivoCentral':'','imagen':'','Causas':[{'Causa':'','CausaIndirecta':[{'indirecta':''}]}],'Efectos':[{'Efecto':'','EfectoIndirecta':[{'indirecto':''}]}]};_0xccca47[_0x1421('0xe')]={'id':'','Tema':'','IdUsuario':'','Etapa':''};_0xccca47[_0x1421('0xf')]=function(){setTimeout(function(){var _0x525bab=document[_0x1421('0x10')]('audio-player');_0x525bab['pause']();},0x3e8);};var _0x3775a9=window[_0x1421('0x11')]||window['mozRequestAnimationFrame']||window[_0x1421('0x12')]||window[_0x1421('0x13')];var _0x4b3977=document[_0x1421('0x14')](_0x1421('0x15'));var _0x2cb97a=document[_0x1421('0x14')](_0x1421('0x16'));var _0x597a0b=document[_0x1421('0x14')]('#alerta');var _0x54dc51=!![],_0xa1daec,_0x2e7883,_0xbe4405,_0x5ac42b,_0x4f49b0,_0xe4e715,_0x368d25,_0x4d32d0,_0x5df835,_0x457989,_0x52bd2d,_0x55c120;var _0x102eaf;_0x4f49b0=document[_0x1421('0x14')](_0x1421('0x17'));_0xe4e715=document[_0x1421('0x14')]('#causa');efectoIndirectoUl=document[_0x1421('0x14')](_0x1421('0x18'));causaIndirectaUl=document[_0x1421('0x14')](_0x1421('0x19'));function _0x5675b5(){efectos=document[_0x1421('0x1a')](_0x1421('0x1b'));causas=document[_0x1421('0x1a')](_0x1421('0x1c'));efectosIndirectos=document['querySelectorAll'](_0x1421('0x1d'));causasIndirectas=document[_0x1421('0x1a')](_0x1421('0x1e'));_0x102eaf=document[_0x1421('0x1a')](_0x1421('0x1f'));_0x52bd2d=document['querySelectorAll'](_0x1421('0x20'));if(efectosIndirectos[_0x1421('0x21')]==0x1){_0x102eaf[0x0][_0x1421('0x22')][_0x1421('0x23')]=0x32+'%';}else{for(var _0xd34853=0x0;_0xd34853<_0x102eaf[_0x1421('0x21')];_0xd34853++){_0x102eaf[_0xd34853][_0x1421('0x22')][_0x1421('0x23')]=0x64/efectos[_0x1421('0x21')]+'%';}}if(causasIndirectas[_0x1421('0x21')]==0x1){_0x52bd2d[0x0][_0x1421('0x22')][_0x1421('0x23')]=0x32+'%';}else{for(var _0xd34853=0x0;_0xd34853<_0x52bd2d[_0x1421('0x21')];_0xd34853++){_0x52bd2d[_0xd34853][_0x1421('0x22')][_0x1421('0x23')]=0x64/causas[_0x1421('0x21')]+'%';}}for(var _0xd34853=0x0;_0xd34853<efectos['length'];_0xd34853++){efectos[_0xd34853][_0x1421('0x22')][_0x1421('0x23')]=0x64/efectos[_0x1421('0x21')]+'%';}for(var _0xd34853=0x0;_0xd34853<causas['length'];_0xd34853++){causas[_0xd34853][_0x1421('0x22')]['width']=0x64/causas[_0x1421('0x21')]+'%';}if(efectosIndirectos[_0x1421('0x21')]==0x1){efectosIndirectos[0x0]['style'][_0x1421('0x23')]=0x32+'%';}else{for(var _0xd34853=0x0;_0xd34853<efectosIndirectos[_0x1421('0x21')];_0xd34853++){efectosIndirectos[_0xd34853][_0x1421('0x22')][_0x1421('0x23')]=0x64/efectos['length']+'%';}}if(causasIndirectas[_0x1421('0x21')]==0x1){causasIndirectas[0x0][_0x1421('0x22')][_0x1421('0x23')]=0x32+'%';}else{for(var _0xd34853=0x0;_0xd34853<causasIndirectas['length'];_0xd34853++){causasIndirectas[_0xd34853][_0x1421('0x22')][_0x1421('0x23')]=0x64/causas['length']+'%';}}if(efectos[_0x1421('0x21')]!=0x0){document[_0x1421('0x14')](_0x1421('0x24'))[_0x1421('0x25')](_0x1421('0x26'),_0x1421('0x27')+efectos[_0x1421('0x21')]+_0x1421('0x28'));}else{document[_0x1421('0x14')](_0x1421('0x24'))['setAttribute'](_0x1421('0x26'),_0x1421('0x29'));}if(causas[_0x1421('0x21')]!=0x0){document['querySelector'](_0x1421('0x2a'))[_0x1421('0x25')](_0x1421('0x26'),_0x1421('0x2b')+causas[_0x1421('0x21')]+_0x1421('0x28'));}else{document[_0x1421('0x14')]('#imgCausa')[_0x1421('0x25')](_0x1421('0x26'),_0x1421('0x29'));}var _0x11295d=document[_0x1421('0x1a')](_0x1421('0x1f'));if(_0x11295d[_0x1421('0x21')]!=0x0){for(var _0xd34853=0x0;_0xd34853<_0x11295d[_0x1421('0x21')];_0xd34853++){var _0xc7b6f4=document[_0x1421('0x1a')](_0x1421('0x2c')+(_0xd34853+0x1)+_0x1421('0x2d'));if(_0xc7b6f4[_0x1421('0x21')]!=0x0){_0x11295d[_0xd34853][_0x1421('0x25')](_0x1421('0x26'),_0x1421('0x27')+_0xc7b6f4[_0x1421('0x21')]+'.png');}else{_0x11295d[_0xd34853][_0x1421('0x25')](_0x1421('0x26'),'img/sinLinea.png');}}}var _0x4a817c=document[_0x1421('0x1a')](_0x1421('0x20'));if(_0x4a817c[_0x1421('0x21')]!=0x0){for(var _0xd34853=0x0;_0xd34853<_0x4a817c[_0x1421('0x21')];_0xd34853++){var _0xc7b6f4=document['querySelectorAll'](_0x1421('0x2e')+(_0xd34853+0x1)+_0x1421('0x2d'));if(_0xc7b6f4['length']!=0x0){_0x4a817c[_0xd34853][_0x1421('0x25')](_0x1421('0x26'),_0x1421('0x2b')+_0xc7b6f4[_0x1421('0x21')]+_0x1421('0x28'));}else{_0x4a817c[_0xd34853][_0x1421('0x25')](_0x1421('0x26'),'img/sinLinea.png');}}}for(var _0xd34853=0x0;_0xd34853<efectos[_0x1421('0x21')];_0xd34853++){efectos[_0xd34853]['setAttribute']('id',_0x1421('0x2f')+(_0xd34853+0x1));efectos[_0xd34853][_0x1421('0x14')](_0x1421('0x30'))[_0x1421('0x31')]=_0xd34853+0x1+'.';_0x102eaf[_0xd34853][_0x1421('0x25')]('id','efecto'+(_0xd34853+0x1)+_0x1421('0x32'));efectosIndirectos[_0xd34853]['setAttribute']('id',_0x1421('0x2f')+(_0xd34853+0x1)+'indirecto');}for(var _0xd34853=0x0;_0xd34853<causas[_0x1421('0x21')];_0xd34853++){causas[_0xd34853][_0x1421('0x25')]('id',_0x1421('0x33')+(_0xd34853+0x1));causas[_0xd34853][_0x1421('0x14')](_0x1421('0x30'))[_0x1421('0x31')]=_0xd34853+0x1+'.';_0x52bd2d[_0xd34853][_0x1421('0x25')]('id',_0x1421('0x33')+(_0xd34853+0x1)+_0x1421('0x32'));causasIndirectas[_0xd34853][_0x1421('0x25')]('id','causa'+(_0xd34853+0x1)+_0x1421('0x34'));}_0x3775a9(_0x5675b5);}_0x3775a9(_0x5675b5);function _0x7c030b(_0x5823e4){document[_0x1421('0x14')](_0x1421('0x35'))['style'][_0x1421('0x36')]='block';document[_0x1421('0x14')](_0x5823e4)[_0x1421('0x22')][_0x1421('0x36')]=_0x1421('0x37');}function _0x405494(){document[_0x1421('0x14')]('#modal')[_0x1421('0x22')][_0x1421('0x36')]='none';var _0x562b9d=document['querySelectorAll'](_0x1421('0x38'));for(var _0x2f7ad0=0x0;_0x2f7ad0<_0x562b9d[_0x1421('0x21')];_0x2f7ad0++){_0x562b9d[_0x2f7ad0][_0x1421('0x22')][_0x1421('0x36')]=_0x1421('0x39');}}function _0x2c3e9b(_0x29071a,_0x1bf6cd,_0x3e56db){_0x597a0b[_0x1421('0x22')][_0x1421('0x3a')]='5%';_0x597a0b[_0x1421('0x14')]('h3')['innerHTML']=_0x29071a;_0x597a0b['querySelector']('p')[_0x1421('0x31')]=_0x1bf6cd;setTimeout(function(){_0x597a0b['style'][_0x1421('0x3a')]=_0x1421('0x3b');},_0x3e56db*0x3e8);}var _0x1d2d6a=0x0;var _0x38805f=0x0;_0xccca47[_0x1421('0x3c')]=[];_0xccca47['EfectosTotales']=[];_0xccca47[_0x1421('0x3d')]=[];_0xccca47['EfectosIndTotales']=[];_0xccca47[_0x1421('0x3e')]=_0x2ee1d0['proyecto'][_0x1421('0xc')]['id'];_0x5854b7[_0x1421('0x3f')](_0xccca47[_0x1421('0x3e')],function(_0x4b2b03){waitingDialog[_0x1421('0x40')]();if(_0x4b2b03[_0x1421('0x41')]){_0xccca47[_0x1421('0xe')]=_0x4b2b03[_0x1421('0xb')];if(_0x2ee1d0['proyecto']!=undefined){if(_0xccca47[_0x1421('0xe')][_0x1421('0x42')]<0x3){_0x30e495[_0x1421('0x43')](_0x2ee1d0[_0x1421('0xb')][_0x1421('0xc')]['id'],function(_0x52e5be){if(_0x52e5be[_0x1421('0x41')]==!![]){if(_0x52e5be[_0x1421('0x44')]!=null){_0xccca47[_0x1421('0xa')][_0x1421('0x45')]=_0x52e5be[_0x1421('0x44')][_0x1421('0x45')];var _0x503d32=_0x52e5be[_0x1421('0x44')][_0x1421('0x46')];_0x2c3e9b(_0x1421('0x47'),_0x1421('0x48'),0x5);$[_0x1421('0x49')](_0xccca47[_0x1421('0xa')][_0x1421('0x45')],function(_0x2e92b9,_0x4ae20c){if(_0x4ae20c[_0x1421('0x4a')]=='Punto\x20Critico'){var _0x2e966=_0x4ae20c[_0x1421('0x4b')];document[_0x1421('0x14')](_0x1421('0x4c'))[_0x1421('0x4d')]=_0x2e966;}if(_0x4ae20c['Criterio']=='Pasivos'){if(_0x1d2d6a<0x5){_0xccca47[_0x1421('0x4e')][_0x1421('0x4f')](_0x4ae20c);_0x1d2d6a++;}else{_0xccca47[_0x1421('0x50')][_0x1421('0x4f')](_0x4ae20c);}}if(_0x4ae20c[_0x1421('0x4a')]==_0x1421('0x51')){if(_0x38805f<0x5){_0xccca47[_0x1421('0x3c')][_0x1421('0x4f')](_0x4ae20c);_0x38805f++;}else{_0xccca47[_0x1421('0x3d')][_0x1421('0x4f')](_0x4ae20c);}}});$['each'](_0xccca47[_0x1421('0x4e')],function(_0x1ed8d1,_0x1cade7){if(_0x1ed8d1<0x5){_0x5df835=document['createElement'](_0x1421('0x32'));elemento=document[_0x1421('0x52')]('li');elemento2=document[_0x1421('0x52')]('li');bloque=document[_0x1421('0x52')](_0x1421('0x53'));borrar=document['createElement'](_0x1421('0x53'));txtArea=document[_0x1421('0x52')]('textarea');txtArea[_0x1421('0x4d')]=_0x1cade7[_0x1421('0x4b')];borrar[_0x1421('0x31')]=_0x1421('0x54');bloque[_0x1421('0x25')](_0x1421('0x55'),_0x1421('0x56'));txtArea['setAttribute'](_0x1421('0x55'),_0x1421('0x57'));txtArea[_0x1421('0x25')]('maxlength',_0x1421('0x58'));_0x4f49b0[_0x1421('0x59')](elemento)[_0x1421('0x59')](bloque)[_0x1421('0x59')](borrar);_0x4f49b0[_0x1421('0x14')](_0x1421('0x5a'))[_0x1421('0x59')](txtArea);document['querySelector'](_0x1421('0x5b'))[_0x1421('0x59')](_0x5df835);document[_0x1421('0x14')](_0x1421('0x18'))[_0x1421('0x59')](elemento2);}});var _0x102bfd=0x1;$[_0x1421('0x49')](_0xccca47[_0x1421('0x50')],function(_0x5f556a,_0xca6b15){if(_0x5f556a==0x3||_0x5f556a==0x6||_0x5f556a==0x9||_0x5f556a==0xc){_0x102bfd++;}bloque=document[_0x1421('0x52')](_0x1421('0x53'));borrar=document['createElement'](_0x1421('0x5c'));txtArea=document[_0x1421('0x52')](_0x1421('0x5d'));txtArea[_0x1421('0x4d')]=_0xca6b15['Problema'];borrar[_0x1421('0x31')]='<h6\x20class=\x27borrarElemento\x27\x20onclick=\x27borrarElemento2(this)\x27>\x20Borrar</h6>';bloque[_0x1421('0x25')](_0x1421('0x55'),'bloque2');txtArea[_0x1421('0x25')](_0x1421('0x55'),_0x1421('0x5e'));txtArea[_0x1421('0x25')](_0x1421('0x5f'),_0x1421('0x58'));efectoIndirectoUl['querySelector'](_0x1421('0x60')+_0x102bfd+')')[_0x1421('0x59')](bloque)[_0x1421('0x59')](txtArea);efectoIndirectoUl[_0x1421('0x14')](_0x1421('0x60')+_0x102bfd+_0x1421('0x61'))[_0x1421('0x59')](borrar);});$[_0x1421('0x49')](_0xccca47[_0x1421('0x3c')],function(_0x1c849b,_0xde1d3a){if(_0x1c849b<0x5){_0x5df835=document[_0x1421('0x52')](_0x1421('0x32'));elemento=document[_0x1421('0x52')]('li');elemento2=document[_0x1421('0x52')]('li');bloque=document['createElement']('div');borrar=document[_0x1421('0x52')](_0x1421('0x53'));txtArea=document[_0x1421('0x52')](_0x1421('0x5d'));txtArea[_0x1421('0x4d')]=_0xde1d3a['Problema'];borrar[_0x1421('0x31')]=_0x1421('0x54');bloque[_0x1421('0x25')]('class',_0x1421('0x56'));txtArea[_0x1421('0x25')]('class',_0x1421('0x57'));txtArea[_0x1421('0x25')]('maxlength',_0x1421('0x58'));_0xe4e715[_0x1421('0x59')](elemento)[_0x1421('0x59')](bloque)[_0x1421('0x59')](borrar);_0xe4e715[_0x1421('0x14')](_0x1421('0x5a'))[_0x1421('0x59')](txtArea);document[_0x1421('0x14')](_0x1421('0x62'))[_0x1421('0x59')](_0x5df835);document[_0x1421('0x14')](_0x1421('0x19'))[_0x1421('0x59')](elemento2);}});var _0x493c8e=0x1;$[_0x1421('0x49')](_0xccca47[_0x1421('0x3d')],function(_0x4bb470,_0x571cdd){if(_0x4bb470==0x3||_0x4bb470==0x6||_0x4bb470==0x9||_0x4bb470==0xc){_0x493c8e++;}bloque=document[_0x1421('0x52')](_0x1421('0x53'));borrar=document['createElement'](_0x1421('0x5c'));txtArea=document['createElement'](_0x1421('0x5d'));txtArea[_0x1421('0x4d')]=_0x571cdd[_0x1421('0x4b')];borrar[_0x1421('0x31')]=_0x1421('0x63');bloque[_0x1421('0x25')](_0x1421('0x55'),_0x1421('0x64'));txtArea[_0x1421('0x25')]('class',_0x1421('0x5e'));txtArea['setAttribute'](_0x1421('0x5f'),_0x1421('0x58'));causaIndirectaUl['querySelector'](_0x1421('0x60')+_0x493c8e+')')[_0x1421('0x59')](bloque)[_0x1421('0x59')](txtArea);causaIndirectaUl[_0x1421('0x14')](_0x1421('0x60')+_0x493c8e+')\x20div:last-child')[_0x1421('0x59')](borrar);});}else{_0x7c030b(_0x1421('0x65'));_0xccca47['AsignarProblemaCentral']=function(){var _0x11b104=document[_0x1421('0x14')]('#txtProblemaInicial')[_0x1421('0x4d')];if(_0x11b104[_0x1421('0x21')]==0x0||_0x11b104=='\x20'){swal({'text':_0x1421('0x66'),'confirmButtonColor':_0x1421('0x67'),'width':'25%'});}else{document[_0x1421('0x14')]('#txtProblema')[_0x1421('0x4d')]=_0x11b104;_0x405494();_0x2c3e9b('Consejo.','En\x20el\x20panel\x20de\x20la\x20izquierda\x20podras\x20crear\x20las\x20causas\x20y\x20efectos.',0x5);}};}}waitingDialog[_0x1421('0x68')]();});}else{_0x30e495[_0x1421('0x69')](_0x2ee1d0[_0x1421('0xb')][_0x1421('0xc')]['id'],function(_0x7b9c13){if(_0x7b9c13[_0x1421('0x41')]){var _0x2cd484=_0x7b9c13[_0x1421('0x6a')][_0x1421('0x6b')];document['querySelector'](_0x1421('0x4c'))['value']=_0x2cd484;_0x2c3e9b(_0x1421('0x47'),_0x1421('0x48'),0x5);$[_0x1421('0x49')](_0x7b9c13[_0x1421('0x6a')][_0x1421('0x6c')],function(_0x58d47f,_0x2baa68){_0x5df835=document['createElement'](_0x1421('0x32'));elemento=document['createElement']('li');elemento2=document[_0x1421('0x52')]('li');bloque=document[_0x1421('0x52')](_0x1421('0x53'));borrar=document[_0x1421('0x52')]('div');txtArea=document[_0x1421('0x52')](_0x1421('0x5d'));txtArea['value']=_0x2baa68[_0x1421('0x6d')];borrar[_0x1421('0x31')]=_0x1421('0x6e');bloque[_0x1421('0x25')]('class','bloque');txtArea['setAttribute'](_0x1421('0x55'),_0x1421('0x57'));txtArea[_0x1421('0x25')](_0x1421('0x5f'),_0x1421('0x58'));_0x4f49b0[_0x1421('0x59')](elemento)[_0x1421('0x59')](bloque)[_0x1421('0x59')](borrar);_0x4f49b0[_0x1421('0x14')](_0x1421('0x5a'))[_0x1421('0x59')](txtArea);document[_0x1421('0x14')](_0x1421('0x5b'))[_0x1421('0x59')](_0x5df835);document[_0x1421('0x14')](_0x1421('0x18'))[_0x1421('0x59')](elemento2);$[_0x1421('0x49')](_0x2baa68['EfectoIndirecta'],function(_0x26a297,_0x3c125d){_0xccca47[_0x1421('0x50')][_0x1421('0x4f')]({'id':_0x58d47f,'EfectoIndirecta':_0x2baa68[_0x1421('0x6f')][_0x26a297]});});});console[_0x1421('0x70')](_0xccca47[_0x1421('0x50')]);var _0x9492f0=0x0;$[_0x1421('0x49')](_0xccca47['EfectosIndTotales'],function(_0x3b58bb,_0x373d09){_0x9492f0=_0x373d09['id']+0x1;bloque=document[_0x1421('0x52')](_0x1421('0x53'));borrar=document[_0x1421('0x52')](_0x1421('0x5c'));txtArea=document['createElement'](_0x1421('0x5d'));txtArea[_0x1421('0x4d')]=_0x373d09[_0x1421('0x6f')];borrar[_0x1421('0x31')]=_0x1421('0x71');bloque[_0x1421('0x25')](_0x1421('0x55'),_0x1421('0x64'));txtArea['setAttribute']('class',_0x1421('0x5e'));txtArea[_0x1421('0x25')](_0x1421('0x5f'),_0x1421('0x58'));efectoIndirectoUl['querySelector'](_0x1421('0x60')+_0x9492f0+')')['appendChild'](bloque)['appendChild'](txtArea);efectoIndirectoUl[_0x1421('0x14')](_0x1421('0x60')+_0x9492f0+')\x20div:last-child')[_0x1421('0x59')](borrar);});$['each'](_0x7b9c13[_0x1421('0x6a')]['Causas'],function(_0x56fbb8,_0x47b93b){_0x5df835=document[_0x1421('0x52')](_0x1421('0x32'));elemento=document[_0x1421('0x52')]('li');elemento2=document[_0x1421('0x52')]('li');bloque=document[_0x1421('0x52')](_0x1421('0x53'));borrar=document[_0x1421('0x52')]('div');txtArea=document[_0x1421('0x52')](_0x1421('0x5d'));txtArea[_0x1421('0x4d')]=_0x47b93b['Causa'];borrar[_0x1421('0x31')]=_0x1421('0x54');bloque[_0x1421('0x25')]('class','bloque');txtArea[_0x1421('0x25')](_0x1421('0x55'),_0x1421('0x57'));txtArea['setAttribute'](_0x1421('0x5f'),_0x1421('0x58'));_0xe4e715[_0x1421('0x59')](elemento)[_0x1421('0x59')](bloque)[_0x1421('0x59')](borrar);_0xe4e715[_0x1421('0x14')](_0x1421('0x5a'))['appendChild'](txtArea);document[_0x1421('0x14')](_0x1421('0x62'))[_0x1421('0x59')](_0x5df835);document[_0x1421('0x14')](_0x1421('0x19'))[_0x1421('0x59')](elemento2);$[_0x1421('0x49')](_0x47b93b['CausaIndirecta'],function(_0x20e52f,_0x10bf23){_0xccca47[_0x1421('0x3d')][_0x1421('0x4f')]({'id':_0x56fbb8,'CausaIndirecta':_0x47b93b[_0x1421('0x72')][_0x20e52f]});});});console[_0x1421('0x70')](_0xccca47['CausasIndTotales']);var _0x20fc1a=0x0;$['each'](_0xccca47[_0x1421('0x3d')],function(_0x34907d,_0x448c00){_0x20fc1a=_0x448c00['id']+0x1;bloque=document[_0x1421('0x52')](_0x1421('0x53'));borrar=document[_0x1421('0x52')]('span');txtArea=document['createElement'](_0x1421('0x5d'));txtArea['value']=_0x448c00['CausaIndirecta'];borrar[_0x1421('0x31')]=_0x1421('0x71');bloque['setAttribute']('class',_0x1421('0x64'));txtArea[_0x1421('0x25')]('class',_0x1421('0x5e'));txtArea[_0x1421('0x25')](_0x1421('0x5f'),'140');causaIndirectaUl[_0x1421('0x14')](_0x1421('0x60')+_0x20fc1a+')')[_0x1421('0x59')](bloque)['appendChild'](txtArea);causaIndirectaUl[_0x1421('0x14')](_0x1421('0x60')+_0x20fc1a+_0x1421('0x61'))[_0x1421('0x59')](borrar);});}waitingDialog[_0x1421('0x68')]();});}}}});_0xccca47[_0x1421('0x73')]=function(){if(_0x54dc51){_0x4b3977[_0x1421('0x22')][_0x1421('0x3a')]=_0x1421('0x74');_0x2cb97a[_0x1421('0x31')]=_0x1421('0x75');_0x54dc51=![];}else{_0x4b3977[_0x1421('0x22')][_0x1421('0x3a')]=_0x1421('0x76');_0x2cb97a[_0x1421('0x31')]='Ocultar';_0x54dc51=!![];}};_0xccca47['cambioElemento']=function(){_0xbe4405=document[_0x1421('0x14')](_0x1421('0x77'))[_0x1421('0x4d')];document[_0x1421('0x14')](_0x1421('0x78'))[_0x1421('0x31')]=_0x1421('0x79');if(_0xbe4405==_0x1421('0x7a')){document[_0x1421('0x14')](_0x1421('0x7b'))[_0x1421('0x22')][_0x1421('0x36')]=_0x1421('0x37');document[_0x1421('0x14')](_0x1421('0x7c'))[_0x1421('0x31')]='efecto';for(var _0x1685d9=0x0;_0x1685d9<efectos[_0x1421('0x21')];_0x1685d9++){var _0x476f31=document[_0x1421('0x52')]('option');_0x476f31[_0x1421('0x31')]=_0x1685d9+0x1;_0x476f31['setAttribute'](_0x1421('0x4d'),_0x1685d9+0x1);document['querySelector'](_0x1421('0x78'))[_0x1421('0x59')](_0x476f31);_0x2c3e9b(_0x1421('0x47'),_0x1421('0x7d'),0x3);}}else if(_0xbe4405=='causaIndirecta'){document[_0x1421('0x14')]('#indirecta')[_0x1421('0x22')][_0x1421('0x36')]='block';document[_0x1421('0x14')]('#txtIndirecta')['innerHTML']=_0x1421('0x33');for(var _0x1685d9=0x0;_0x1685d9<causas[_0x1421('0x21')];_0x1685d9++){var _0x476f31=document[_0x1421('0x52')](_0x1421('0x7e'));_0x476f31[_0x1421('0x31')]=_0x1685d9+0x1;_0x476f31[_0x1421('0x25')](_0x1421('0x4d'),_0x1685d9+0x1);document['querySelector'](_0x1421('0x78'))[_0x1421('0x59')](_0x476f31);_0x2c3e9b('Consejo.',_0x1421('0x7f'),0x3);}}else{document[_0x1421('0x14')](_0x1421('0x7b'))[_0x1421('0x22')][_0x1421('0x36')]=_0x1421('0x39');}};function _0x2e43be(_0x42ce2c){switch(_0x42ce2c){case 0x1:{letra='font-size:80%;';return letra;}case 0x2:{letra='font-size:60%;';$('.txtBloque3')[_0x1421('0x80')]({'font-size':_0x1421('0x81')});return letra;}case 0x3:{letra=_0x1421('0x82');return letra;}case 0x4:{letra=_0x1421('0x83');return letra;}case 0x5:{letra=_0x1421('0x84');return letra;}}}_0xccca47[_0x1421('0x85')]=function(){_0x368d25=document[_0x1421('0x14')]('#asignarIndirecta')[_0x1421('0x4d')];var _0x8c59de,_0x525e77,_0x466903;if(_0xbe4405===_0x1421('0x86')||_0xbe4405===undefined){_0x2c3e9b(_0x1421('0x87'),_0x1421('0x88'),0x3);}if(_0x368d25==_0x1421('0x86')&&_0xbe4405==_0x1421('0x7a')||_0xbe4405==_0x1421('0x89')){_0x2c3e9b(_0x1421('0x87'),_0x1421('0x8a'),0x3);}if(_0xbe4405==_0x1421('0x2f')&&efectos[_0x1421('0x21')]<0x5){_0x5df835=document[_0x1421('0x52')](_0x1421('0x32'));_0x8c59de=document['createElement']('li');_0x466903=document[_0x1421('0x52')]('li');bloque=document[_0x1421('0x52')](_0x1421('0x53'));borrar=document[_0x1421('0x52')](_0x1421('0x53'));_0x525e77=document[_0x1421('0x52')](_0x1421('0x5d'));_0x525e77['value']='';borrar[_0x1421('0x31')]=_0x1421('0x54');bloque[_0x1421('0x25')](_0x1421('0x55'),_0x1421('0x56'));_0x525e77[_0x1421('0x25')]('class','txtBloque2');_0x525e77[_0x1421('0x25')](_0x1421('0x5f'),_0x1421('0x58'));_0x525e77[_0x1421('0x25')](_0x1421('0x22'),_0x1421('0x8b'));_0x4f49b0[_0x1421('0x59')](_0x8c59de)[_0x1421('0x59')](bloque)[_0x1421('0x59')](borrar);_0x4f49b0[_0x1421('0x14')](_0x1421('0x5a'))[_0x1421('0x59')](_0x525e77);document[_0x1421('0x14')](_0x1421('0x5b'))[_0x1421('0x59')](_0x5df835);document[_0x1421('0x14')]('#efectoIndirecto')[_0x1421('0x59')](_0x466903);}else if(_0xbe4405==_0x1421('0x2f')&&efectos[_0x1421('0x21')]>=0x5){_0x2c3e9b(_0x1421('0x87'),_0x1421('0x8c'),0x2);}if(_0xbe4405==_0x1421('0x33')&&causas[_0x1421('0x21')]<0x5){_0x5df835=document[_0x1421('0x52')](_0x1421('0x32'));_0x8c59de=document['createElement']('li');_0x466903=document[_0x1421('0x52')]('li');bloque=document[_0x1421('0x52')]('div');borrar=document['createElement']('div');_0x525e77=document[_0x1421('0x52')](_0x1421('0x5d'));borrar[_0x1421('0x31')]=_0x1421('0x54');bloque[_0x1421('0x25')](_0x1421('0x55'),_0x1421('0x56'));_0x525e77[_0x1421('0x25')](_0x1421('0x55'),'txtBloque2');_0x525e77[_0x1421('0x25')](_0x1421('0x5f'),_0x1421('0x58'));_0x525e77[_0x1421('0x25')](_0x1421('0x22'),'font-size:10px;');_0xe4e715[_0x1421('0x59')](_0x8c59de)[_0x1421('0x59')](bloque)[_0x1421('0x59')](borrar);_0xe4e715['querySelector'](_0x1421('0x5a'))[_0x1421('0x59')](_0x525e77);document['querySelector'](_0x1421('0x62'))[_0x1421('0x59')](_0x5df835);document['querySelector'](_0x1421('0x19'))[_0x1421('0x59')](_0x466903);}else if(_0xbe4405==_0x1421('0x33')&&causas[_0x1421('0x21')]>=0x5){_0x2c3e9b(_0x1421('0x87'),_0x1421('0x8d'),0x2);}if(_0x368d25!=_0x1421('0x86')){if(_0xbe4405==_0x1421('0x7a')&&document['querySelectorAll'](_0x1421('0x2c')+_0x368d25+_0x1421('0x2d'))['length']<0x3){bloque=document[_0x1421('0x52')]('div');borrar=document[_0x1421('0x52')](_0x1421('0x5c'));_0x525e77=document[_0x1421('0x52')](_0x1421('0x5d'));borrar[_0x1421('0x31')]=_0x1421('0x63');bloque[_0x1421('0x25')](_0x1421('0x55'),_0x1421('0x64'));_0x525e77[_0x1421('0x25')](_0x1421('0x55'),_0x1421('0x5e'));_0x525e77[_0x1421('0x25')]('maxlength',_0x1421('0x58'));_0x525e77[_0x1421('0x25')](_0x1421('0x22'),_0x2e43be(efectos[_0x1421('0x21')]));efectoIndirectoUl[_0x1421('0x14')]('li:nth-child('+_0x368d25+')')[_0x1421('0x59')](bloque)[_0x1421('0x59')](_0x525e77);efectoIndirectoUl[_0x1421('0x14')]('li:nth-child('+_0x368d25+_0x1421('0x61'))[_0x1421('0x59')](borrar);}else if(document['querySelectorAll'](_0x1421('0x2c')+_0x368d25+_0x1421('0x2d'))[_0x1421('0x21')]>=0x3){_0x2c3e9b(_0x1421('0x87'),_0x1421('0x8e'),0x2);}if(_0xbe4405==_0x1421('0x89')&&document[_0x1421('0x1a')]('#causaIndirecta\x20li:nth-child('+_0x368d25+_0x1421('0x2d'))[_0x1421('0x21')]<0x3){bloque=document[_0x1421('0x52')](_0x1421('0x53'));borrar=document[_0x1421('0x52')](_0x1421('0x5c'));_0x525e77=document['createElement'](_0x1421('0x5d'));borrar[_0x1421('0x31')]=_0x1421('0x63');bloque['setAttribute']('class','bloque2');_0x525e77[_0x1421('0x25')](_0x1421('0x55'),_0x1421('0x5e'));_0x525e77[_0x1421('0x25')](_0x1421('0x5f'),_0x1421('0x58'));causaIndirectaUl[_0x1421('0x14')](_0x1421('0x60')+_0x368d25+')')[_0x1421('0x59')](bloque)[_0x1421('0x59')](_0x525e77);causaIndirectaUl[_0x1421('0x14')](_0x1421('0x60')+_0x368d25+_0x1421('0x61'))['appendChild'](borrar);}else if(document['querySelectorAll']('#causaIndirecta\x20li:nth-child('+_0x368d25+_0x1421('0x2d'))['length']>=0x3){_0x2c3e9b(_0x1421('0x87'),'Ya\x20tienes\x203\x20causas\x20indirectas.',0x2);}}};_0xccca47[_0x1421('0x8f')]=function(){var _0x1a00df=document[_0x1421('0x14')](_0x1421('0x4c'))[_0x1421('0x4d')];var _0x3ceede=[];var _0x45b375=[];var _0x5d9884=[];var _0x161e31=[];for(var _0xe00b0e=0x0;_0xe00b0e<efectos[_0x1421('0x21')];_0xe00b0e++){var _0x3198ff=document[_0x1421('0x14')](_0x1421('0x90')+(_0xe00b0e+0x1)+_0x1421('0x91'))[_0x1421('0x4d')];if(_0x3198ff!=''){_0x3ceede[_0xe00b0e]=document[_0x1421('0x14')](_0x1421('0x90')+(_0xe00b0e+0x1)+_0x1421('0x91'))[_0x1421('0x4d')];}else{alertify[_0x1421('0x41')](_0x1421('0x92'));return;}}for(var _0xe00b0e=0x0;_0xe00b0e<causas[_0x1421('0x21')];_0xe00b0e++){var _0x5676fa=_0x45b375[_0xe00b0e]=document[_0x1421('0x14')](_0x1421('0x93')+(_0xe00b0e+0x1)+_0x1421('0x91'))[_0x1421('0x4d')];if(_0x5676fa!=''){_0x45b375[_0xe00b0e]=document['querySelector'](_0x1421('0x93')+(_0xe00b0e+0x1)+_0x1421('0x91'))[_0x1421('0x4d')];}else{alertify[_0x1421('0x41')](_0x1421('0x94'));return;}}for(var _0xe00b0e=0x0;_0xe00b0e<efectos[_0x1421('0x21')];_0xe00b0e++){var _0xa361d1=[];for(var _0x4f7029=0x0;_0x4f7029<document['querySelectorAll']('#efecto'+(_0xe00b0e+0x1)+'indirecto\x20div')['length'];_0x4f7029++){var _0x7a8719=_0xa361d1[_0x4f7029]=document['querySelector'](_0x1421('0x17')+(_0xe00b0e+0x1)+'indirecto\x20div:nth-child('+(_0x4f7029+0x1)+_0x1421('0x91'))['value'];if(_0x7a8719!=''){_0xa361d1[_0x4f7029]=document[_0x1421('0x14')](_0x1421('0x17')+(_0xe00b0e+0x1)+_0x1421('0x95')+(_0x4f7029+0x1)+_0x1421('0x91'))[_0x1421('0x4d')];}else{alertify[_0x1421('0x41')]('Ups!\x20tienes\x20algún\x20efecto\x20indirecto\x20vacio');return;}}_0x5d9884[_0x1421('0x4f')](_0xa361d1);}for(var _0xe00b0e=0x0;_0xe00b0e<causas[_0x1421('0x21')];_0xe00b0e++){var _0xa361d1=[];for(var _0x4f7029=0x0;_0x4f7029<document[_0x1421('0x1a')](_0x1421('0x96')+(_0xe00b0e+0x1)+'indirecto\x20div')['length'];_0x4f7029++){var _0x1b94ce=_0xa361d1[_0x4f7029]=document[_0x1421('0x14')]('#causa'+(_0xe00b0e+0x1)+_0x1421('0x95')+(_0x4f7029+0x1)+_0x1421('0x91'))[_0x1421('0x4d')];if(_0x1b94ce!=''){_0xa361d1[_0x4f7029]=document[_0x1421('0x14')](_0x1421('0x96')+(_0xe00b0e+0x1)+'indirecto\x20div:nth-child('+(_0x4f7029+0x1)+')\x20textarea')[_0x1421('0x4d')];}else{alertify[_0x1421('0x41')](_0x1421('0x97'));return;}}_0x161e31[_0x1421('0x4f')](_0xa361d1);}_0xccca47[_0x1421('0xd')][_0x1421('0x6b')]=_0x1a00df;if(_0x45b375[_0x1421('0x21')]>0x0||_0x3ceede>0x0){$[_0x1421('0x49')](_0x45b375,function(_0xdbf5a1,_0x4a9278){if(_0x4a9278!=''){_0xccca47[_0x1421('0xd')][_0x1421('0x98')][_0x1421('0x4f')]({'Causa':_0x4a9278,'CausaIndirecta':_0x161e31[_0xdbf5a1]});}});$[_0x1421('0x49')](_0x3ceede,function(_0xad1d03,_0x408eab){_0xccca47[_0x1421('0xd')][_0x1421('0x6c')][_0x1421('0x4f')]({'Efecto':_0x408eab,'EfectoIndirecta':_0x5d9884[_0xad1d03]});});}else{alert('debes\x20agregar\x20una\x20causa\x20o\x20un\x20efecto\x20como\x20minimo');return;}waitingDialog[_0x1421('0x40')]();$('#guardar')['hide']();$('#tipsArbolProblema')['hide']();$('.borrarElemento')[_0x1421('0x68')]();setTimeout(function(){html2canvas($(_0x1421('0x99')),{'onrendered':function(_0x449edc){theCanvas=_0x449edc;var _0x23f465=theCanvas[_0x1421('0x9a')]();var _0x26bf8f=_0x23f465[_0x1421('0x9b')](/^data:image\/png/,_0x1421('0x9c'));_0xccca47[_0x1421('0xd')]['imagen']=_0x23f465;_0x30e495[_0x1421('0x9d')](_0xccca47[_0x1421('0xd')],function(_0x3e0f28){if(_0x3e0f28['success']){waitingDialog[_0x1421('0x68')]();swal({'text':'Registro\x20Exitoso','confirmButtonColor':_0x1421('0x67'),'width':_0x1421('0x9e')});_0x54e0da['url'](_0x1421('0x9f'));}});}});},0x1f4);};_0xccca47[_0x1421('0xa0')]=function(){_0x54e0da[_0x1421('0xa1')](_0x1421('0x9f'));$(_0x1421('0xa2'))[_0x1421('0x68')]();};}]);

ManualApp.controller('ArbolProblemaController',
    ['$scope', '$rootScope', '$location', 'ArbolProblemaService', '$cookies', '$cookieStore', 'MenuService', '$routeParams', '$sce',
        function ($scope, $rootScope, $location, ArbolProblemaService, $cookies, $cookieStore, MenuService, $routeParams, $sce) {
            VideoDemo = 1;

            //OBJETOS
            $scope.Arbol = {
                IdProyecto: $rootScope.proyecto.datos.id,
                IdMatriz: "",
                ProblemaGeneral: "",
                DetalleMat: [
                  {
                      Problema: "",
                      EjeX: "",
                      EjeY: "",
                      Criterio: ""
                  }
                ]
            }

            $scope.ObjArbol = {
                IdProyecto: $rootScope.proyecto.datos.id,
                ObjetivoCentral: "",
                imagen: "",
                Causas: [
                  {
                      Causa: "",
                      CausaIndirecta: [
                          {
                              indirecta: ""
                          }
                      ]
                  }
                ],
                Efectos: [
                 {
                     Efecto: "",
                     EfectoIndirecta: [
                         {
                             indirecto: ""
                         }
                     ]
                 }
                ]

            }

            $scope.DatosProyecto = {
                id: "",
                Tema: "",
                IdUsuario: "",
                Etapa: ""
            }

            //Funciòn para pausar el audio cuando se abra el video
            $scope.PauseAudio = function () {
                setTimeout(function () {
                    var audio = document.getElementById("audio-player");
                    audio.pause();
                }, 1000);
            }
            //-----------------------------------------------------------------------------------------------------

            //VARIABLE PARA ACTIVAR CICLO INFINITO
            var update = window.requestAnimationFrame || window.mozRequestAnimationFrame ||
                         window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
            var panel = document.querySelector("#panel");
            var textoPanel = document.querySelector("#mostrarPanel h6");
            var alerta = document.querySelector("#alerta");
            var panelOn = true, numEfectos, numeCausas, tipo, txtIndirecto, efecto, causa, indirecto, elementoBorrar, img3, idElementoBorrar, causaImg3, imgBorrar;
            var efectoImg3;



            //CAPTURAR UL
            efecto = document.querySelector("#efecto");
            causa = document.querySelector("#causa");
            efectoIndirectoUl = document.querySelector("#efectoIndirecto");
            causaIndirectaUl = document.querySelector("#causaIndirecta");

            //CICLO INFINITO
            function repetir() {

                //CAPTURAR LA CANTIDAD DE LI
                efectos = document.querySelectorAll("#efecto li");
                causas = document.querySelectorAll("#causa li");
                efectosIndirectos = document.querySelectorAll("#efectoIndirecto li");
                causasIndirectas = document.querySelectorAll("#causaIndirecta li")

                //CAPTURAR IMAGENES 3
                efectoImg3 = document.querySelectorAll("#imgEfecto3 img");
                causaImg3 = document.querySelectorAll("#imgCausa3 img");

                //ANCHO IMAGENES 3
                //efectos indirectos
                if (efectosIndirectos.length == 1) {
                    efectoImg3[0].style.width = 50 + "%";
                } else {
                    for (var i = 0; i < efectoImg3.length; i++) {
                        efectoImg3[i].style.width = 100 / efectos.length + "%";
                    }
                }

                //causas indirectas
                if (causasIndirectas.length == 1) {
                    causaImg3[0].style.width = 50 + "%";
                } else {
                    for (var i = 0; i < causaImg3.length; i++) {
                        causaImg3[i].style.width = 100 / causas.length + "%";
                    }
                }

                //ANCHO DE LI
                //efectos
                for (var i = 0; i < efectos.length; i++) {
                    efectos[i].style.width = 100 / efectos.length + "%";
                }
                //causas
                for (var i = 0; i < causas.length; i++) {
                    causas[i].style.width = 100 / causas.length + "%";
                }
                //efectos indirectos
                if (efectosIndirectos.length == 1) {
                    efectosIndirectos[0].style.width = 50 + "%";
                } else {
                    for (var i = 0; i < efectosIndirectos.length; i++) {
                        efectosIndirectos[i].style.width = 100 / efectos.length + "%";
                    }
                }

                //causas indirectas
                if (causasIndirectas.length == 1) {
                    causasIndirectas[0].style.width = 50 + "%";
                } else {
                    for (var i = 0; i < causasIndirectas.length; i++) {
                        causasIndirectas[i].style.width = 100 / causas.length + "%";
                    }
                }


                //ASIGNAR IMAGENES
                //efectos
                if (efectos.length != 0) {
                    document.querySelector("#imgEfecto").setAttribute("src", "img/lineaU" + efectos.length + ".png");
                } else {

                    document.querySelector("#imgEfecto").setAttribute("src", "img/sinLinea.png");
                }
                //causas
                if (causas.length != 0) {
                    document.querySelector("#imgCausa").setAttribute("src", "img/lineaD" + causas.length + ".png");
                } else {
                    document.querySelector("#imgCausa").setAttribute("src", "img/sinLinea.png");
                }

                //efectos indirectos
                var imgEfectoIndirecto = document.querySelectorAll("#imgEfecto3 img");

                if (imgEfectoIndirecto.length != 0) {
                    for (var i = 0; i < imgEfectoIndirecto.length; i++) {
                        var total = document.querySelectorAll("#efectoIndirecto li:nth-child(" + (i + 1) + ") div");
                        if (total.length != 0) {
                            imgEfectoIndirecto[i].setAttribute("src", "img/lineaU" + total.length + ".png");
                        } else {
                            imgEfectoIndirecto[i].setAttribute("src", "img/sinLinea.png");
                        }
                    }
                }

                //causas indirectas
                var imgCausaIndirecta = document.querySelectorAll("#imgCausa3 img");

                if (imgCausaIndirecta.length != 0) {
                    for (var i = 0; i < imgCausaIndirecta.length; i++) {
                        var total = document.querySelectorAll("#causaIndirecta li:nth-child(" + (i + 1) + ") div");
                        if (total.length != 0) {
                            imgCausaIndirecta[i].setAttribute("src", "img/lineaD" + total.length + ".png");
                        } else {
                            imgCausaIndirecta[i].setAttribute("src", "img/sinLinea.png");
                        }
                    }
                }


                //ASIGANR ID´S Y NUMERO DE POSICION
                for (var i = 0; i < efectos.length; i++) {
                    efectos[i].setAttribute("id", "efecto" + (i + 1));
                    efectos[i].querySelector(".bloque div span").innerHTML = (i + 1) + ".";
                    efectoImg3[i].setAttribute("id", "efecto" + (i + 1) + "img");
                    efectosIndirectos[i].setAttribute("id", "efecto" + (i + 1) + "indirecto");
                }
                for (var i = 0; i < causas.length; i++) {
                    causas[i].setAttribute("id", "causa" + (i + 1));
                    causas[i].querySelector(".bloque div span").innerHTML = (i + 1) + ".";
                    causaImg3[i].setAttribute("id", "causa" + (i + 1) + "img");
                    causasIndirectas[i].setAttribute("id", "causa" + (i + 1) + "indirecto");

                }

                //$(".txtBloque3").css({ "font-size": Tamañoletra(efectos.length) })
                //console.log($(".txtBloque3").css({ "font-size": Tamañoletra(efectos.length) }));

                update(repetir); //entra en la funcion repetir sin salir de la misma, asi crea un ciclo infinito
            }
            update(repetir); //inicia la funcion repetir


            // FUNCIONES QUE ACTIVAN LAS VENTANAS MODALES
            // mostrar
            function modalOn(elemento) {
                //$("#modal").show();
                //$("#arbolContenedor").hide();
                document.querySelector("#modal").style.display = "block";
                document.querySelector(elemento).style.display = "block";
            }
            // ocultar
            function modalOff() {
                document.querySelector("#modal").style.display = "none";
                //$("#arbolContenedor").show();
                var elementosModal = document.querySelectorAll(".contenidoModal");
                for (var i = 0; i < elementosModal.length; i++) {
                    elementosModal[i].style.display = "none";
                }
            }

            //FUNCION DE LAS ALERTAS
            //alerta1 que dura cierto tiempo, tiene 3 parametros (la duracion es en segundos).
            function alerta1(titulo, texto, duracion) {
                alerta.style.top = "5%";
                alerta.querySelector("h3").innerHTML = titulo;
                alerta.querySelector("p").innerHTML = texto;
                setTimeout(function () {
                    alerta.style.top = "-25%";
                }, duracion * 1000)
            }


            //VARIABLES PARA LA CREACIÓN DEL ARBOL
            var contEfeIndir = 0;
            var contCuaIndir = 0;
            $scope.CausasTotales = [];
            $scope.EfectosTotales = [];
            $scope.CausasIndTotales = [];
            $scope.EfectosIndTotales = [];


            //VARIABLE Y FUNCIÓN PARA CONSULTAR EL PROYECTO ACTUALIZADO Y CREAR EL ARBOL DE PROBLEMAS
            $scope.IdProyecto = $rootScope.proyecto.datos.id;
            MenuService.AbrirProyecto($scope.IdProyecto, function (response) {
                waitingDialog.show();
                if (response.success) {
                    $scope.DatosProyecto = response.proyecto;
                    //FUNCIÓN PARA CONSULTAR LOS DATOS DE LA MATRIZ  Y PINTAR EL ARBOL DE PROBLEMAS
                    if ($rootScope.proyecto != undefined) {
                        if ($scope.DatosProyecto.Etapa < 3) {
                            ArbolProblemaService.ArbolProblemaProyecto($rootScope.proyecto.datos.id, function (response) {
                                if (response.success == true) {

                                    //APARICION PROBLEMA CENTRAL MODAL
                                    if (response.arbol != null) {

                                        $scope.Arbol.DetalleMat = response.arbol.DetalleMat;
                                        var problemaGeneral = response.arbol.ProblemaGeneral;

                                        alerta1("Consejo.", "En el panel de la izquierda podras crear las causas y efectos.", 5);

                                        //CICLO PARA RECORRER TODOS LOS PROBLEMAS Y SEPARAR CAUSAS Y EFECTOS
                                        $.each($scope.Arbol.DetalleMat, function (index, value) {
                                            if (value.Criterio == "Punto Critico") {
                                                var txtInicial = value.Problema;//capturar texto del problema central en modal
                                                document.querySelector("#txtProblema").value = txtInicial;
                                            }

                                            if (value.Criterio == "Pasivos") {
                                                if (contEfeIndir < 5) {
                                                    $scope.EfectosTotales.push(value);
                                                    contEfeIndir++;
                                                } else {
                                                    $scope.EfectosIndTotales.push(value);
                                                }
                                            }

                                            if (value.Criterio == "Activos") {
                                                if (contCuaIndir < 5) {
                                                    $scope.CausasTotales.push(value);
                                                    contCuaIndir++;
                                                } else {
                                                    $scope.CausasIndTotales.push(value);
                                                }
                                            }
                                        });

                                        //CICLO PARA CREAR LOS EFECTOS EN EL ARBOL
                                        $.each($scope.EfectosTotales, function (index, value) {
                                            if (index < 5) {
                                                img3 = document.createElement("img");
                                                elemento = document.createElement("li");
                                                elemento2 = document.createElement("li");
                                                bloque = document.createElement("div");
                                                borrar = document.createElement("div");
                                                txtArea = document.createElement("textarea");
                                                txtArea.value = value.Problema;
                                                borrar.innerHTML = "<span></span><h6 class='borrarElemento' onclick='borrarElemento(this)'> Borrar</h6>";
                                                bloque.setAttribute("class", "bloque");
                                                txtArea.setAttribute("class", "txtBloque2");
                                                txtArea.setAttribute("maxlength", "140");

                                                efecto.appendChild(elemento).appendChild(bloque).appendChild(borrar);
                                                efecto.querySelector("li:last-child div:last-child").appendChild(txtArea);
                                                document.querySelector("#imgEfecto3").appendChild(img3);
                                                document.querySelector("#efectoIndirecto").appendChild(elemento2);
                                            }

                                        });

                                        //CICLO PARA CREAR EFECTOS INDIRECTOS DEL ARBOL
                                        var indirecto1 = 1
                                        $.each($scope.EfectosIndTotales, function (index, value) {

                                            if (index == 3 || index == 6 || index == 9 || index == 12) {
                                                indirecto1++;
                                            }

                                            bloque = document.createElement("div");
                                            borrar = document.createElement("span");
                                            txtArea = document.createElement("textarea");
                                            txtArea.value = value.Problema;
                                            borrar.innerHTML = "<h6 class='borrarElemento' onclick='borrarElemento2(this)'> Borrar</h6>";
                                            bloque.setAttribute("class", "bloque2");
                                            txtArea.setAttribute("class", "txtBloque3");
                                            txtArea.setAttribute("maxlength", "140");
                                            efectoIndirectoUl.querySelector("li:nth-child(" + indirecto1 + ")").appendChild(bloque).appendChild(txtArea);
                                            efectoIndirectoUl.querySelector("li:nth-child(" + indirecto1 + ") div:last-child").appendChild(borrar);
                                        })

                                        //CICLO PARA CREAR LOS CAUSAS EN EL ARBOL
                                        $.each($scope.CausasTotales, function (index, value) {
                                            if (index < 5) {

                                                img3 = document.createElement("img");
                                                elemento = document.createElement("li");
                                                elemento2 = document.createElement("li");
                                                bloque = document.createElement("div");
                                                borrar = document.createElement("div");
                                                txtArea = document.createElement("textarea");
                                                txtArea.value = value.Problema;
                                                borrar.innerHTML = "<span></span><h6 class='borrarElemento' onclick='borrarElemento(this)'> Borrar</h6>";
                                                bloque.setAttribute("class", "bloque");
                                                txtArea.setAttribute("class", "txtBloque2");
                                                txtArea.setAttribute("maxlength", "140");
                                                causa.appendChild(elemento).appendChild(bloque).appendChild(borrar);
                                                causa.querySelector("li:last-child div:last-child").appendChild(txtArea);
                                                document.querySelector("#imgCausa3").appendChild(img3);
                                                document.querySelector("#causaIndirecta").appendChild(elemento2);
                                            }

                                        });

                                        //CICLO PARA CREAR CAUSAS INDIRECTAS DEL ARBOL
                                        var indirecto = 1
                                        $.each($scope.CausasIndTotales, function (index, value) {

                                            if (index == 3 || index == 6 || index == 9 || index == 12) {
                                                indirecto++;
                                            }

                                            bloque = document.createElement("div");
                                            borrar = document.createElement("span");
                                            txtArea = document.createElement("textarea");
                                            txtArea.value = value.Problema;
                                            borrar.innerHTML = "<h6 class='borrarElemento' onclick='borrarElemento2(this)'> Borrar</h6>";
                                            bloque.setAttribute("class", "bloque2");
                                            txtArea.setAttribute("class", "txtBloque3");
                                            txtArea.setAttribute("maxlength", "140");
                                            causaIndirectaUl.querySelector("li:nth-child(" + indirecto + ")").appendChild(bloque).appendChild(txtArea);
                                            causaIndirectaUl.querySelector("li:nth-child(" + indirecto + ") div:last-child").appendChild(borrar);

                                        })


                                    } else {
                                        modalOn("#crearProblemaCentral");

                                        //ASIGNAR EL PROBLEMA CENTRAL PRIMERA VEZ
                                        $scope.AsignarProblemaCentral = function () {
                                            var txtInicial = document.querySelector("#txtProblemaInicial").value; //capturar texto del problema central en modal
                                            if (txtInicial.length == 0 || txtInicial == " ") { //validar si viene vacio
                                                swal({
                                                    text: 'Debes ingresar un problema central',
                                                    confirmButtonColor: '#238276',
                                                    width: '25%'

                                                })


                                            } else {
                                                document.querySelector("#txtProblema").value = txtInicial;
                                                modalOff();
                                                alerta1("Consejo.", "En el panel de la izquierda podras crear las causas y efectos.", 5);
                                            }
                                        }
                                        //document.querySelector("#btnProblemaCentral").addEventListener("click", function () {
                                        //    var txtInicial = document.querySelector("#txtProblemaInicial").value; //capturar texto del problema central en modal
                                        //    if (txtInicial.length == 0 || txtInicial == " ") { //validar si viene vacio
                                        //        swal({
                                        //            text: 'Debes ingresar un problema central',
                                        //            confirmButtonColor: '#238276',
                                        //            width: '25%'

                                        //        })


                                        //    } else {
                                        //        document.querySelector("#txtProblema").value = txtInicial;
                                        //        modalOff();
                                        //        alerta1("Consejo.", "En el panel de la izquierda podras crear las causas y efectos.", 5);
                                        //    }
                                        //});
                                    }
                                }
                                waitingDialog.hide();
                            })
                        } else {
                            ArbolProblemaService.ConsultarArbolFinal($rootScope.proyecto.datos.id, function (response) {
                                if (response.success) {

                                    var problemaGeneral = response.ArbolFinal.ProblemaCentral;
                                    document.querySelector("#txtProblema").value = problemaGeneral;
                                    alerta1("Consejo.", "En el panel de la izquierda podras crear las causas y efectos.", 5);

                                    //CICLO PARA CREAR LOS EFECTOS EN EL ARBOL
                                    $.each(response.ArbolFinal.Efectos, function (index, value) {

                                        img3 = document.createElement("img");
                                        elemento = document.createElement("li");
                                        elemento2 = document.createElement("li");
                                        bloque = document.createElement("div");
                                        borrar = document.createElement("div");
                                        txtArea = document.createElement("textarea");
                                        txtArea.value = value.Efecto;
                                        borrar.innerHTML = "<span></span><h6 class='borrarElemento' onclick='borrarElemento(this)'>Borrar</h6>";
                                        bloque.setAttribute("class", "bloque");
                                        txtArea.setAttribute("class", "txtBloque2");
                                        txtArea.setAttribute("maxlength", "140");
                                        efecto.appendChild(elemento).appendChild(bloque).appendChild(borrar);
                                        efecto.querySelector("li:last-child div:last-child").appendChild(txtArea);
                                        document.querySelector("#imgEfecto3").appendChild(img3);
                                        document.querySelector("#efectoIndirecto").appendChild(elemento2);


                                        $.each(value.EfectoIndirecta, function (index1, value1) {
                                            $scope.EfectosIndTotales.push({ id: index, EfectoIndirecta: value.EfectoIndirecta[index1] })
                                        })


                                    });

                                    //CICLO PARA CREAR EFECTOS INDIRECTOS DEL ARBOL
                                    console.log($scope.EfectosIndTotales);
                                    var indirecto1 = 0;
                                    $.each($scope.EfectosIndTotales, function (index, value) {

                                        indirecto1 = (value.id) + 1;

                                        bloque = document.createElement("div");
                                        borrar = document.createElement("span");
                                        txtArea = document.createElement("textarea");
                                        txtArea.value = value.EfectoIndirecta;
                                        borrar.innerHTML = "<h6 class='borrarElemento' onclick='borrarElemento2(this)'>Borrar</h6>";
                                        bloque.setAttribute("class", "bloque2");
                                        txtArea.setAttribute("class", "txtBloque3");
                                        txtArea.setAttribute("maxlength", "140");
                                        efectoIndirectoUl.querySelector("li:nth-child(" + indirecto1 + ")").appendChild(bloque).appendChild(txtArea);
                                        efectoIndirectoUl.querySelector("li:nth-child(" + indirecto1 + ") div:last-child").appendChild(borrar);
                                    })

                                    //CICLO PARA CREAR LOS CAUSAS EN EL ARBOL
                                    $.each(response.ArbolFinal.Causas, function (index, value) {

                                        img3 = document.createElement("img");
                                        elemento = document.createElement("li");
                                        elemento2 = document.createElement("li");
                                        bloque = document.createElement("div");
                                        borrar = document.createElement("div");
                                        txtArea = document.createElement("textarea");
                                        txtArea.value = value.Causa;
                                        borrar.innerHTML = "<span></span><h6 class='borrarElemento' onclick='borrarElemento(this)'> Borrar</h6>";
                                        bloque.setAttribute("class", "bloque");
                                        txtArea.setAttribute("class", "txtBloque2");
                                        txtArea.setAttribute("maxlength", "140");
                                        causa.appendChild(elemento).appendChild(bloque).appendChild(borrar);
                                        causa.querySelector("li:last-child div:last-child").appendChild(txtArea);
                                        document.querySelector("#imgCausa3").appendChild(img3);
                                        document.querySelector("#causaIndirecta").appendChild(elemento2);

                                        $.each(value.CausaIndirecta, function (index1, value1) {
                                            $scope.CausasIndTotales.push({ id: index, CausaIndirecta: value.CausaIndirecta[index1] })
                                        })
                                    });

                                    console.log($scope.CausasIndTotales);
                                    //CICLO PARA CREAR CAUSAS INDIRECTAS DEL ARBOL
                                    var indirecto = 0;
                                    $.each($scope.CausasIndTotales, function (index, value) {
                                        indirecto = (value.id) + 1;

                                        bloque = document.createElement("div");
                                        borrar = document.createElement("span");
                                        txtArea = document.createElement("textarea");
                                        txtArea.value = value.CausaIndirecta;
                                        borrar.innerHTML = "<h6 class='borrarElemento' onclick='borrarElemento2(this)'>Borrar</h6>";
                                        bloque.setAttribute("class", "bloque2");
                                        txtArea.setAttribute("class", "txtBloque3");
                                        txtArea.setAttribute("maxlength", "140");
                                        causaIndirectaUl.querySelector("li:nth-child(" + indirecto + ")").appendChild(bloque).appendChild(txtArea);
                                        causaIndirectaUl.querySelector("li:nth-child(" + indirecto + ") div:last-child").appendChild(borrar);

                                    })


                                }
                                //$("#guardar").hide();
                                waitingDialog.hide();
                            })
                        }
                    }

                }

            })


            //FUNCION PARA MOSTRAR Y OCULTAR EL PANEL
            $scope.mostrarPanel = function () {
                if (panelOn) {
                    panel.style.top = "-100%";
                    textoPanel.innerHTML = "Mostrar";
                    panelOn = false;
                } else {
                    panel.style.top = "30px";
                    textoPanel.innerHTML = "Ocultar";
                    panelOn = true;
                }
            }


            //FUNCION DEL SELECT DEL PANEL
            $scope.cambioElemento = function () {
                tipo = document.querySelector("#elemento").value;
                document.querySelector("#asignarIndirecta").innerHTML = '<option value="vacio">Seleccionar...</option>'; //resetea el select de indirecta

                if (tipo == "efectoIndirecto") {
                    document.querySelector("#indirecta").style.display = "block"; //muestra el select para asignar a una indirecta
                    document.querySelector("#txtIndirecta").innerHTML = "efecto"; //coloca el texto segun la indirecta (causas o efectos)
                    for (var i = 0; i < efectos.length; i++) {
                        var option = document.createElement("option");
                        option.innerHTML = i + 1;
                        option.setAttribute("value", i + 1);
                        document.querySelector("#asignarIndirecta").appendChild(option);
                        alerta1("Consejo.", "Asiga tu efecto indirecto a un efecto según su posición.", 3);
                    }
                } else if (tipo == "causaIndirecta") {
                    document.querySelector("#indirecta").style.display = "block"; //muestra el select para asignar a una indirecta
                    document.querySelector("#txtIndirecta").innerHTML = "causa"; //coloca el texto segun la indirecta (causas o efectos)
                    for (var i = 0; i < causas.length; i++) {
                        var option = document.createElement("option");
                        option.innerHTML = i + 1;
                        option.setAttribute("value", i + 1);
                        document.querySelector("#asignarIndirecta").appendChild(option);
                        alerta1("Consejo.", "Asiga tu causa indirecta a una causa según su posición.", 3);
                    }
                } else {
                    document.querySelector("#indirecta").style.display = "none"; //esconde el select para asignar a una indirecta
                }
            }
            //CAMBIAR TAMAÑO DE LA LETRA DEL BLOQUE 3
            function Tamañoletra(cantidad) {
                switch (cantidad) {
                    case 1: {
                        //if ((screen.width <= 1024) && (screen.height <= 768)) {
                        letra = "font-size:80%;";
                        //$(".txtBloque3").css({ "font-size": "font-size:50px;"})
                        return letra;
                        //}
                    }
                    case 2: {
                        letra = "font-size:60%;";
                        $(".txtBloque3").css({ "font-size": "font-size:150px;" })

                        return letra;
                    }
                    case 3: {
                        letra = "font-size:50%;";
                        return letra;
                    }
                    case 4: {
                        letra = "font-size:60%;";
                        return letra;
                    }
                    case 5: {
                        letra = "font-size:30%;";
                        return letra;
                    }
                }
            }

            //BOTON CREAR DEL PANEL
            $scope.crear = function () {
                indirecto = document.querySelector("#asignarIndirecta").value;
                var elemento, txtArea, elemento2;

                if (tipo === "vacio" || tipo === undefined) { //validar si el select de tipo viene vacio
                    alerta1("Recuerda.", "Debes seleccionar un efecto o una causa.", 3);
                }

                if (indirecto == "vacio" && tipo == "efectoIndirecto" || tipo == "causaIndirecta") {
                    alerta1("Recuerda.", "Debes seleccionar un efecto o una causa primero.", 3);
                }

                //crear efectos

                if (tipo == "efecto" && efectos.length < 5) {
                    img3 = document.createElement("img");
                    elemento = document.createElement("li");
                    elemento2 = document.createElement("li");
                    bloque = document.createElement("div");
                    borrar = document.createElement("div");
                    txtArea = document.createElement("textarea");
                    txtArea.value = "";
                    borrar.innerHTML = "<span></span><h6 class='borrarElemento' onclick='borrarElemento(this)'> Borrar</h6>";
                    bloque.setAttribute("class", "bloque");
                    txtArea.setAttribute("class", "txtBloque2");
                    txtArea.setAttribute("maxlength", "140");
                    txtArea.setAttribute("style", "font-size:10px;");

                    efecto.appendChild(elemento).appendChild(bloque).appendChild(borrar);
                    efecto.querySelector("li:last-child div:last-child").appendChild(txtArea);
                    document.querySelector("#imgEfecto3").appendChild(img3);
                    document.querySelector("#efectoIndirecto").appendChild(elemento2);
                } else if (tipo == "efecto" && efectos.length >= 5) {
                    alerta1("Recuerda.", "Ya tienes 5 efectos.", 2);
                }

                // crear causas
                if (tipo == "causa" && causas.length < 5) {
                    img3 = document.createElement("img");
                    elemento = document.createElement("li");
                    elemento2 = document.createElement("li");
                    bloque = document.createElement("div");
                    borrar = document.createElement("div");
                    txtArea = document.createElement("textarea");
                    borrar.innerHTML = "<span></span><h6 class='borrarElemento' onclick='borrarElemento(this)'> Borrar</h6>";
                    bloque.setAttribute("class", "bloque");
                    txtArea.setAttribute("class", "txtBloque2");
                    txtArea.setAttribute("maxlength", "140");
                    txtArea.setAttribute("style", "font-size:10px;");

                    causa.appendChild(elemento).appendChild(bloque).appendChild(borrar);
                    causa.querySelector("li:last-child div:last-child").appendChild(txtArea);
                    document.querySelector("#imgCausa3").appendChild(img3);
                    document.querySelector("#causaIndirecta").appendChild(elemento2);
                } else if (tipo == "causa" && causas.length >= 5) {
                    alerta1("Recuerda.", "Ya tienes 5 causas.", 2);
                }

                if (indirecto != "vacio") {
                    // crear efecto indirecto
                    if (tipo == "efectoIndirecto" && document.querySelectorAll("#efectoIndirecto li:nth-child(" + indirecto + ") div").length < 3) {
                        bloque = document.createElement("div");
                        borrar = document.createElement("span");
                        txtArea = document.createElement("textarea");
                        borrar.innerHTML = "<h6 class='borrarElemento' onclick='borrarElemento2(this)'> Borrar</h6>";
                        bloque.setAttribute("class", "bloque2");
                        txtArea.setAttribute("class", "txtBloque3");
                        txtArea.setAttribute("maxlength", "140");
                        txtArea.setAttribute("style", Tamañoletra(efectos.length));

                        efectoIndirectoUl.querySelector("li:nth-child(" + indirecto + ")").appendChild(bloque).appendChild(txtArea);
                        efectoIndirectoUl.querySelector("li:nth-child(" + indirecto + ") div:last-child").appendChild(borrar);

                    } else if (document.querySelectorAll("#efectoIndirecto li:nth-child(" + indirecto + ") div").length >= 3) {
                        alerta1("Recuerda.", "Ya tienes 3 efectos indirectos.", 2);
                    }

                    // crear causa indirecta
                    if (tipo == "causaIndirecta" && document.querySelectorAll("#causaIndirecta li:nth-child(" + indirecto + ") div").length < 3) {

                        bloque = document.createElement("div");
                        borrar = document.createElement("span");
                        txtArea = document.createElement("textarea");
                        borrar.innerHTML = "<h6 class='borrarElemento' onclick='borrarElemento2(this)'> Borrar</h6>";
                        bloque.setAttribute("class", "bloque2");
                        txtArea.setAttribute("class", "txtBloque3");
                        txtArea.setAttribute("maxlength", "140");

                        causaIndirectaUl.querySelector("li:nth-child(" + indirecto + ")").appendChild(bloque).appendChild(txtArea);
                        causaIndirectaUl.querySelector("li:nth-child(" + indirecto + ") div:last-child").appendChild(borrar);
                    } else if (document.querySelectorAll("#causaIndirecta li:nth-child(" + indirecto + ") div").length >= 3) {
                        alerta1("Recuerda.", "Ya tienes 3 causas indirectas.", 2);
                    }
                }
            }

            //FUNCIÓN PARA GUARDAR LOS DATOS DEL ARBOL
            $scope.guardar = function () {


                var datosProblema = document.querySelector("#txtProblema").value;
                var datosEfectos = [];
                var datosCausas = [];
                var datosEfectosIndirectos = [];
                var datosCausasIndirectos = [];

                for (var i = 0; i < efectos.length; i++) {
                    var EfectosVacios = document.querySelector("#efecto li:nth-child(" + (i + 1) + ") textarea").value;
                    if (EfectosVacios != "") {
                        datosEfectos[i] = document.querySelector("#efecto li:nth-child(" + (i + 1) + ") textarea").value;
                    } else {
                        alertify.success("Ups! tienes algún efecto vacio");
                        return;
                    }
                }

                for (var i = 0; i < causas.length; i++) {
                    var CausasVacias = datosCausas[i] = document.querySelector("#causa li:nth-child(" + (i + 1) + ") textarea").value
                    if (CausasVacias != "") {
                        datosCausas[i] = document.querySelector("#causa li:nth-child(" + (i + 1) + ") textarea").value;
                    } else {
                        alertify.success("Ups! tienes alguna causa vacia");
                        return;
                    }
                }

                for (var i = 0; i < efectos.length; i++) {
                    var cadaLiIndirecto = [];

                    for (var e = 0; e < document.querySelectorAll("#efecto" + (i + 1) + "indirecto div").length; e++) {
                        var EfectosIndirectasVacias = cadaLiIndirecto[e] = document.querySelector("#efecto" + (i + 1) + "indirecto div:nth-child(" + (e + 1) + ") textarea").value;

                        if (EfectosIndirectasVacias != "") {
                            cadaLiIndirecto[e] = document.querySelector("#efecto" + (i + 1) + "indirecto div:nth-child(" + (e + 1) + ") textarea").value;
                        } else {
                            alertify.success("Ups! tienes algún efecto indirecto vacio");
                            return;
                        }

                    }
                    datosEfectosIndirectos.push(cadaLiIndirecto);
                }

                for (var i = 0; i < causas.length; i++) {
                    var cadaLiIndirecto = [];

                    for (var e = 0; e < document.querySelectorAll("#causa" + (i + 1) + "indirecto div").length; e++) {
                        var CausasIndirectasVacias = cadaLiIndirecto[e] = document.querySelector("#causa" + (i + 1) + "indirecto div:nth-child(" + (e + 1) + ") textarea").value;
                        if (CausasIndirectasVacias != "") {
                            cadaLiIndirecto[e] = document.querySelector("#causa" + (i + 1) + "indirecto div:nth-child(" + (e + 1) + ") textarea").value;
                        } else {
                            alertify.success("Ups! tienes alguna causa indirecta vacia");
                            return;
                        }

                    }
                    datosCausasIndirectos.push(cadaLiIndirecto);
                }

                $scope.ObjArbol.ProblemaCentral = datosProblema;
                if (datosCausas.length > 0 || datosEfectos > 0) {
                    $.each(datosCausas, function (index, value) {
                        if (value != "") {
                            $scope.ObjArbol.Causas.push({ Causa: value, CausaIndirecta: datosCausasIndirectos[index] })
                        }


                    })
                    $.each(datosEfectos, function (index, value) {

                        $scope.ObjArbol.Efectos.push({ Efecto: value, EfectoIndirecta: datosEfectosIndirectos[index] })
                    })
                } else {
                    alert("debes agregar una causa o un efecto como minimo");
                    return;
                }
                waitingDialog.show();

                $("#guardar").hide();
                $("#tipsArbolProblema").hide();
                $(".borrarElemento").hide();
                setTimeout(function () {
                    html2canvas($("#arbolContenedor"), {
                        onrendered: function (canvas) {
                            theCanvas = canvas;
                            //  document.body.appendChild(canvas);

                            var imgageData = theCanvas.toDataURL();
                            // Now browser starts downloading it instead of just showing it
                            var newData = imgageData.replace(/^data:image\/png/, "data:application/octet-stream");
                            $scope.ObjArbol.imagen = imgageData;

                            ArbolProblemaService.GuardarDatosArbol($scope.ObjArbol, function (response) {
                                if (response.success) {
                                    waitingDialog.hide();
                                    swal({
                                        text: 'Registro Exitoso',
                                        confirmButtonColor: '#238276',
                                        width: '25%'

                                    })

                                    $location.url("/Menu");


                                }
                            })
                        }
                    });
                }, 500);



            }


            //document.querySelector("#guardar").addEventListener("click", function () {

            //});

            $scope.atras = function () {

                $location.url("/Menu");
                $(".notify").hide();
            }

        }]);